{"remainingRequest":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/babel-loader/lib/index.js!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/components/modal/movimentacao-interna/visualizacaoRegistro/devolucao/ModalDevolverPatrimonios.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/components/modal/movimentacao-interna/visualizacaoRegistro/devolucao/ModalDevolverPatrimonios.vue","mtime":1614049852957},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport LabelPersonalizado from '@/views/components/label/LabelPersonalizado';\nimport Paginacao from '@/views/components/tabela/Paginacao';\nimport { actionTypes, mutationTypes } from '@/core/constants';\nimport { mapMutations, mapActions } from 'vuex';\nimport _ from 'lodash';\nimport AcoesBotoesDevolverParcialCancelar from '@/views/components/acoes/AcoesBotoesDevolverParcialCancelar';\nexport default {\n  name: 'ModalDevolverPatrimonios',\n  components: {\n    LabelPersonalizado: LabelPersonalizado,\n    Paginacao: Paginacao,\n    AcoesBotoesDevolverParcialCancelar: AcoesBotoesDevolverParcialCancelar\n  },\n  data: function data() {\n    return {\n      dialog: true,\n      patrimonios: [],\n      movimentacaoInterna: {\n        id: this.$route.params.movimentacaoInternaId,\n        patrimoniosId: []\n      },\n      paginas: 0,\n      totalItens: 0,\n      quantidadeSelecionados: 0,\n      filtrosInterno: this.getFiltros(),\n      paginacaoInterna: this.getPaginacao(),\n      filtroAtivo: false,\n      nomeTela: 'MOVIMENTACAO_INTERNA_ITENS',\n      nomeTelaPatrimonio: 'INCORPORACAO_ITEM_LISTAGEM_PATRMONIO'\n    };\n  },\n  computed: {\n    colunas: function colunas() {\n      return this.criarColunas(2, [], ['patrimonioNumero', 'patrimonioDescricao'], [false, false], ['left', 'left'], ['15%', '85%'], 'gray--text');\n    }\n  },\n  watch: {\n    paginacaoInterna: {\n      handler: function handler(novoValor) {\n        this.tratarEventoPaginar(novoValor);\n      },\n      deep: true\n    },\n    'movimentacaoInterna.patrimoniosId': function movimentacaoInternaPatrimoniosId() {\n      this.calculaQuantidadePatrimoniosSelecionados();\n    }\n  },\n  mounted: function mounted() {\n    this.buscar();\n  },\n  methods: _objectSpread(_objectSpread(_objectSpread({}, mapActions([actionTypes.MOVIMENTACAO_INTERNA.VISUALIZACAO.DEVOLUCAO_ITEM.BUSCAR_TODOS_ITENS_PARA_DEVOLUCAO, actionTypes.MOVIMENTACAO_INTERNA.VISUALIZACAO.DEVOLUCAO_ITEM.DEVOLVER_ITENS_PARCIAL, actionTypes.MOVIMENTACAO_INTERNA.TEMPORARIA.DEVOLVER_TODOS_PATRIMONIOS])), mapMutations([mutationTypes.MOVIMENTACAO_INTERNA.VISUALIZACAO.DEVOLUCAO_ITEM.SET_PAGINACAO_BUSCA_TODOS_ITENS_PARA_DEVOLUCAO, mutationTypes.MOVIMENTACAO_INTERNA.VISUALIZACAO.DEVOLUCAO_ITEM.RESETA_PAGE_BUSCA_TODOS_ITENS_PARA_DEVOLUCAO, mutationTypes.MOVIMENTACAO_INTERNA.VISUALIZACAO.DEVOLUCAO_ITEM.SET_FILTROS_BUSCA_TODOS_ITENS_PARA_DEVOLUCAO])), {}, {\n    getFiltros: function getFiltros() {\n      return _.cloneDeep(this.$store.state.movimentacaoInternaVisualizacaoRegistroItem.resultadoBuscaTodosPatrimoniosParaDevolucao.filtros);\n    },\n    getFiltrosInterno: function getFiltrosInterno() {\n      return _.cloneDeep(this.filtrosInterno);\n    },\n    getPaginacao: function getPaginacao() {\n      return _.cloneDeep(this.$store.state.movimentacaoInternaVisualizacaoRegistroItem.resultadoBuscaTodosPatrimoniosParaDevolucao.paginacao);\n    },\n    buscar: function () {\n      var _buscar = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.setFiltrosBuscaTodosItensParaDevolucao(this.getFiltrosInterno());\n                _context.next = 3;\n                return this.buscaTodosPatrimonios();\n\n              case 3:\n                this.verificarSeFiltroAtivo();\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function buscar() {\n        return _buscar.apply(this, arguments);\n      }\n\n      return buscar;\n    }(),\n    buscaTodosPatrimonios: function () {\n      var _buscaTodosPatrimonios = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var resultado;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.buscarTodosItensParaDevolucao(this.$route.params.movimentacaoInternaId);\n\n              case 2:\n                resultado = _context2.sent;\n\n                if (resultado) {\n                  this.patrimonios = resultado.itens;\n                  this.paginas = resultado.totalPages;\n                  this.totalItens = resultado.totalElements;\n                  this.quantidadeItensTodasPaginas = resultado.totalElements;\n                  this.selecionaTodosPatrimoniosSeNecessario();\n                }\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function buscaTodosPatrimonios() {\n        return _buscaTodosPatrimonios.apply(this, arguments);\n      }\n\n      return buscaTodosPatrimonios;\n    }(),\n    selecionaTodosPatrimoniosSeNecessario: function selecionaTodosPatrimoniosSeNecessario() {\n      if (this.movimentacaoInterna.devolverTodos) {\n        this.movimentacaoInterna.patrimoniosId = this.filtrarPatrimonios(this.patrimonios);\n      }\n    },\n    filtrarPatrimonios: function filtrarPatrimonios(patrimonios) {\n      var _this = this;\n\n      return patrimonios.filter(function (patrimonio) {\n        return !_this.movimentacaoInterna.patrimoniosNaoConsiderar.includes(patrimonio.patrimonioId);\n      });\n    },\n    calculaQuantidadePatrimoniosSelecionados: function calculaQuantidadePatrimoniosSelecionados() {\n      if (this.movimentacaoInterna.devolverTodos) {\n        this.quantidadeSelecionados = this.quantidadeItensTodasPaginas - this.movimentacaoInterna.patrimoniosNaoConsiderar.length;\n      } else {\n        this.quantidadeSelecionados = this.movimentacaoInterna.patrimoniosId.length;\n      }\n    },\n    fecharModal: function () {\n      var _fecharModal = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.$router.push({\n                  name: 'VisualizarRegistroMovimentacaoInterna',\n                  params: {\n                    movimentacaoInternaId: this.$route.params.movimentacaoInternaId\n                  }\n                });\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function fecharModal() {\n        return _fecharModal.apply(this, arguments);\n      }\n\n      return fecharModal;\n    }(),\n    tratarEventoPaginar: function tratarEventoPaginar(paginacao) {\n      this.setPaginacaoBuscaTodosItensParaDevolucao(paginacao);\n      this.resetarPaginacaoSortBy(paginacao);\n      this.buscar();\n    },\n    tratarEventoDevolver: function () {\n      var _tratarEventoDevolver = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var movimentacao;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                movimentacao = _.cloneDeep(this.movimentacaoInterna);\n                movimentacao.patrimoniosId = this.filtraIdPatrimoniosSelecionados();\n                _context4.prev = 2;\n\n                if (!movimentacao.devolverTodos) {\n                  _context4.next = 8;\n                  break;\n                }\n\n                _context4.next = 6;\n                return this.devolverTodosPatrimonios(this.movimentacaoInterna.id);\n\n              case 6:\n                _context4.next = 10;\n                break;\n\n              case 8:\n                _context4.next = 10;\n                return this.devolverItensParcial(movimentacao);\n\n              case 10:\n                this.mostrarNotificacaoSucesso('Operação realizada com sucesso');\n                _context4.next = 16;\n                break;\n\n              case 13:\n                _context4.prev = 13;\n                _context4.t0 = _context4[\"catch\"](2);\n                this.mostrarNotificacaoErro(_context4.t0.response.data.message);\n\n              case 16:\n                this.resetaPage();\n                this.buscarInformacoesAtualizadasMovimentacao();\n                _context4.next = 20;\n                return this.redirecionarParaVisualizacaoMovimentacao();\n\n              case 20:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[2, 13]]);\n      }));\n\n      function tratarEventoDevolver() {\n        return _tratarEventoDevolver.apply(this, arguments);\n      }\n\n      return tratarEventoDevolver;\n    }(),\n    filtraIdPatrimoniosSelecionados: function filtraIdPatrimoniosSelecionados() {\n      return this.movimentacaoInterna.patrimoniosId.map(function (item) {\n        return item.patrimonioId;\n      });\n    },\n    tratarEventoBuscaSimples: function tratarEventoBuscaSimples(valor) {\n      this.resetaPage();\n      this.filtrosInterno.conteudo.value = valor;\n      this.filtroAtivo = true;\n      this.buscar();\n    },\n    tratarEventoRemoverFiltro: function tratarEventoRemoverFiltro(propriedade) {\n      if (this.filtrosInterno[propriedade]) {\n        this.filtrosInterno[propriedade].value = this.filtrosInterno[propriedade].default;\n      }\n\n      this.filtroAtivo = false;\n      this.buscar();\n    },\n    resetarPaginacaoSortBy: function resetarPaginacaoSortBy(paginacao) {\n      if (!paginacao.sortBy[0]) {\n        this.$store.state.movimentacaoInternaVisualizacaoRegistroItem.resultadoBuscaTodosPatrimoniosParaDevolucao.paginacao.sortBy[0] = paginacao.defaultSortBy;\n      }\n    },\n    redirecionarParaVisualizacaoMovimentacao: function () {\n      var _redirecionarParaVisualizacaoMovimentacao = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.$router.push({\n                  name: 'VisualizarRegistroMovimentacaoInterna',\n                  params: {\n                    movimentacaoInternaId: this.$route.params.movimentacaoInternaId\n                  }\n                });\n\n              case 2:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function redirecionarParaVisualizacaoMovimentacao() {\n        return _redirecionarParaVisualizacaoMovimentacao.apply(this, arguments);\n      }\n\n      return redirecionarParaVisualizacaoMovimentacao;\n    }(),\n    resetaPage: function resetaPage() {\n      this.resetaPageBuscaTodosItensParaDevolucao();\n    },\n    resetarPatrimoniosExcecao: function resetarPatrimoniosExcecao() {\n      this.movimentacaoInterna.patrimoniosNaoConsiderar = [];\n    },\n    selecionaTodosPatrimoniosTodasPaginas: function selecionaTodosPatrimoniosTodasPaginas(props) {\n      if (props.value || this.filtroAtivo) {\n        this.movimentacaoInterna.devolverTodos = false;\n        this.resetarPatrimoniosExcecao();\n      } else {\n        this.movimentacaoInterna.devolverTodos = true;\n        this.resetarPatrimoniosExcecao();\n      }\n    },\n    selecionarPatrimonio: function selecionarPatrimonio(item) {\n      if (this.movimentacaoInterna.devolverTodos) {\n        this.movimentacaoInterna.patrimoniosNaoConsiderar = this.movimentacaoInterna.patrimoniosNaoConsiderar.filter(function (patrimonio) {\n          return patrimonio !== item.patrimonioId;\n        });\n      }\n\n      this.movimentacaoInterna.patrimoniosId.push(item);\n    },\n    desselecionarPatrimonio: function desselecionarPatrimonio(item) {\n      if (this.movimentacaoInterna.devolverTodos) {\n        this.movimentacaoInterna.devolverTodos = false;\n        this.movimentacaoInterna.patrimoniosNaoConsiderar.push(item.patrimonioId);\n      }\n\n      this.movimentacaoInterna.patrimoniosId = this.movimentacaoInterna.patrimoniosId.filter(function (patrimonio) {\n        return patrimonio.patrimonioId !== item.patrimonioId;\n      });\n    },\n    buscarInformacoesAtualizadasMovimentacao: function buscarInformacoesAtualizadasMovimentacao() {\n      this.$emit('buscarInformacoesAtualizadasMovimentacao');\n    },\n    verificarSeFiltroAtivo: function verificarSeFiltroAtivo() {\n      this.filtroAtivo = !!this.filtrosInterno.conteudo.value;\n    }\n  })\n};",{"version":3,"sources":["ModalDevolverPatrimonios.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA,OAAA,kBAAA,MAAA,6CAAA;AACA,OAAA,SAAA,MAAA,qCAAA;AACA,SAAA,WAAA,EAAA,aAAA,QAAA,kBAAA;AACA,SAAA,YAAA,EAAA,UAAA,QAAA,MAAA;AACA,OAAA,CAAA,MAAA,QAAA;AACA,OAAA,kCAAA,MAAA,6DAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,0BADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,kBAAA,EAAA,kBADA;AAEA,IAAA,SAAA,EAAA,SAFA;AAGA,IAAA,kCAAA,EAAA;AAHA,GAFA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,IADA;AAEA,MAAA,WAAA,EAAA,EAFA;AAGA,MAAA,mBAAA,EAAA;AACA,QAAA,EAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA,qBADA;AAEA,QAAA,aAAA,EAAA;AAFA,OAHA;AAOA,MAAA,OAAA,EAAA,CAPA;AAQA,MAAA,UAAA,EAAA,CARA;AASA,MAAA,sBAAA,EAAA,CATA;AAUA,MAAA,cAAA,EAAA,KAAA,UAAA,EAVA;AAWA,MAAA,gBAAA,EAAA,KAAA,YAAA,EAXA;AAYA,MAAA,WAAA,EAAA,KAZA;AAaA,MAAA,QAAA,EAAA,4BAbA;AAcA,MAAA,kBAAA,EAAA;AAdA,KAAA;AAgBA,GAxBA;AAyBA,EAAA,QAAA,EAAA;AACA,IAAA,OADA,qBACA;AACA,aAAA,KAAA,YAAA,CAAA,CAAA,EACA,EADA,EAEA,CAAA,kBAAA,EAAA,qBAAA,CAFA,EAGA,CAAA,KAAA,EAAA,KAAA,CAHA,EAIA,CAAA,MAAA,EAAA,MAAA,CAJA,EAKA,CAAA,KAAA,EAAA,KAAA,CALA,EAMA,YANA,CAAA;AAOA;AATA,GAzBA;AAoCA,EAAA,KAAA,EAAA;AACA,IAAA,gBAAA,EAAA;AACA,MAAA,OADA,mBACA,SADA,EACA;AACA,aAAA,mBAAA,CAAA,SAAA;AACA,OAHA;AAIA,MAAA,IAAA,EAAA;AAJA,KADA;AAOA,uCAPA,8CAOA;AACA,WAAA,wCAAA;AACA;AATA,GApCA;AA+CA,EAAA,OA/CA,qBA+CA;AACA,SAAA,MAAA;AACA,GAjDA;AAkDA,EAAA,OAAA,gDACA,UAAA,CAAA,CACA,WAAA,CAAA,oBAAA,CAAA,YAAA,CAAA,cAAA,CAAA,iCADA,EAEA,WAAA,CAAA,oBAAA,CAAA,YAAA,CAAA,cAAA,CAAA,sBAFA,EAGA,WAAA,CAAA,oBAAA,CAAA,UAAA,CAAA,0BAHA,CAAA,CADA,GAMA,YAAA,CAAA,CACA,aAAA,CAAA,oBAAA,CAAA,YAAA,CAAA,cAAA,CAAA,8CADA,EAEA,aAAA,CAAA,oBAAA,CAAA,YAAA,CAAA,cAAA,CAAA,4CAFA,EAGA,aAAA,CAAA,oBAAA,CAAA,YAAA,CAAA,cAAA,CAAA,4CAHA,CAAA,CANA;AAWA,IAAA,UAXA,wBAWA;AACA,aAAA,CAAA,CAAA,SAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,2CAAA,CAAA,2CAAA,CAAA,OAAA,CAAA;AACA,KAbA;AAcA,IAAA,iBAdA,+BAcA;AACA,aAAA,CAAA,CAAA,SAAA,CAAA,KAAA,cAAA,CAAA;AACA,KAhBA;AAiBA,IAAA,YAjBA,0BAiBA;AACA,aAAA,CAAA,CAAA,SAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,2CAAA,CAAA,2CAAA,CAAA,SAAA,CAAA;AACA,KAnBA;AAoBA,IAAA,MApBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqBA,qBAAA,sCAAA,CAAA,KAAA,iBAAA,EAAA;AArBA;AAAA,uBAsBA,KAAA,qBAAA,EAtBA;;AAAA;AAuBA,qBAAA,sBAAA;;AAvBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAyBA,IAAA,qBAzBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBA0BA,KAAA,6BAAA,CAAA,KAAA,MAAA,CAAA,MAAA,CAAA,qBAAA,CA1BA;;AAAA;AA0BA,gBAAA,SA1BA;;AA2BA,oBAAA,SAAA,EAAA;AACA,uBAAA,WAAA,GAAA,SAAA,CAAA,KAAA;AACA,uBAAA,OAAA,GAAA,SAAA,CAAA,UAAA;AACA,uBAAA,UAAA,GAAA,SAAA,CAAA,aAAA;AACA,uBAAA,2BAAA,GAAA,SAAA,CAAA,aAAA;AACA,uBAAA,qCAAA;AACA;;AAjCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAmCA,IAAA,qCAnCA,mDAmCA;AACA,UAAA,KAAA,mBAAA,CAAA,aAAA,EAAA;AACA,aAAA,mBAAA,CAAA,aAAA,GAAA,KAAA,kBAAA,CAAA,KAAA,WAAA,CAAA;AACA;AACA,KAvCA;AAwCA,IAAA,kBAxCA,8BAwCA,WAxCA,EAwCA;AAAA;;AACA,aAAA,WAAA,CAAA,MAAA,CAAA,UAAA,UAAA,EAAA;AACA,eAAA,CAAA,KAAA,CAAA,mBAAA,CAAA,wBAAA,CAAA,QAAA,CAAA,UAAA,CAAA,YAAA,CAAA;AACA,OAFA,CAAA;AAGA,KA5CA;AA6CA,IAAA,wCA7CA,sDA6CA;AACA,UAAA,KAAA,mBAAA,CAAA,aAAA,EAAA;AACA,aAAA,sBAAA,GAAA,KAAA,2BAAA,GAAA,KAAA,mBAAA,CAAA,wBAAA,CAAA,MAAA;AACA,OAFA,MAEA;AACA,aAAA,sBAAA,GAAA,KAAA,mBAAA,CAAA,aAAA,CAAA,MAAA;AACA;AACA,KAnDA;AAoDA,IAAA,WApDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAqDA,KAAA,OAAA,CAAA,IAAA,CAAA;AACA,kBAAA,IAAA,EAAA,uCADA;AAEA,kBAAA,MAAA,EAAA;AAAA,oBAAA,qBAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA;AAAA;AAFA,iBAAA,CArDA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA0DA,IAAA,mBA1DA,+BA0DA,SA1DA,EA0DA;AACA,WAAA,wCAAA,CAAA,SAAA;AACA,WAAA,sBAAA,CAAA,SAAA;AACA,WAAA,MAAA;AACA,KA9DA;AA+DA,IAAA,oBA/DA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgEA,gBAAA,YAhEA,GAgEA,CAAA,CAAA,SAAA,CAAA,KAAA,mBAAA,CAhEA;AAiEA,gBAAA,YAAA,CAAA,aAAA,GAAA,KAAA,+BAAA,EAAA;AAjEA;;AAAA,qBAoEA,YAAA,CAAA,aApEA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAqEA,KAAA,wBAAA,CAAA,KAAA,mBAAA,CAAA,EAAA,CArEA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,uBAuEA,KAAA,oBAAA,CAAA,YAAA,CAvEA;;AAAA;AAyEA,qBAAA,yBAAA,CAAA,gCAAA;AAzEA;AAAA;;AAAA;AAAA;AAAA;AA2EA,qBAAA,sBAAA,CAAA,aAAA,QAAA,CAAA,IAAA,CAAA,OAAA;;AA3EA;AA8EA,qBAAA,UAAA;AACA,qBAAA,wCAAA;AA/EA;AAAA,uBAgFA,KAAA,wCAAA,EAhFA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAkFA,IAAA,+BAlFA,6CAkFA;AACA,aAAA,KAAA,mBAAA,CAAA,aAAA,CAAA,GAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,YAAA;AAAA,OAAA,CAAA;AACA,KApFA;AAqFA,IAAA,wBArFA,oCAqFA,KArFA,EAqFA;AACA,WAAA,UAAA;AACA,WAAA,cAAA,CAAA,QAAA,CAAA,KAAA,GAAA,KAAA;AACA,WAAA,WAAA,GAAA,IAAA;AACA,WAAA,MAAA;AACA,KA1FA;AA2FA,IAAA,yBA3FA,qCA2FA,WA3FA,EA2FA;AACA,UAAA,KAAA,cAAA,CAAA,WAAA,CAAA,EAAA;AACA,aAAA,cAAA,CAAA,WAAA,EAAA,KAAA,GAAA,KAAA,cAAA,CAAA,WAAA,EAAA,OAAA;AACA;;AACA,WAAA,WAAA,GAAA,KAAA;AACA,WAAA,MAAA;AACA,KAjGA;AAkGA,IAAA,sBAlGA,kCAkGA,SAlGA,EAkGA;AACA,UAAA,CAAA,SAAA,CAAA,MAAA,CAAA,CAAA,CAAA,EAAA;AACA,aAAA,MAAA,CAAA,KAAA,CAAA,2CAAA,CAAA,2CAAA,CAAA,SAAA,CAAA,MAAA,CAAA,CAAA,IAAA,SAAA,CAAA,aAAA;AACA;AACA,KAtGA;AAuGA,IAAA,wCAvGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAwGA,KAAA,OAAA,CAAA,IAAA,CAAA;AACA,kBAAA,IAAA,EAAA,uCADA;AAEA,kBAAA,MAAA,EAAA;AAAA,oBAAA,qBAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA;AAAA;AAFA,iBAAA,CAxGA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA6GA,IAAA,UA7GA,wBA6GA;AACA,WAAA,sCAAA;AACA,KA/GA;AAgHA,IAAA,yBAhHA,uCAgHA;AACA,WAAA,mBAAA,CAAA,wBAAA,GAAA,EAAA;AACA,KAlHA;AAmHA,IAAA,qCAnHA,iDAmHA,KAnHA,EAmHA;AACA,UAAA,KAAA,CAAA,KAAA,IAAA,KAAA,WAAA,EAAA;AACA,aAAA,mBAAA,CAAA,aAAA,GAAA,KAAA;AACA,aAAA,yBAAA;AACA,OAHA,MAGA;AACA,aAAA,mBAAA,CAAA,aAAA,GAAA,IAAA;AACA,aAAA,yBAAA;AACA;AACA,KA3HA;AA4HA,IAAA,oBA5HA,gCA4HA,IA5HA,EA4HA;AACA,UAAA,KAAA,mBAAA,CAAA,aAAA,EAAA;AACA,aAAA,mBAAA,CAAA,wBAAA,GAAA,KAAA,mBAAA,CAAA,wBAAA,CAAA,MAAA,CAAA,UAAA,UAAA;AAAA,iBAAA,UAAA,KAAA,IAAA,CAAA,YAAA;AAAA,SAAA,CAAA;AACA;;AACA,WAAA,mBAAA,CAAA,aAAA,CAAA,IAAA,CAAA,IAAA;AACA,KAjIA;AAkIA,IAAA,uBAlIA,mCAkIA,IAlIA,EAkIA;AACA,UAAA,KAAA,mBAAA,CAAA,aAAA,EAAA;AACA,aAAA,mBAAA,CAAA,aAAA,GAAA,KAAA;AACA,aAAA,mBAAA,CAAA,wBAAA,CAAA,IAAA,CAAA,IAAA,CAAA,YAAA;AACA;;AACA,WAAA,mBAAA,CAAA,aAAA,GAAA,KAAA,mBAAA,CAAA,aAAA,CAAA,MAAA,CAAA,UAAA,UAAA;AAAA,eAAA,UAAA,CAAA,YAAA,KAAA,IAAA,CAAA,YAAA;AAAA,OAAA,CAAA;AACA,KAxIA;AAyIA,IAAA,wCAzIA,sDAyIA;AACA,WAAA,KAAA,CAAA,0CAAA;AACA,KA3IA;AA4IA,IAAA,sBA5IA,oCA4IA;AACA,WAAA,WAAA,GAAA,CAAA,CAAA,KAAA,cAAA,CAAA,QAAA,CAAA,KAAA;AACA;AA9IA;AAlDA,CAAA","sourcesContent":["<template>\n    <v-dialog persistent v-model=\"dialog\" width=\"800\">\n        <v-card>\n            <v-card-title\n                class=\"body-2 primary white--text\"\n                primary-title>\n                Selecione os Patrimônios\n                <v-spacer/>\n                <v-btn min-width=\"10px\" class=\"pa-1 white--text\" text @click=\"fecharModal\">\n                    <v-icon small>fas fa-times</v-icon>\n                </v-btn>\n            </v-card-title>\n            <az-toolbar class=\"search-listagem-patrimonios-devolucao\">\n                <az-search\n                    :filter=\"filtrosInterno\"\n                    @remove-filter=\"tratarEventoRemoverFiltro\"\n                    :maxlengthInput=\"500\"\n                    @simple-search=\"tratarEventoBuscaSimples\"\n                    simple-search-placeholder=\"Busque por: número do patrimônio ou descrição\"\n                    slot=\"simpleSearch\"\n                    class=\"searchItensCatalogoNovo\"/>\n            </az-toolbar>\n\n            <v-responsive class=\"overflow-y-auto\" max-height=\"70vh\">\n                <v-data-table\n                    v-model=\"movimentacaoInterna.patrimoniosId\"\n                    :headers=\"colunas\"\n                    :items=\"patrimonios\"\n                    ref=\"table\"\n                    :options.sync=\"paginacaoInterna\"\n                    :server-items-length=\"totalItens\"\n                    class=\"pr-tabela-listagem-itens-movimentacao-interna\"\n                    hide-default-footer\n                    item-key=\"patrimonioId\"\n                    show-select\n                    no-data-text=\"Não há patrimônios a serem adicionados\">\n                    <template v-slot:header.data-table-select=\"{ on, props }\">\n                        <v-simple-checkbox :ripple=\"false\" color=\"grey\" v-bind=\"props\" v-on=\"on\" @click=\"selecionaTodosPatrimoniosTodasPaginas(props)\"/>\n                    </template>\n                    <template v-slot:item.data-table-select=\"{ isSelected, item }\">\n                        <v-simple-checkbox :ripple=\"false\" :value=\"isSelected\" @click=\"isSelected ? desselecionarPatrimonio(item): selecionarPatrimonio(item)\"/>\n                    </template>\n                    <template v-slot:header.patrimonioNumero>\n                        <label-personalizado campo=\"numero\" :tela=\"nomeTelaPatrimonio\" apenasNome/>\n                    </template>\n                    <template v-slot:header.patrimonioDescricao>\n                        <label-personalizado campo=\"descricao\" :tela=\"nomeTela\" apenasNome/>\n                    </template>\n                    <template v-slot:item.patrimonioNumero=\"{item}\">\n                        <span class=\"grey--text text--darken-2 text-truncate max-8\">{{item.patrimonioNumero}}</span>\n                    </template>\n                    <template v-slot:item.patrimonioDescricao=\"{item}\">\n                        <v-tooltip top nudge-top=\"\" max-width=\"600\">\n                            <template v-slot:activator=\"{ on }\">\n                                <div v-on=\"on\">\n                                    <span class=\"grey--text text--darken-2 d-inline-block text-truncate max-18\">{{item.patrimonioDescricao | textoSemValor}}</span>\n                                </div>\n                            </template>\n                            {{item.patrimonioDescricao}}\n                        </v-tooltip>\n                    </template>\n                </v-data-table>\n\n                <paginacao class=\"ml-5 mr-5\" :paginacao-interna=\"paginacaoInterna\" :paginas=\"paginas\" @resetaPage=\"resetaPage\"/>\n\n                <v-divider></v-divider>\n                <v-card-actions>\n                    <v-col md=\"12\" sm=\"12\" xl=\"12\" xs=\"12\" class=\"pa-0\">\n                        <acoes-botoes-devolver-parcial-cancelar\n                            :controleContinuar=\"quantidadeSelecionados !== 0\"\n                            :quantidade=\"quantidadeSelecionados\"\n                            @cancelar=\"fecharModal\"\n                            @devolverParcial=\"tratarEventoDevolver\"\n                            class=\"mt-3 pb-3\"/>\n                    </v-col>\n                </v-card-actions>\n            </v-responsive>\n        </v-card>\n    </v-dialog>\n</template>\n\n<script>\n    import LabelPersonalizado from '@/views/components/label/LabelPersonalizado'\n    import Paginacao from '@/views/components/tabela/Paginacao'\n    import {actionTypes, mutationTypes} from '@/core/constants'\n    import {mapMutations, mapActions} from 'vuex'\n    import _ from 'lodash'\n    import AcoesBotoesDevolverParcialCancelar from '@/views/components/acoes/AcoesBotoesDevolverParcialCancelar'\n\n    export default {\n        name: 'ModalDevolverPatrimonios',\n        components: {\n            LabelPersonalizado,\n            Paginacao,\n            AcoesBotoesDevolverParcialCancelar\n        },\n        data() {\n            return {\n                dialog: true,\n                patrimonios: [],\n                movimentacaoInterna: {\n                    id: this.$route.params.movimentacaoInternaId,\n                    patrimoniosId: []\n                },\n                paginas: 0,\n                totalItens: 0,\n                quantidadeSelecionados: 0,\n                filtrosInterno: this.getFiltros(),\n                paginacaoInterna: this.getPaginacao(),\n                filtroAtivo: false,\n                nomeTela: 'MOVIMENTACAO_INTERNA_ITENS',\n                nomeTelaPatrimonio: 'INCORPORACAO_ITEM_LISTAGEM_PATRMONIO'\n            }\n        },\n        computed: {\n            colunas(){\n                return this.criarColunas(2,\n                                         [],\n                                         ['patrimonioNumero','patrimonioDescricao'],\n                                         [false,false],\n                                         ['left','left'],\n                                         ['15%','85%'],\n                                         'gray--text')\n            }\n        },\n        watch: {\n            paginacaoInterna: {\n                handler(novoValor) {\n                    this.tratarEventoPaginar(novoValor)\n                },\n                deep: true,\n            },\n            'movimentacaoInterna.patrimoniosId'(){\n                this.calculaQuantidadePatrimoniosSelecionados()\n            }\n        },\n        mounted() {\n            this.buscar()\n        },\n        methods: {\n            ...mapActions([\n                actionTypes.MOVIMENTACAO_INTERNA.VISUALIZACAO.DEVOLUCAO_ITEM.BUSCAR_TODOS_ITENS_PARA_DEVOLUCAO,\n                actionTypes.MOVIMENTACAO_INTERNA.VISUALIZACAO.DEVOLUCAO_ITEM.DEVOLVER_ITENS_PARCIAL,\n                actionTypes.MOVIMENTACAO_INTERNA.TEMPORARIA.DEVOLVER_TODOS_PATRIMONIOS\n            ]),\n            ...mapMutations([\n                mutationTypes.MOVIMENTACAO_INTERNA.VISUALIZACAO.DEVOLUCAO_ITEM.SET_PAGINACAO_BUSCA_TODOS_ITENS_PARA_DEVOLUCAO,\n                mutationTypes.MOVIMENTACAO_INTERNA.VISUALIZACAO.DEVOLUCAO_ITEM.RESETA_PAGE_BUSCA_TODOS_ITENS_PARA_DEVOLUCAO,\n                mutationTypes.MOVIMENTACAO_INTERNA.VISUALIZACAO.DEVOLUCAO_ITEM.SET_FILTROS_BUSCA_TODOS_ITENS_PARA_DEVOLUCAO\n            ]),\n            getFiltros() {\n                return _.cloneDeep(this.$store.state.movimentacaoInternaVisualizacaoRegistroItem.resultadoBuscaTodosPatrimoniosParaDevolucao.filtros)\n            },\n            getFiltrosInterno() {\n                return _.cloneDeep(this.filtrosInterno)\n            },\n            getPaginacao() {\n                return _.cloneDeep(this.$store.state.movimentacaoInternaVisualizacaoRegistroItem.resultadoBuscaTodosPatrimoniosParaDevolucao.paginacao)\n            },\n            async buscar() {\n                this.setFiltrosBuscaTodosItensParaDevolucao(this.getFiltrosInterno())\n                await this.buscaTodosPatrimonios()\n                this.verificarSeFiltroAtivo()\n            },\n            async buscaTodosPatrimonios() {\n                const resultado = await this.buscarTodosItensParaDevolucao(this.$route.params.movimentacaoInternaId)\n                if (resultado) {\n                    this.patrimonios = resultado.itens\n                    this.paginas = resultado.totalPages\n                    this.totalItens = resultado.totalElements\n                    this.quantidadeItensTodasPaginas = resultado.totalElements\n                    this.selecionaTodosPatrimoniosSeNecessario()\n                }\n            },\n            selecionaTodosPatrimoniosSeNecessario(){\n                if(this.movimentacaoInterna.devolverTodos){\n                    this.movimentacaoInterna.patrimoniosId = this.filtrarPatrimonios(this.patrimonios)\n                }\n            },\n            filtrarPatrimonios(patrimonios) {\n                return patrimonios.filter(patrimonio => {\n                    return !(this.movimentacaoInterna.patrimoniosNaoConsiderar.includes(patrimonio.patrimonioId))\n                })\n            },\n            calculaQuantidadePatrimoniosSelecionados(){\n                if(this.movimentacaoInterna.devolverTodos) {\n                    this.quantidadeSelecionados = (this.quantidadeItensTodasPaginas - this.movimentacaoInterna.patrimoniosNaoConsiderar.length)\n                }else{\n                    this.quantidadeSelecionados = this.movimentacaoInterna.patrimoniosId.length\n                }\n            },\n            async fecharModal() {\n                await this.$router.push({\n                    name: 'VisualizarRegistroMovimentacaoInterna',\n                    params: {movimentacaoInternaId: this.$route.params.movimentacaoInternaId}\n                })\n            },\n            tratarEventoPaginar(paginacao) {\n                this.setPaginacaoBuscaTodosItensParaDevolucao(paginacao)\n                this.resetarPaginacaoSortBy(paginacao)\n                this.buscar()\n            },\n            async tratarEventoDevolver() {\n                const movimentacao = _.cloneDeep(this.movimentacaoInterna)\n                movimentacao.patrimoniosId = this.filtraIdPatrimoniosSelecionados()\n\n                try {\n                    if (movimentacao.devolverTodos) {\n                        await this.devolverTodosPatrimonios(this.movimentacaoInterna.id)\n                    } else {\n                        await this.devolverItensParcial(movimentacao)\n                    }\n                    this.mostrarNotificacaoSucesso('Operação realizada com sucesso')\n                } catch (err) {\n                    this.mostrarNotificacaoErro(err.response.data.message)\n                }\n\n                this.resetaPage()\n                this.buscarInformacoesAtualizadasMovimentacao()\n                await this.redirecionarParaVisualizacaoMovimentacao()\n            },\n            filtraIdPatrimoniosSelecionados() {\n                return this.movimentacaoInterna.patrimoniosId.map(item => item.patrimonioId)\n            },\n            tratarEventoBuscaSimples(valor) {\n                this.resetaPage()\n                this.filtrosInterno.conteudo.value = valor\n                this.filtroAtivo = true\n                this.buscar()\n            },\n            tratarEventoRemoverFiltro(propriedade) {\n                if (this.filtrosInterno[propriedade]) {\n                    this.filtrosInterno[propriedade].value = this.filtrosInterno[propriedade].default\n                }\n                this.filtroAtivo = false\n                this.buscar()\n            },\n            resetarPaginacaoSortBy(paginacao) {\n                if (!paginacao.sortBy[0]) {\n                    this.$store.state.movimentacaoInternaVisualizacaoRegistroItem.resultadoBuscaTodosPatrimoniosParaDevolucao.paginacao.sortBy[0] = paginacao.defaultSortBy\n                }\n            },\n            async redirecionarParaVisualizacaoMovimentacao() {\n                await this.$router.push({\n                    name: 'VisualizarRegistroMovimentacaoInterna',\n                    params: {movimentacaoInternaId: this.$route.params.movimentacaoInternaId}\n                })\n            },\n            resetaPage() {\n                this.resetaPageBuscaTodosItensParaDevolucao()\n            },\n            resetarPatrimoniosExcecao() {\n                this.movimentacaoInterna.patrimoniosNaoConsiderar = []\n            },\n            selecionaTodosPatrimoniosTodasPaginas(props) {\n                if (props.value || this.filtroAtivo) {\n                    this.movimentacaoInterna.devolverTodos = false\n                    this.resetarPatrimoniosExcecao()\n                } else {\n                    this.movimentacaoInterna.devolverTodos = true\n                    this.resetarPatrimoniosExcecao()\n                }\n            },\n            selecionarPatrimonio(item) {\n                if (this.movimentacaoInterna.devolverTodos) {\n                    this.movimentacaoInterna.patrimoniosNaoConsiderar = this.movimentacaoInterna.patrimoniosNaoConsiderar.filter(patrimonio => patrimonio !== item.patrimonioId)\n                }\n                this.movimentacaoInterna.patrimoniosId.push(item)\n            },\n            desselecionarPatrimonio(item) {\n                if (this.movimentacaoInterna.devolverTodos) {\n                    this.movimentacaoInterna.devolverTodos = false\n                    this.movimentacaoInterna.patrimoniosNaoConsiderar.push(item.patrimonioId)\n                }\n                this.movimentacaoInterna.patrimoniosId = this.movimentacaoInterna.patrimoniosId.filter(patrimonio => patrimonio.patrimonioId !== item.patrimonioId)\n            },\n            buscarInformacoesAtualizadasMovimentacao() {\n                this.$emit('buscarInformacoesAtualizadasMovimentacao')\n            },\n            verificarSeFiltroAtivo() {\n                this.filtroAtivo = !!this.filtrosInterno.conteudo.value\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"stylus\">\n.max-18\n    max-width 420px\n\n.search-listagem-patrimonios-devolucao .input-search\n    background-color #fff !important\n    width 30vw !important\n\n    span\n        max-width 350px\n\n    .v-chip__content\n        width 100%\n\n        span\n            white-space nowrap\n            overflow hidden\n            text-overflow ellipsis\n\n@media (max-width 1250px)\n    .search-listagem-patrimonios-devolucao .input-search\n        span\n            max-width 230px\n\n@media (max-width 720px)\n    .search-listagem-patrimonios-devolucao .input-search\n        background-color #fff !important\n        width 50vw !important\n\n        span\n            max-width 210px\n\n.search-listagem-patrimonios-devolucao\n    display flex\n    align-items center\n    justify-content center\n    background-color white !important\n\n>>>\n.pr-tabela-listagem-itens-movimentacao-interna\n    th\n        font-size 13px !important\n        font-weight bold\n        color #666666 !important\n\n    tr.v-data-table__selected\n        background white !important\n\n    tr.v-data-table__selected td .v-icon\n        color grey !important\n</style>\n"],"sourceRoot":"src/views/components/modal/movimentacao-interna/visualizacaoRegistro/devolucao"}]}