{"remainingRequest":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/babel-loader/lib/index.js!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/@azinformatica/loki/src/components/viewer/AzPdfDocumentViewer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/@azinformatica/loki/src/components/viewer/AzPdfDocumentViewer.vue","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Toolbar from './Toolbar';\nimport LoadingPlaceHolder from './LoadingPlaceHolder';\nimport LoadingPrint from './LoadingPrint';\nimport PrintService from './PrintService';\nimport PDFJSLib from 'pdfjs-dist/build/pdf';\nimport { PDFJS as PDFJSViewer } from 'pdfjs-dist/web/pdf_viewer.js';\nexport default {\n  components: {\n    Toolbar: Toolbar,\n    LoadingPlaceHolder: LoadingPlaceHolder,\n    LoadingPrint: LoadingPrint\n  },\n  mounted: function mounted() {\n    this.start();\n    window.addEventListener('resize', this.updateScaleType);\n  },\n  destroyed: function destroyed() {\n    window.removeEventListener('resize', this.updateScaleType);\n  },\n  watch: {\n    src: function src() {\n      this.start();\n    }\n  },\n  methods: {\n    start: function start() {\n      this.startLoadingPlaceHolderIfNecessary();\n      this.getPdfContainer();\n      this.createEventBus();\n      this.createPdfLinkService();\n      this.createPdfViewer();\n      this.renderDocument();\n    },\n    getPdfContainer: function getPdfContainer() {\n      this.pdf.container = document.querySelector('#az-pdf-viewer');\n    },\n    createEventBus: function createEventBus() {\n      var eventBus = new PDFJSViewer.EventBus();\n      eventBus.on('pagesinit', this.pagesInitEventHandler);\n      eventBus.on('scalechange', this.scaleChangeEventHandler);\n      eventBus.on('pagechange', this.pageChangeEventHandler);\n      this.pdf.eventBus = eventBus;\n    },\n    pagesInitEventHandler: function pagesInitEventHandler(e) {\n      this.setInitialPagination(e.source);\n      this.updateScaleType();\n      this.setInitialScale(e.source);\n    },\n    scaleChangeEventHandler: function scaleChangeEventHandler(e) {\n      this.scale.current = e.scale;\n      if (e.presetValue) this.scale.type = e.presetValue;\n    },\n    pageChangeEventHandler: function pageChangeEventHandler(e) {\n      this.pagination.current = e.pageNumber;\n    },\n    createPdfLinkService: function createPdfLinkService() {\n      this.pdf.linkService = new PDFJSViewer.PDFLinkService({\n        eventBus: this.pdf.eventBus\n      });\n    },\n    createPdfViewer: function createPdfViewer() {\n      this.pdf.viewer = new PDFJSViewer.PDFViewer({\n        container: this.pdf.container,\n        eventBus: this.pdf.eventBus,\n        linkService: this.pdf.linkService\n      });\n    },\n    renderDocument: function renderDocument() {\n      var _this = this;\n\n      if (!this.src) return this.stopLoadingPlaceHolder();\n      PDFJSLib.getDocument({\n        url: this.src,\n        httpHeaders: this.httpHeader,\n        withCredentials: true\n      }).then(function (pdf) {\n        _this.pdf.linkService.setViewer(_this.pdf.viewer);\n\n        _this.pdf.linkService.setDocument(pdf, null);\n\n        _this.pdf.viewer.setDocument(pdf);\n\n        _this.stopLoadingPlaceHolder();\n      }).catch(function (error) {\n        _this.stopLoadingPlaceHolder();\n\n        _this.handlePdfError(error);\n      });\n    },\n    createPrinterService: function () {\n      var _createPrinterService = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.t0 = PrintService;\n                _context.t1 = this.pdf.viewer.pdfDocument;\n                _context.next = 4;\n                return this.pdf.viewer.getPagesOverview();\n\n              case 4:\n                _context.t2 = _context.sent;\n                _context.t3 = {\n                  pdfDocument: _context.t1,\n                  pagesOverview: _context.t2\n                };\n                this.pdf.printService = new _context.t0(_context.t3);\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function createPrinterService() {\n        return _createPrinterService.apply(this, arguments);\n      }\n\n      return createPrinterService;\n    }(),\n    setInitialPagination: function setInitialPagination(pagination) {\n      this.pagination.current = pagination.currentPageNumber;\n      this.pagination.total = pagination.pagesCount;\n    },\n    updateScaleType: function updateScaleType(scaleType) {\n      if (scaleType && typeof scaleType === 'string') {\n        this.pdf.viewer.currentScaleValue = scaleType;\n      } else {\n        if (this.defaultScaleType && typeof this.defaultScaleType === 'string') {\n          this.pdf.viewer.currentScaleValue = this.defaultScaleType;\n        } else if (this.isSmallScreen()) {\n          this.pdf.viewer.currentScaleValue = 'page-width';\n        } else {\n          this.pdf.viewer.currentScaleValue = 'page-fit';\n        }\n      }\n    },\n    setInitialScale: function setInitialScale(scale) {\n      this.scale.current = scale.currentScale;\n      this.scale.default = scale.currentScale;\n      this.scale.type = scale.currentScaleValue;\n    },\n    isSmallScreen: function isSmallScreen() {\n      return this.pdf.container.clientWidth <= 700;\n    },\n    handlePdfError: function handlePdfError(error) {\n      if (error.name === 'InvalidPDFException') {\n        throw new Error('URL do documento inválida.');\n      } else if (error.name === 'MissingPDFException') {\n        throw new Error(error.message.replace('Missing PDF', 'Documento não encontrado em'));\n      } else if (error.status === 401) {\n        throw new Error('Não autorizado, verifique seu token de acesso.');\n      }\n    },\n    changeScaleType: function changeScaleType() {\n      if (this.scale.type === 'page-fit') {\n        this.updateScaleType('page-width');\n      } else {\n        this.updateScaleType('page-fit');\n      }\n    },\n    zoomIn: function zoomIn() {\n      this.pdf.viewer.currentScale = this.scale.current * 1.1;\n    },\n    zoomOut: function zoomOut() {\n      if (this.scale.current > 0.2) {\n        this.pdf.viewer.currentScale = this.scale.current / 1.1;\n      }\n    },\n    rotate: function rotate() {\n      this.pdf.viewer.pagesRotation = (this.pdf.viewer.pagesRotation + 90) % 360;\n    },\n    download: function download() {\n      this.$emit('download');\n    },\n    print: function () {\n      var _print = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.startLoadingPrint();\n                _context2.next = 3;\n                return this.createPrinterService();\n\n              case 3:\n                this.pdf.printService.prepareLayout();\n                _context2.next = 6;\n                return this.pdf.printService.renderPages(function (currentPage, pageCount) {\n                  _this2.printProgress = currentPage / pageCount * 100;\n                });\n\n              case 6:\n                window.print();\n                this.pdf.printService.destroy();\n                this.stopLoadingPrint();\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function print() {\n        return _print.apply(this, arguments);\n      }\n\n      return print;\n    }(),\n    cancelPrint: function cancelPrint() {\n      this.pdf.printService.destroy();\n      this.stopLoadingPrint();\n    },\n    startLoadingPlaceHolderIfNecessary: function startLoadingPlaceHolderIfNecessary() {\n      this.loadingPlaceHolder = this.progressBar;\n    },\n    stopLoadingPlaceHolder: function stopLoadingPlaceHolder() {\n      this.loadingPlaceHolder = false;\n    },\n    startLoadingPrint: function startLoadingPrint() {\n      this.isPrinting = true;\n    },\n    stopLoadingPrint: function stopLoadingPrint() {\n      this.isPrinting = false;\n    }\n  },\n  props: {\n    src: {\n      type: String,\n      default: ''\n    },\n    cssClass: {\n      type: String,\n      default: ''\n    },\n    height: {\n      type: String,\n      default: '100vh'\n    },\n    httpHeader: {\n      type: Object,\n      default: function _default() {\n        return new Object();\n      }\n    },\n    progressBar: {\n      type: Boolean,\n      default: false\n    },\n    downloadButton: {\n      type: Boolean,\n      default: false\n    },\n    defaultScaleType: {\n      type: String,\n      default: ''\n    },\n    rotateButton: {\n      type: Boolean,\n      default: false\n    },\n    printButton: {\n      type: Boolean,\n      default: false\n    }\n  },\n  computed: {\n    customContainerClass: function customContainerClass() {\n      var classObject = {};\n\n      if (this.cssClass) {\n        var classes = this.cssClass.split(' ');\n        classes.forEach(function (clazz) {\n          return classObject[clazz] = true;\n        });\n      }\n\n      return classObject;\n    }\n  },\n  data: function data() {\n    return {\n      isPrinting: false,\n      loadingPlaceHolder: false,\n      pagination: {\n        current: null,\n        total: null\n      },\n      pdf: {\n        container: null,\n        eventBus: null,\n        linkService: null,\n        printService: null,\n        viewer: {}\n      },\n      printProgress: 0,\n      scale: {\n        default: null,\n        current: null,\n        type: ''\n      }\n    };\n  }\n};",{"version":3,"sources":["AzPdfDocumentViewer.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"az-pdf-container\" :class=\"customContainerClass\" :style=\"{ height: height }\">\n        <Toolbar\n            :disableButtons=\"!src\"\n            :downloadButton=\"downloadButton\"\n            :pagination=\"pagination\"\n            :printButton=\"printButton\"\n            :rotateButton=\"rotateButton\"\n            :scaleType=\"scale.type\"\n            @changeScaleType=\"changeScaleType\"\n            @zoomIn=\"zoomIn\"\n            @zoomOut=\"zoomOut\"\n            @rotate=\"rotate\"\n            @download=\"download\"\n            @print=\"print\"\n            v-show=\"!loadingPlaceHolder\"\n        />\n        <div\n            id=\"az-pdf-viewer\"\n            class=\"Viewer\"\n            :style=\"{ height: `calc(${height} - 62px)` }\"\n            v-show=\"!loadingPlaceHolder\"\n        >\n            <div class=\"pdfViewer\"></div>\n        </div>\n        <LoadingPlaceHolder :loading=\"loadingPlaceHolder\" />\n        <LoadingPrint :isPrinting=\"isPrinting\" :printProgress=\"printProgress\" @cancel=\"cancelPrint\" />\n    </div>\n</template>\n\n<script>\nimport Toolbar from './Toolbar'\nimport LoadingPlaceHolder from './LoadingPlaceHolder'\nimport LoadingPrint from './LoadingPrint'\nimport PrintService from './PrintService'\nimport PDFJSLib from 'pdfjs-dist/build/pdf'\nimport { PDFJS as PDFJSViewer } from 'pdfjs-dist/web/pdf_viewer.js'\nexport default {\n    components: {\n        Toolbar,\n        LoadingPlaceHolder,\n        LoadingPrint\n    },\n    mounted() {\n        this.start()\n        window.addEventListener('resize', this.updateScaleType)\n    },\n    destroyed() {\n        window.removeEventListener('resize', this.updateScaleType)\n    },\n    watch: {\n        src() {\n            this.start()\n        }\n    },\n    methods: {\n        start() {\n            this.startLoadingPlaceHolderIfNecessary()\n            this.getPdfContainer()\n            this.createEventBus()\n            this.createPdfLinkService()\n            this.createPdfViewer()\n            this.renderDocument()\n        },\n        getPdfContainer() {\n            this.pdf.container = document.querySelector('#az-pdf-viewer')\n        },\n        createEventBus() {\n            const eventBus = new PDFJSViewer.EventBus()\n            eventBus.on('pagesinit', this.pagesInitEventHandler)\n            eventBus.on('scalechange', this.scaleChangeEventHandler)\n            eventBus.on('pagechange', this.pageChangeEventHandler)\n            this.pdf.eventBus = eventBus\n        },\n        pagesInitEventHandler(e) {\n            this.setInitialPagination(e.source)\n            this.updateScaleType()\n            this.setInitialScale(e.source)\n        },\n        scaleChangeEventHandler(e) {\n            this.scale.current = e.scale\n            if (e.presetValue) this.scale.type = e.presetValue\n        },\n        pageChangeEventHandler(e) {\n            this.pagination.current = e.pageNumber\n        },\n        createPdfLinkService() {\n            this.pdf.linkService = new PDFJSViewer.PDFLinkService({\n                eventBus: this.pdf.eventBus\n            })\n        },\n        createPdfViewer() {\n            this.pdf.viewer = new PDFJSViewer.PDFViewer({\n                container: this.pdf.container,\n                eventBus: this.pdf.eventBus,\n                linkService: this.pdf.linkService\n            })\n        },\n        renderDocument() {\n            if (!this.src) return this.stopLoadingPlaceHolder()\n            PDFJSLib.getDocument({\n                url: this.src,\n                httpHeaders: this.httpHeader,\n                withCredentials: true\n            })\n                .then(pdf => {\n                    this.pdf.linkService.setViewer(this.pdf.viewer)\n                    this.pdf.linkService.setDocument(pdf, null)\n                    this.pdf.viewer.setDocument(pdf)\n                    this.stopLoadingPlaceHolder()\n                })\n                .catch(error => {\n                    this.stopLoadingPlaceHolder()\n                    this.handlePdfError(error)\n                })\n        },\n        async createPrinterService() {\n            this.pdf.printService = new PrintService({\n                pdfDocument: this.pdf.viewer.pdfDocument,\n                pagesOverview: await this.pdf.viewer.getPagesOverview()\n            })\n        },\n        setInitialPagination(pagination) {\n            this.pagination.current = pagination.currentPageNumber\n            this.pagination.total = pagination.pagesCount\n        },\n        updateScaleType(scaleType) {\n            if (scaleType && typeof scaleType === 'string') {\n                this.pdf.viewer.currentScaleValue = scaleType\n            } else {\n                if (this.defaultScaleType && typeof this.defaultScaleType === 'string') {\n                    this.pdf.viewer.currentScaleValue = this.defaultScaleType\n                } else if (this.isSmallScreen()) {\n                    this.pdf.viewer.currentScaleValue = 'page-width'\n                } else {\n                    this.pdf.viewer.currentScaleValue = 'page-fit'\n                }\n            }\n        },\n        setInitialScale(scale) {\n            this.scale.current = scale.currentScale\n            this.scale.default = scale.currentScale\n            this.scale.type = scale.currentScaleValue\n        },\n        isSmallScreen() {\n            return this.pdf.container.clientWidth <= 700\n        },\n        handlePdfError(error) {\n            if (error.name === 'InvalidPDFException') {\n                throw new Error('URL do documento inválida.')\n            } else if (error.name === 'MissingPDFException') {\n                throw new Error(error.message.replace('Missing PDF', 'Documento não encontrado em'))\n            } else if (error.status === 401) {\n                throw new Error('Não autorizado, verifique seu token de acesso.')\n            }\n        },\n        changeScaleType() {\n            if (this.scale.type === 'page-fit') {\n                this.updateScaleType('page-width')\n            } else {\n                this.updateScaleType('page-fit')\n            }\n        },\n        zoomIn() {\n            this.pdf.viewer.currentScale = this.scale.current * 1.1\n        },\n        zoomOut() {\n            if (this.scale.current > 0.2) {\n                this.pdf.viewer.currentScale = this.scale.current / 1.1\n            }\n        },\n        rotate() {\n            this.pdf.viewer.pagesRotation = (this.pdf.viewer.pagesRotation + 90) % 360\n        },\n        download() {\n            this.$emit('download')\n        },\n        async print() {\n            this.startLoadingPrint()\n\n            await this.createPrinterService()\n            this.pdf.printService.prepareLayout()\n            await this.pdf.printService.renderPages((currentPage, pageCount) => {\n                this.printProgress = (currentPage / pageCount) * 100\n            })\n            window.print()\n            this.pdf.printService.destroy()\n\n            this.stopLoadingPrint()\n        },\n        cancelPrint() {\n            this.pdf.printService.destroy()\n            this.stopLoadingPrint()\n        },\n        startLoadingPlaceHolderIfNecessary() {\n            this.loadingPlaceHolder = this.progressBar\n        },\n        stopLoadingPlaceHolder() {\n            this.loadingPlaceHolder = false\n        },\n        startLoadingPrint() {\n            this.isPrinting = true\n        },\n        stopLoadingPrint() {\n            this.isPrinting = false\n        }\n    },\n    props: {\n        src: {\n            type: String,\n            default: ''\n        },\n        cssClass: {\n            type: String,\n            default: ''\n        },\n        height: {\n            type: String,\n            default: '100vh'\n        },\n        httpHeader: {\n            type: Object,\n            default: () => new Object()\n        },\n        progressBar: {\n            type: Boolean,\n            default: false\n        },\n        downloadButton: {\n            type: Boolean,\n            default: false\n        },\n        defaultScaleType: {\n            type: String,\n            default: ''\n        },\n        rotateButton: {\n            type: Boolean,\n            default: false\n        },\n        printButton: {\n            type: Boolean,\n            default: false\n        }\n    },\n    computed: {\n        customContainerClass() {\n            let classObject = {}\n            if (this.cssClass) {\n                const classes = this.cssClass.split(' ')\n                classes.forEach(clazz => (classObject[clazz] = true))\n            }\n            return classObject\n        }\n    },\n    data: () => ({\n        isPrinting: false,\n        loadingPlaceHolder: false,\n        pagination: {\n            current: null,\n            total: null\n        },\n        pdf: {\n            container: null,\n            eventBus: null,\n            linkService: null,\n            printService: null,\n            viewer: {}\n        },\n        printProgress: 0,\n        scale: {\n            default: null,\n            current: null,\n            type: ''\n        }\n    })\n}\n</script>\n\n<style src=\"pdfjs-dist/web/pdf_viewer.css\"></style>\n\n<style lang=\"stylus\">\n.az-pdf-container\n    background-color #e4e4e4\n\n    .Viewer\n        width 100%\n        position relative\n        overflow scroll\n        background-color #e4e4e4\n\n        .page\n            margin 15px auto\n            border none\n            border-image none\n\n            .canvasWrapper\n                -webkit-box-shadow 0 3px 6px -1px rgba(0, 0, 0, .2)\n                box-shadow 0 3px 6px -1px rgba(0, 0, 0, .2)\n\n@media print\n    body[data-pdf-printing] #app\n        display none\n\n    body[data-pdf-printing] #print-container\n        display block\n\n        img\n            display block\n            width 100%\n            height 100%\n\n    body[data-pdf-printing] #print-container:first-child\n        position relative\n        top 0\n        left 0\n        width 1px\n        height 1px\n        overflow visible\n        page-break-after always\n        page-break-inside avoid\n\n    body[data-pdf-printing] #print-container div\n        page-break-after always\n        page-break-inside avoid\n</style>\n"],"sourceRoot":"node_modules/@azinformatica/loki/src/components/viewer"}]}