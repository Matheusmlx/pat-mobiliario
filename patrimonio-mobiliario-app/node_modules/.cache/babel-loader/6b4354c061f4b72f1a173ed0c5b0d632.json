{"remainingRequest":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/babel-loader/lib/index.js!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/components/documento/Documentos.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/components/documento/Documentos.vue","mtime":1616610237013},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/@babel/runtime/regenerator\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport DocumentosVazio from './DocumentosVazio';\nimport DocumentosItem from './DocumentosItem';\nexport default {\n  data: function data() {\n    return {\n      documentos: [],\n      tiposDocumento: [],\n      documentoVazio: true\n    };\n  },\n  components: {\n    DocumentosItem: DocumentosItem,\n    DocumentosVazio: DocumentosVazio\n  },\n  props: {\n    permissaoEdicao: {\n      type: Boolean,\n      required: true\n    },\n    configBotaoRemover: {\n      type: Object\n    },\n    donoDocumento: {\n      type: String,\n      required: true\n    },\n    donoDocumentoId: {\n      type: Number,\n      required: true\n    },\n    actions: {\n      type: Object,\n      required: true\n    },\n    mutations: {\n      type: Object,\n      required: true\n    }\n  },\n  mounted: function () {\n    var _mounted = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.buscarTipoDocumentos();\n\n            case 2:\n              _context.next = 4;\n              return this.buscarDocumentosDono();\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function mounted() {\n      return _mounted.apply(this, arguments);\n    }\n\n    return mounted;\n  }(),\n  methods: {\n    buscarTipoDocumento: function () {\n      var _buscarTipoDocumento = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.$store.dispatch(this.actions.buscarTipoDocumento);\n\n              case 2:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function buscarTipoDocumento() {\n        return _buscarTipoDocumento.apply(this, arguments);\n      }\n\n      return buscarTipoDocumento;\n    }(),\n    buscarDocumentos: function () {\n      var _buscarDocumentos = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(donoDocumentoId) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.$store.dispatch(this.actions.buscarDocumentos, donoDocumentoId);\n\n              case 2:\n                return _context3.abrupt(\"return\", _context3.sent);\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function buscarDocumentos(_x) {\n        return _buscarDocumentos.apply(this, arguments);\n      }\n\n      return buscarDocumentos;\n    }(),\n    cadastrarDocumento: function () {\n      var _cadastrarDocumento = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(doc) {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.$store.dispatch(this.actions.cadastrarDocumento, doc);\n\n              case 2:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function cadastrarDocumento(_x2) {\n        return _cadastrarDocumento.apply(this, arguments);\n      }\n\n      return cadastrarDocumento;\n    }(),\n    atualizarDocumento: function () {\n      var _atualizarDocumento = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(doc) {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.$store.dispatch(this.actions.atualizarDocumento, doc);\n\n              case 2:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function atualizarDocumento(_x3) {\n        return _atualizarDocumento.apply(this, arguments);\n      }\n\n      return atualizarDocumento;\n    }(),\n    enviarDocumento: function () {\n      var _enviarDocumento = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(doc) {\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return this.$store.dispatch(this.actions.enviarDocumento, doc);\n\n              case 2:\n                return _context6.abrupt(\"return\", _context6.sent);\n\n              case 3:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function enviarDocumento(_x4) {\n        return _enviarDocumento.apply(this, arguments);\n      }\n\n      return enviarDocumento;\n    }(),\n    deletarDocumento: function () {\n      var _deletarDocumento = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(doc) {\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return this.$store.dispatch(this.actions.deletarDocumento, doc);\n\n              case 2:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function deletarDocumento(_x5) {\n        return _deletarDocumento.apply(this, arguments);\n      }\n\n      return deletarDocumento;\n    }(),\n    removerDocumentos: function () {\n      var _removerDocumentos = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(doc) {\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.next = 2;\n                return this.$store.commit(this.mutations.removerDocumentos, doc);\n\n              case 2:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function removerDocumentos(_x6) {\n        return _removerDocumentos.apply(this, arguments);\n      }\n\n      return removerDocumentos;\n    }(),\n    tratarEventoSalvarUri: function () {\n      var _tratarEventoSalvarUri = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(documento, index) {\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                this.desabilitarLoadingGlobal();\n\n                if (!documento.uriAnexo) {\n                  _context9.next = 5;\n                  break;\n                }\n\n                _context9.next = 4;\n                return this.enviarDocumento(documento);\n\n              case 4:\n                this.documentos[index].uriAnexo = _context9.sent;\n\n              case 5:\n                this.habilitarLoadingGlobal();\n\n              case 6:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function tratarEventoSalvarUri(_x7, _x8) {\n        return _tratarEventoSalvarUri.apply(this, arguments);\n      }\n\n      return tratarEventoSalvarUri;\n    }(),\n    novoDocumento: function () {\n      var _novoDocumento = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n        var _this$documentos$push;\n\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                if (this.quantidadeDeDocumentosExcedida()) {\n                  this.mostrarNotificacaoErro('A quantidade máxima de documentos cadastrados foi atingida.');\n                } else {\n                  if (this.validarCadastrosFinalizados()) {\n                    this.documentos.push((_this$documentos$push = {}, _defineProperty(_this$documentos$push, this.donoDocumento, this.donoDocumentoId), _defineProperty(_this$documentos$push, \"numero\", null), _defineProperty(_this$documentos$push, \"valor\", null), _defineProperty(_this$documentos$push, \"tipo\", null), _defineProperty(_this$documentos$push, \"data\", null), _defineProperty(_this$documentos$push, \"uriAnexo\", null), _this$documentos$push));\n                    this.documentoVazio = false;\n                  } else {\n                    this.mostrarNotificacaoAviso('Finalize o cadastro para cadastrar novos documentos');\n                  }\n                }\n\n              case 1:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function novoDocumento() {\n        return _novoDocumento.apply(this, arguments);\n      }\n\n      return novoDocumento;\n    }(),\n    quantidadeDeDocumentosExcedida: function quantidadeDeDocumentosExcedida() {\n      return this.documentos.length === 30;\n    },\n    validarCadastrosFinalizados: function validarCadastrosFinalizados() {\n      return this.documentoVazio;\n    },\n    tratarEventoRemoverDocumento: function () {\n      var _tratarEventoRemoverDocumento = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(documento) {\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                if (!(typeof documento.numero != 'undefined' && typeof documento.id != 'undefined')) {\n                  _context11.next = 5;\n                  break;\n                }\n\n                _context11.next = 3;\n                return this.deletarDocumento(documento);\n\n              case 3:\n                _context11.next = 7;\n                break;\n\n              case 5:\n                this.removerDocumentos(documento);\n                this.documentoVazio = true;\n\n              case 7:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function tratarEventoRemoverDocumento(_x9) {\n        return _tratarEventoRemoverDocumento.apply(this, arguments);\n      }\n\n      return tratarEventoRemoverDocumento;\n    }(),\n    buscarTipoDocumentos: function () {\n      var _buscarTipoDocumentos = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12() {\n        var resultado;\n        return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                _context12.next = 2;\n                return this.buscarTipoDocumento();\n\n              case 2:\n                resultado = _context12.sent;\n\n                if (resultado) {\n                  this.tiposDocumento = this.ordenaTipoDocumentos(resultado);\n                }\n\n              case 4:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function buscarTipoDocumentos() {\n        return _buscarTipoDocumentos.apply(this, arguments);\n      }\n\n      return buscarTipoDocumentos;\n    }(),\n    ordenaTipoDocumentos: function ordenaTipoDocumentos(resultado) {\n      return resultado.sort(function (a, b) {\n        if (a.descricao < b.descricao) {\n          return -1;\n        } else if (a.descricao > b.descricao) {\n          return 1;\n        } else {\n          return 0;\n        }\n      });\n    },\n    buscarDocumentosDono: function () {\n      var _buscarDocumentosDono = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13() {\n        return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                _context13.next = 2;\n                return this.buscarDocumentos(this.donoDocumentoId);\n\n              case 2:\n                this.documentos = _context13.sent;\n\n              case 3:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n\n      function buscarDocumentosDono() {\n        return _buscarDocumentosDono.apply(this, arguments);\n      }\n\n      return buscarDocumentosDono;\n    }(),\n    tratarEventoSalvar: function () {\n      var _tratarEventoSalvar = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14(documento) {\n        return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                this.desabilitarLoadingGlobal();\n\n                if (documento.valor === 0) {\n                  documento.valor = null;\n                }\n\n                if (!(typeof documento.id == 'undefined')) {\n                  _context14.next = 9;\n                  break;\n                }\n\n                _context14.next = 5;\n                return this.cadastrarDocumento(documento);\n\n              case 5:\n                this.documentoVazio = true;\n                this.buscarDocumentosDono();\n                _context14.next = 12;\n                break;\n\n              case 9:\n                _context14.next = 11;\n                return this.atualizarDocumento(documento);\n\n              case 11:\n                this.documentoVazio = true;\n\n              case 12:\n                this.habilitarLoadingGlobal();\n\n              case 13:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14, this);\n      }));\n\n      function tratarEventoSalvar(_x10) {\n        return _tratarEventoSalvar.apply(this, arguments);\n      }\n\n      return tratarEventoSalvar;\n    }()\n  }\n};",{"version":3,"sources":["Documentos.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <v-container fluid>\n        <documentos-vazio\n            v-if=\"documentos.length === 0\"\n            @novoDocumento=\"novoDocumento\"/>\n\n        <div v-else class=\"incorporacao-documentos pt-5\">\n            <div class=\"d-flex pr-5 justify-end\">\n                <v-btn\n                    :disabled=\"!permissaoEdicao\"\n                    color=\"primary\"\n                    depressed\n                    @click=\"novoDocumento\">\n                    Novo\n                </v-btn>\n            </div>\n            <div :key=\"documento.id\" v-for=\"(documento, index) in documentos\">\n                <documentos-item\n                    v-model=\"documentos[index]\"\n                    :tipoDocumento=\"tiposDocumento\"\n                    :index=\"index\"\n                    :permissao-edicao=\"permissaoEdicao\"\n                    :config-botao-remover=\"configBotaoRemover\"\n                    class=\"ml-9\"\n                    @removerDocumento=\"tratarEventoRemoverDocumento\"\n                    @salvar=\"tratarEventoSalvar\"\n                    @salvarUri=\"tratarEventoSalvarUri(documentos[index],index)\"/>\n            </div>\n        </div>\n    </v-container>\n</template>\n\n<script>\n    import DocumentosVazio from './DocumentosVazio'\n    import DocumentosItem from './DocumentosItem'\n\n    export default {\n        data() {\n            return {\n                documentos: [],\n                tiposDocumento: [],\n                documentoVazio: true\n            }\n        },\n        components: {DocumentosItem, DocumentosVazio},\n        props: {\n            permissaoEdicao: {\n                type: Boolean,\n                required: true\n            },\n            configBotaoRemover: {\n                type: Object\n            },\n            donoDocumento: {\n                type: String,\n                required: true\n            },\n            donoDocumentoId: {\n                type: Number,\n                required: true\n            },\n            actions: {\n                type: Object,\n                required: true\n            },\n            mutations: {\n                type: Object,\n                required: true\n            }\n        },\n        async mounted() {\n            await this.buscarTipoDocumentos()\n            await this.buscarDocumentosDono()\n        },\n        methods: {\n            async buscarTipoDocumento() {\n                return await this.$store.dispatch(this.actions.buscarTipoDocumento)\n            },\n            async buscarDocumentos(donoDocumentoId) {\n                return await this.$store.dispatch(this.actions.buscarDocumentos, donoDocumentoId)\n            },\n            async cadastrarDocumento(doc) {\n                await this.$store.dispatch(this.actions.cadastrarDocumento, doc)\n            },\n            async atualizarDocumento(doc) {\n                await this.$store.dispatch(this.actions.atualizarDocumento, doc)\n            },\n            async enviarDocumento(doc) {\n                return await this.$store.dispatch(this.actions.enviarDocumento, doc)\n            },\n            async deletarDocumento(doc) {\n                await this.$store.dispatch(this.actions.deletarDocumento, doc)\n            },\n            async removerDocumentos(doc) {\n                await this.$store.commit(this.mutations.removerDocumentos, doc)\n            },\n            async tratarEventoSalvarUri(documento, index) {\n                this.desabilitarLoadingGlobal()\n                if (documento.uriAnexo) {\n                    this.documentos[index].uriAnexo = await this.enviarDocumento(documento)\n                }\n                this.habilitarLoadingGlobal()\n            },\n            async novoDocumento() {\n                if (this.quantidadeDeDocumentosExcedida()) {\n                    this.mostrarNotificacaoErro('A quantidade máxima de documentos cadastrados foi atingida.')\n                } else {\n                    if (this.validarCadastrosFinalizados()) {\n                        this.documentos.push({\n                            [this.donoDocumento]: this.donoDocumentoId,\n                            numero: null,\n                            valor: null,\n                            tipo: null,\n                            data: null,\n                            uriAnexo: null\n                        })\n                        this.documentoVazio = false\n                    } else {\n                        this.mostrarNotificacaoAviso('Finalize o cadastro para cadastrar novos documentos')\n                    }\n                }\n            },\n            quantidadeDeDocumentosExcedida() {\n                return this.documentos.length === 30\n            },\n            validarCadastrosFinalizados() {\n                return this.documentoVazio\n            },\n            async tratarEventoRemoverDocumento(documento) {\n                if (typeof documento.numero != 'undefined' && typeof documento.id != 'undefined') {\n                    await this.deletarDocumento(documento)\n                } else {\n                    this.removerDocumentos(documento)\n                    this.documentoVazio = true\n                }\n            },\n            async buscarTipoDocumentos() {\n                const resultado = await this.buscarTipoDocumento()\n                if (resultado) {\n                    this.tiposDocumento = this.ordenaTipoDocumentos(resultado)\n                }\n            },\n            ordenaTipoDocumentos(resultado) {\n                return resultado.sort(function (a, b) {\n                    if (a.descricao < b.descricao) {\n                        return -1\n                    } else if (a.descricao > b.descricao) {\n                        return 1\n                    } else {\n                        return 0\n                    }\n                })\n            },\n            async buscarDocumentosDono() {\n                this.documentos = await this.buscarDocumentos(this.donoDocumentoId)\n            },\n            async tratarEventoSalvar(documento) {\n                this.desabilitarLoadingGlobal()\n                if (documento.valor === 0) {\n                    documento.valor = null\n                }\n                if (typeof documento.id == 'undefined') {\n                    await this.cadastrarDocumento(documento)\n                    this.documentoVazio = true\n                    this.buscarDocumentosDono()\n                } else {\n                    await this.atualizarDocumento(documento)\n                    this.documentoVazio = true\n                }\n                this.habilitarLoadingGlobal()\n            },\n        }\n    }\n</script>\n\n<style lang=\"stylus\" scoped>\n    .incorporacao-documentos\n        min-height 62vh\n\n</style>\n\n\n"],"sourceRoot":"src/views/components/documento"}]}