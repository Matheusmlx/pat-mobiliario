{"remainingRequest":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/babel-loader/lib/index.js!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/components/modal/incorporacao/adicionaritem/ModalIncorporacaoItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/components/modal/incorporacao/adicionaritem/ModalIncorporacaoItem.vue","mtime":1617132782269},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ModalIncorporacaoAcoes from './ModalIncorporacaoAcoes';\nimport { actionTypes, mutationTypes } from '@/core/constants';\nimport { mapActions, mapMutations, createNamespacedHelpers } from 'vuex';\nimport AzHasPermissions from '@azinformatica/loki/src/utils/AzHasPermissions';\n\nvar _createNamespacedHelp = createNamespacedHelpers('rotulosPersonalizados'),\n    mapGetters = _createNamespacedHelp.mapGetters;\n\nexport default {\n  name: 'ModalIncorporacaoItem',\n  components: {\n    ModalIncorporacaoAcoes: ModalIncorporacaoAcoes\n  },\n  data: function data() {\n    return {\n      exibeModal: true,\n      etapa: '',\n      descricaoEtapa: '',\n      continuar: false,\n      incorporacaoItem: {},\n      incorporacaoId: null,\n      itemIncorporacaoId: null,\n      manteveItemCatalogo: true\n    };\n  },\n  mounted: function () {\n    var _mounted = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.buscaItemIncorporacao();\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function mounted() {\n      return _mounted.apply(this, arguments);\n    }\n\n    return mounted;\n  }(),\n  computed: _objectSpread(_objectSpread({}, mapGetters(['getItemIncorporacaoValidado'])), {}, {\n    titulo: function titulo() {\n      return this.$route.meta.modal.title;\n    }\n  }),\n  watch: {\n    $route: {\n      immediate: true,\n      handler: function handler(newVal) {\n        this.exibirModal = newVal.meta && newVal.meta.modal.showModal;\n      }\n    }\n  },\n  methods: _objectSpread(_objectSpread(_objectSpread({}, mapMutations([mutationTypes.PATRIMONIO.INCORPORACAO.INCORPORACAO_ITEM.DESATIVAR_SALVAMENTO_AUTOMATICO])), mapActions([actionTypes.PATRIMONIO.INCORPORACAO.INCORPORACAO_ITEM.CADASTRAR_ITEM_INCORPORACAO, actionTypes.PATRIMONIO.INCORPORACAO.INCORPORACAO_ITEM.EDITAR_ITEM_INCORPORACAO, actionTypes.PATRIMONIO.INCORPORACAO.INCORPORACAO_ITEM.DELETAR_ITEM_INCORPORACAO, actionTypes.PATRIMONIO.INCORPORACAO.INCORPORACAO_ITEM.BUSCAR_ITEM_INCORPORACAO, actionTypes.PATRIMONIO.CADASTRAR_PATRIMONIO])), {}, {\n    setarDadosParaEdicao: function setarDadosParaEdicao(item) {\n      this.incorporacaoItem.codigo = item.codigo;\n      this.incorporacaoItem.descricao = item.descricao;\n      this.incorporacaoItem.idIncorporacao = this.incorporacaoId;\n\n      if (this.incorporacaoItem.naturezaDespesa && typeof this.incorporacaoItem.naturezaDespesa.id !== 'undefined') {\n        this.incorporacaoItem.naturezaDespesa = this.incorporacaoItem.naturezaDespesa.id;\n      }\n    },\n    buscaItemIncorporacao: function () {\n      var _buscaItemIncorporacao = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.setIncorporacaoId();\n                this.setItemIncorporacaoId();\n\n                if (!(this.itemIncorporacaoId && this.incorporacaoId)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                _context2.next = 5;\n                return this.buscarItemIncorporacao({\n                  idItem: this.itemIncorporacaoId,\n                  idIncorporacao: this.incorporacaoId\n                });\n\n              case 5:\n                this.incorporacaoItem = _context2.sent;\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function buscaItemIncorporacao() {\n        return _buscaItemIncorporacao.apply(this, arguments);\n      }\n\n      return buscaItemIncorporacao;\n    }(),\n    cadastraPatrimonio: function () {\n      var _cadastraPatrimonio = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var item, patrimonio;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                item = this.$store.state.itemIncorporacao.dadosGerais;\n                patrimonio = {\n                  quantidade: item.quantidade,\n                  valorTotal: item.valorTotal,\n                  valorTotalAnterior: item.valorTotalAnterior,\n                  contaContabilId: item.contaContabil.id,\n                  itemIncorporacaoId: this.$route.params.itemIncorporacaoId\n                };\n                _context3.next = 4;\n                return this.cadastrarPatrimonio(patrimonio);\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function cadastraPatrimonio() {\n        return _cadastraPatrimonio.apply(this, arguments);\n      }\n\n      return cadastraPatrimonio;\n    }(),\n    fecharModal: function () {\n      var _fecharModal = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.tratarEventoFinalizarItemIncorporacao();\n\n              case 2:\n                this.desativarSalvamentoAutomatico();\n                this.exibeModal = false;\n                this.$emit('fechar');\n\n                if (!this.verificaPermissaoEdicao()) {\n                  _context4.next = 10;\n                  break;\n                }\n\n                _context4.next = 8;\n                return this.$router.replace({\n                  name: 'ItensIncorporacaoListagem',\n                  params: {\n                    incorporacaoId: this.incorporacaoId\n                  }\n                });\n\n              case 8:\n                _context4.next = 12;\n                break;\n\n              case 10:\n                _context4.next = 12;\n                return this.$router.replace({\n                  name: 'VisualizarItensIncorporacao',\n                  params: {\n                    incorporacaoId: this.incorporacaoId\n                  }\n                });\n\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function fecharModal() {\n        return _fecharModal.apply(this, arguments);\n      }\n\n      return fecharModal;\n    }(),\n    setIncorporacaoId: function setIncorporacaoId() {\n      if (this.$route.params.incorporacaoId) {\n        this.incorporacaoId = this.$route.params.incorporacaoId;\n      }\n    },\n    setItemIncorporacaoId: function setItemIncorporacaoId() {\n      if (this.$route.params.itemIncorporacaoId) {\n        this.itemIncorporacaoId = this.$route.params.itemIncorporacaoId;\n      }\n    },\n    tratarEventoAvancarEtapaTres: function () {\n      var _tratarEventoAvancarEtapaTres = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.cadastraPatrimonio();\n\n              case 2:\n                this.desativarSalvamentoAutomatico();\n                _context5.next = 5;\n                return this.$router.replace({\n                  name: 'IncorporacaoItemListagemPatrimonios',\n                  params: {\n                    itemIncorporacaoId: this.$route.params.itemIncorporacaoId,\n                    incorporacaoId: this.incorporacaoId\n                  }\n                });\n\n              case 5:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function tratarEventoAvancarEtapaTres() {\n        return _tratarEventoAvancarEtapaTres.apply(this, arguments);\n      }\n\n      return tratarEventoAvancarEtapaTres;\n    }(),\n    tratarEventoAvancarEtapaDoisVisualizar: function tratarEventoAvancarEtapaDoisVisualizar() {\n      this.$router.replace({\n        name: 'VisualizacaoDadosGerais',\n        params: {\n          itemIncorporacaoId: this.$route.params.itemIncorporacaoId,\n          incorporacaoId: this.incorporacaoId\n        }\n      });\n    },\n    tratarEventoAvancarEtapaTresVisualizar: function tratarEventoAvancarEtapaTresVisualizar() {\n      this.$router.replace({\n        name: 'IncorporacaoItemListagemPatrimoniosVisualizacao',\n        params: {\n          incorporacaoId: this.incorporacaoId\n        }\n      });\n    },\n    tratarEventoSelecionarItem: function () {\n      var _tratarEventoSelecionarItem = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        var item;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                item = this.$store.state.itemIncorporacao.dadosGerais;\n\n                if (this.verificarSeHouveTrocaDeItem(item) && this.manteveItemCatalogo) {\n                  this.mostrarNotificacaoAviso('Os campos preenchidos na \"Etapa 2 - Dados gerais do item compra\" serão resetados.');\n                  this.manteveItemCatalogo = false;\n                }\n\n              case 2:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function tratarEventoSelecionarItem() {\n        return _tratarEventoSelecionarItem.apply(this, arguments);\n      }\n\n      return tratarEventoSelecionarItem;\n    }(),\n    tratarEventoEditarItemPassoUm: function () {\n      var _tratarEventoEditarItemPassoUm = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n        var item, dados;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                item = this.$store.state.itemIncorporacao.dadosGerais;\n\n                if (!this.verificarSeHouveTrocaDeItem(item)) {\n                  _context7.next = 10;\n                  break;\n                }\n\n                dados = {\n                  idIncorporacao: this.incorporacaoId,\n                  idItem: this.incorporacaoItem.id\n                };\n                _context7.next = 5;\n                return this.deletarItemIncorporacao(dados);\n\n              case 5:\n                _context7.next = 7;\n                return this.tratarEventoSalvarNovoItem();\n\n              case 7:\n                this.setItemIncorporacaoId();\n                _context7.next = 12;\n                break;\n\n              case 10:\n                _context7.next = 12;\n                return this.$router.replace({\n                  name: 'DadosGeraisDoItemModal',\n                  params: {\n                    itemIncorporacaoId: this.itemIncorporacaoId\n                  }\n                });\n\n              case 12:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function tratarEventoEditarItemPassoUm() {\n        return _tratarEventoEditarItemPassoUm.apply(this, arguments);\n      }\n\n      return tratarEventoEditarItemPassoUm;\n    }(),\n    verificarSeHouveTrocaDeItem: function verificarSeHouveTrocaDeItem(item) {\n      return this.incorporacaoItem.codigo !== item.codigo;\n    },\n    tratarEventoFinalizarItemIncorporacao: function () {\n      var _tratarEventoFinalizarItemIncorporacao = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                if (!(this.$route.meta.modal.visualizacao || this.$route.name !== 'IncorporacaoItemListagemPatrimonios')) {\n                  _context8.next = 2;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\");\n\n              case 2:\n                _context8.next = 4;\n                return this.verificarItemIncorporacaoValidado();\n\n              case 4:\n                if (!_context8.sent) {\n                  _context8.next = 11;\n                  break;\n                }\n\n                if (!(this.incorporacaoItem.situacao === 'FINALIZADO')) {\n                  _context8.next = 7;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\");\n\n              case 7:\n                this.setarDadosParaEdicao(this.incorporacaoItem);\n                this.incorporacaoItem.situacao = 'FINALIZADO';\n                _context8.next = 11;\n                return this.editarItemIncorporacao(this.incorporacaoItem);\n\n              case 11:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function tratarEventoFinalizarItemIncorporacao() {\n        return _tratarEventoFinalizarItemIncorporacao.apply(this, arguments);\n      }\n\n      return tratarEventoFinalizarItemIncorporacao;\n    }(),\n    tratarEventoSalvarNovoItem: function () {\n      var _tratarEventoSalvarNovoItem = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9() {\n        var item, retorno;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                this.desabilitarLoadingGlobal();\n                item = this.$store.state.itemIncorporacao.dadosGerais;\n                item = _objectSpread(_objectSpread({}, item), {}, {\n                  idIncorporacao: this.incorporacaoId\n                });\n                _context9.next = 5;\n                return this.cadastrarItemIncorporacao(item);\n\n              case 5:\n                retorno = _context9.sent;\n\n                if (!retorno.id) {\n                  _context9.next = 9;\n                  break;\n                }\n\n                _context9.next = 9;\n                return this.$router.replace({\n                  name: 'DadosGeraisDoItemModal',\n                  params: {\n                    itemIncorporacaoId: retorno.id\n                  }\n                });\n\n              case 9:\n                this.habilitarLoadingGlobal();\n\n              case 10:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function tratarEventoSalvarNovoItem() {\n        return _tratarEventoSalvarNovoItem.apply(this, arguments);\n      }\n\n      return tratarEventoSalvarNovoItem;\n    }(),\n    tratarEventoVerificarContinuar: function tratarEventoVerificarContinuar(condicao) {\n      if (condicao !== undefined) {\n        this.continuar = condicao;\n      } else {\n        this.continuar = true;\n      }\n    },\n    tratarEventoVoltarPassoUm: function tratarEventoVoltarPassoUm() {\n      this.desativarSalvamentoAutomatico();\n\n      if (this.verificaPermissaoEdicao()) {\n        this.$router.replace({\n          name: 'ItensCatalogoModalNovo',\n          params: {\n            incorporacaoId: this.incorporacaoId\n          }\n        });\n      } else {\n        this.$router.replace({\n          name: 'ItensCatalogoModalVisualizacao',\n          params: {\n            incorporacaoId: this.incorporacaoId\n          }\n        });\n      }\n\n      this.continuar = false;\n    },\n    tratarEventoVoltarPassoUmEdicao: function () {\n      var _tratarEventoVoltarPassoUmEdicao = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                this.manteveItemCatalogo = true;\n                _context10.next = 3;\n                return this.buscaItemIncorporacao();\n\n              case 3:\n                this.desativarSalvamentoAutomatico();\n                _context10.next = 6;\n                return this.$router.replace({\n                  name: 'ItensCatalogoModalEdicao',\n                  params: {\n                    incorporacaoId: this.incorporacaoId,\n                    itemIncorporacaoId: this.$route.params.itemIncorporacaoId\n                  }\n                });\n\n              case 6:\n                this.continuar = false;\n\n              case 7:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function tratarEventoVoltarPassoUmEdicao() {\n        return _tratarEventoVoltarPassoUmEdicao.apply(this, arguments);\n      }\n\n      return tratarEventoVoltarPassoUmEdicao;\n    }(),\n    tratarEventoVoltarPassoUmVisualizar: function tratarEventoVoltarPassoUmVisualizar() {\n      this.$router.replace({\n        name: 'ItensCatalogoModalVisualizacaoCadastrado',\n        params: {\n          itemIncorporacaoId: this.itemIncorporacaoId\n        }\n      });\n      this.continuar = true;\n    },\n    tratarEventoVoltarPassoDoisEdicao: function tratarEventoVoltarPassoDoisEdicao() {\n      this.desativarSalvamentoAutomatico();\n      this.$router.replace({\n        name: 'DadosGeraisDoItemModal',\n        params: {\n          itemIncorporacaoId: this.$route.params.itemIncorporacaoId\n        }\n      });\n    },\n    tratarEventoVoltarPassoDoisVisualizar: function tratarEventoVoltarPassoDoisVisualizar() {\n      this.$router.replace({\n        name: 'VisualizacaoDadosGerais',\n        params: {\n          itemIncorporacaoId: this.itemIncorporacaoId\n        }\n      });\n    },\n    verificaPermissaoEdicao: function verificaPermissaoEdicao() {\n      return AzHasPermissions(this.$store.state.loki.user.authorities, ['Mobiliario.Normal']);\n    },\n    verificarItemIncorporacaoValidado: function () {\n      var _verificarItemIncorporacaoValidado = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {\n        var tipoVeiculo;\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                _context11.next = 2;\n                return this.buscaItemIncorporacao();\n\n              case 2:\n                tipoVeiculo = this.incorporacaoItem.tipoBem === 'VEICULO';\n                return _context11.abrupt(\"return\", this.getItemIncorporacaoValidado(this.incorporacaoItem, tipoVeiculo, 'ITEM_INCORPORACAO'));\n\n              case 4:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function verificarItemIncorporacaoValidado() {\n        return _verificarItemIncorporacaoValidado.apply(this, arguments);\n      }\n\n      return verificarItemIncorporacaoValidado;\n    }()\n  })\n};",{"version":3,"sources":["ModalIncorporacaoItem.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <v-row justify=\"center\">\n        <v-dialog v-model=\"exibeModal\" persistent max-width=\"1100\" scrollable @keydown.esc=\"fecharModal\">\n            <v-card>\n                <v-toolbar dark color=\"primary\" class=\"styleToolBar\">\n                    <v-toolbar-title><span class=\"etapaStyle\">{{titulo}}</span></v-toolbar-title>\n                    <v-spacer/>\n                    <az-auto-save v-if=\"$store.state.itemIncorporacao.autoSave.show\" class=\"auto-save-modal\"/>\n                    <v-btn class=\"close__button\" icon @click=\"fecharModal\">\n                        <v-icon size=\"20\">close</v-icon>\n                    </v-btn>\n                </v-toolbar>\n                <v-card-text class=\"modal-incorporacao-container\">\n                    <router-view @fechar=\"fecharModal\" @verificarContinuar=\"tratarEventoVerificarContinuar\"\n                                 @trocarItem=\"tratarEventoSelecionarItem\"/>\n                </v-card-text>\n                <div>\n                    <v-divider/>\n                    <modal-incorporacao-acoes\n                        :podeContinuar=\"continuar\"\n                        @salvarNovoItem=\"tratarEventoSalvarNovoItem\"\n                        @editarItemPassoUm=\"tratarEventoEditarItemPassoUm\"\n                        @avancarEtapaDoisVisualizar=\"tratarEventoAvancarEtapaDoisVisualizar\"\n                        @avancarEtapaTres=\"tratarEventoAvancarEtapaTres\"\n                        @avancarEtapaTresVisualizar=\"tratarEventoAvancarEtapaTresVisualizar\"\n                        @voltarPassoNovo=\"tratarEventoVoltarPassoUm\"\n                        @voltarPassoUmEdicao=\"tratarEventoVoltarPassoUmEdicao\"\n                        @voltarPassoUmVisualizar=\"tratarEventoVoltarPassoUmVisualizar\"\n                        @voltarPassoDoisEdicao=\"tratarEventoVoltarPassoDoisEdicao\"\n                        @voltarPassoDoisVisualizar=\"tratarEventoVoltarPassoDoisVisualizar\"\n                        @fechar=\"fecharModal\"/>\n                </div>\n            </v-card>\n        </v-dialog>\n    </v-row>\n</template>\n<script>\n    import ModalIncorporacaoAcoes from './ModalIncorporacaoAcoes'\n    import {actionTypes, mutationTypes} from '@/core/constants'\n    import {mapActions, mapMutations, createNamespacedHelpers} from 'vuex'\n    import AzHasPermissions from '@azinformatica/loki/src/utils/AzHasPermissions'\n\n    const {mapGetters} = createNamespacedHelpers('rotulosPersonalizados')\n\n    export default {\n        name: 'ModalIncorporacaoItem',\n        components: {ModalIncorporacaoAcoes},\n        data() {\n            return {\n                exibeModal: true,\n                etapa: '',\n                descricaoEtapa: '',\n                continuar: false,\n                incorporacaoItem: {},\n                incorporacaoId: null,\n                itemIncorporacaoId: null,\n                manteveItemCatalogo: true,\n            }\n        },\n        async mounted() {\n            await this.buscaItemIncorporacao()\n        },\n        computed: {\n            ...mapGetters([\n                'getItemIncorporacaoValidado',\n            ]),\n            titulo() {\n                return this.$route.meta.modal.title\n            },\n        },\n        watch: {\n            $route: {\n                immediate: true,\n                handler: function (newVal) {\n                    this.exibirModal = newVal.meta && newVal.meta.modal.showModal\n                }\n            }\n        },\n        methods: {\n            ...mapMutations([\n                mutationTypes.PATRIMONIO.INCORPORACAO.INCORPORACAO_ITEM.DESATIVAR_SALVAMENTO_AUTOMATICO\n            ]),\n            ...mapActions([\n                actionTypes.PATRIMONIO.INCORPORACAO.INCORPORACAO_ITEM.CADASTRAR_ITEM_INCORPORACAO,\n                actionTypes.PATRIMONIO.INCORPORACAO.INCORPORACAO_ITEM.EDITAR_ITEM_INCORPORACAO,\n                actionTypes.PATRIMONIO.INCORPORACAO.INCORPORACAO_ITEM.DELETAR_ITEM_INCORPORACAO,\n                actionTypes.PATRIMONIO.INCORPORACAO.INCORPORACAO_ITEM.BUSCAR_ITEM_INCORPORACAO,\n                actionTypes.PATRIMONIO.CADASTRAR_PATRIMONIO\n            ]),\n            setarDadosParaEdicao(item) {\n                this.incorporacaoItem.codigo = item.codigo\n                this.incorporacaoItem.descricao = item.descricao\n                this.incorporacaoItem.idIncorporacao = this.incorporacaoId\n                if (this.incorporacaoItem.naturezaDespesa && typeof this.incorporacaoItem.naturezaDespesa.id !== 'undefined') {\n                    this.incorporacaoItem.naturezaDespesa = this.incorporacaoItem.naturezaDespesa.id\n                }\n            },\n            async buscaItemIncorporacao() {\n                this.setIncorporacaoId()\n                this.setItemIncorporacaoId()\n                if (this.itemIncorporacaoId && this.incorporacaoId) {\n                    this.incorporacaoItem = await this.buscarItemIncorporacao({\n                        idItem: this.itemIncorporacaoId,\n                        idIncorporacao: this.incorporacaoId\n                    })\n                }\n            },\n            async cadastraPatrimonio() {\n                let item = this.$store.state.itemIncorporacao.dadosGerais\n\n                const patrimonio = {\n                    quantidade: item.quantidade,\n                    valorTotal: item.valorTotal,\n                    valorTotalAnterior: item.valorTotalAnterior,\n                    contaContabilId: item.contaContabil.id,\n                    itemIncorporacaoId: this.$route.params.itemIncorporacaoId\n                }\n\n                await this.cadastrarPatrimonio(patrimonio)\n            },\n            async fecharModal() {\n                await this.tratarEventoFinalizarItemIncorporacao()\n                this.desativarSalvamentoAutomatico()\n                this.exibeModal = false\n                this.$emit('fechar')\n                if(this.verificaPermissaoEdicao()){\n                    await this.$router.replace({ name: 'ItensIncorporacaoListagem', params: {incorporacaoId: this.incorporacaoId}})\n                } else{\n                    await this.$router.replace({ name: 'VisualizarItensIncorporacao', params: {incorporacaoId: this.incorporacaoId}})\n                }\n            },\n            setIncorporacaoId() {\n                if (this.$route.params.incorporacaoId) {\n                    this.incorporacaoId = this.$route.params.incorporacaoId\n                }\n            },\n            setItemIncorporacaoId() {\n                if (this.$route.params.itemIncorporacaoId) {\n                    this.itemIncorporacaoId = this.$route.params.itemIncorporacaoId\n                }\n            },\n            async tratarEventoAvancarEtapaTres() {\n                await this.cadastraPatrimonio()\n                this.desativarSalvamentoAutomatico()\n                await this.$router.replace({\n                    name: 'IncorporacaoItemListagemPatrimonios',\n                    params: {\n                        itemIncorporacaoId: this.$route.params.itemIncorporacaoId,\n                        incorporacaoId: this.incorporacaoId\n                    }\n                })\n            },\n            tratarEventoAvancarEtapaDoisVisualizar() {\n                this.$router.replace({\n                    name: 'VisualizacaoDadosGerais',\n                    params: {\n                        itemIncorporacaoId: this.$route.params.itemIncorporacaoId,\n                        incorporacaoId: this.incorporacaoId\n                    }\n                })\n            },\n            tratarEventoAvancarEtapaTresVisualizar() {\n                this.$router.replace({\n                    name: 'IncorporacaoItemListagemPatrimoniosVisualizacao',\n                    params: {incorporacaoId: this.incorporacaoId}\n                })\n            },\n            async tratarEventoSelecionarItem() {\n                let item = this.$store.state.itemIncorporacao.dadosGerais\n                if (this.verificarSeHouveTrocaDeItem(item) && this.manteveItemCatalogo) {\n                    this.mostrarNotificacaoAviso('Os campos preenchidos na \"Etapa 2 - Dados gerais do item compra\" serão resetados.')\n                    this.manteveItemCatalogo = false\n                }\n            },\n            async tratarEventoEditarItemPassoUm() {\n                let item = this.$store.state.itemIncorporacao.dadosGerais\n                if (this.verificarSeHouveTrocaDeItem(item)) {\n                    const dados = {idIncorporacao: this.incorporacaoId, idItem: this.incorporacaoItem.id}\n                    await this.deletarItemIncorporacao(dados)\n                    await this.tratarEventoSalvarNovoItem()\n                    this.setItemIncorporacaoId()\n                } else {\n                    await this.$router.replace({\n                        name: 'DadosGeraisDoItemModal',\n                        params: {itemIncorporacaoId: this.itemIncorporacaoId},\n                    })\n                }\n            },\n            verificarSeHouveTrocaDeItem(item) {\n                return this.incorporacaoItem.codigo !== item.codigo\n            },\n            async tratarEventoFinalizarItemIncorporacao() {\n                if (this.$route.meta.modal.visualizacao || this.$route.name !== 'IncorporacaoItemListagemPatrimonios') return\n                if (await this.verificarItemIncorporacaoValidado()) {\n                    if (this.incorporacaoItem.situacao === 'FINALIZADO') return\n                    this.setarDadosParaEdicao(this.incorporacaoItem)\n                    this.incorporacaoItem.situacao = 'FINALIZADO'\n                    await this.editarItemIncorporacao(this.incorporacaoItem)\n                }\n            },\n            async tratarEventoSalvarNovoItem() {\n                this.desabilitarLoadingGlobal()\n                let item = this.$store.state.itemIncorporacao.dadosGerais\n                item = {...item, idIncorporacao: this.incorporacaoId}\n                const retorno = await this.cadastrarItemIncorporacao(item)\n\n                if (retorno.id) {\n                    await this.$router.replace({\n                        name: 'DadosGeraisDoItemModal',\n                        params: {itemIncorporacaoId: retorno.id},\n                    })\n                }\n                this.habilitarLoadingGlobal()\n            },\n            tratarEventoVerificarContinuar(condicao) {\n                if (condicao !== undefined) {\n                    this.continuar = condicao\n                } else {\n                    this.continuar = true\n                }\n            },\n            tratarEventoVoltarPassoUm() {\n                this.desativarSalvamentoAutomatico()\n                if (this.verificaPermissaoEdicao()) {\n                    this.$router.replace({\n                        name: 'ItensCatalogoModalNovo',\n                        params: {incorporacaoId: this.incorporacaoId}\n                    })\n                } else {\n                    this.$router.replace({\n                        name: 'ItensCatalogoModalVisualizacao',\n                        params: {incorporacaoId: this.incorporacaoId}\n                    })\n                }\n                this.continuar = false\n            },\n            async tratarEventoVoltarPassoUmEdicao() {\n                this.manteveItemCatalogo = true\n                await this.buscaItemIncorporacao()\n                this.desativarSalvamentoAutomatico()\n                await this.$router.replace({\n                    name: 'ItensCatalogoModalEdicao',\n                    params: {\n                        incorporacaoId: this.incorporacaoId,\n                        itemIncorporacaoId: this.$route.params.itemIncorporacaoId\n                    }\n                })\n                this.continuar = false\n            },\n            tratarEventoVoltarPassoUmVisualizar() {\n                this.$router.replace({\n                    name: 'ItensCatalogoModalVisualizacaoCadastrado',\n                    params: {itemIncorporacaoId: this.itemIncorporacaoId}\n                })\n                this.continuar = true\n            },\n            tratarEventoVoltarPassoDoisEdicao() {\n                this.desativarSalvamentoAutomatico()\n                this.$router.replace({\n                    name: 'DadosGeraisDoItemModal',\n                    params: {itemIncorporacaoId: this.$route.params.itemIncorporacaoId},\n                })\n            },\n            tratarEventoVoltarPassoDoisVisualizar() {\n                this.$router.replace({\n                    name: 'VisualizacaoDadosGerais',\n                    params: {itemIncorporacaoId: this.itemIncorporacaoId}\n                })\n            },\n            verificaPermissaoEdicao() {\n                return AzHasPermissions(this.$store.state.loki.user.authorities, [\n                    'Mobiliario.Normal',\n                ])\n            },\n            async verificarItemIncorporacaoValidado() {\n                await this.buscaItemIncorporacao()\n                const tipoVeiculo = (this.incorporacaoItem.tipoBem === 'VEICULO')\n                return this.getItemIncorporacaoValidado(this.incorporacaoItem, tipoVeiculo, 'ITEM_INCORPORACAO')\n            }\n\n\n        }\n    }\n</script>\n\n<style lang=\"stylus\">\n    .item-patrimonio-tabela\n        min-height 58vh\n\n    .item-catalogo-tabela\n        min-height 61vh\n\n    .etapaStyle\n        font-weight bold\n        font-size 16px\n\n    .auto-save-modal\n        color white!important\n\n    .modal-incorporacao-container\n        padding 0px !important\n        overflow-x hidden\n        height 75vh\n\n    @media (max-height: 870px)\n        .item-patrimonio-tabela\n            min-height 55vh\n\n        .item-catalogo-tabela\n            min-height 58vh\n\n    @media (max-height: 780px)\n        .item-patrimonio-tabela\n            min-height 49vh\n\n        .item-catalogo-tabela\n            min-height 52vh\n\n</style>\n"],"sourceRoot":"src/views/components/modal/incorporacao/adicionaritem"}]}