{"remainingRequest":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/babel-loader/lib/index.js!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/pages/patrimonios/incorporacao/edicao/IncorporacaoEdicao.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/pages/patrimonios/incorporacao/edicao/IncorporacaoEdicao.vue","mtime":1617113267647},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { actionTypes, mutationTypes } from '@/core/constants';\nimport { mapActions, mapMutations } from 'vuex';\nimport AzHasPermissions from '@azinformatica/loki/src/utils/AzHasPermissions';\nimport BotaoRemover from '@/views/components/botoes/BotaoRemover';\nexport default {\n  name: 'IncorporacaoEdicao',\n  components: {\n    BotaoRemover: BotaoRemover\n  },\n  data: function data() {\n    return {\n      passos: [{\n        titulo: 'Dados Gerais',\n        rotaPadrao: 'EditarIncorporacao',\n        rotaVisualizacao: 'VisualizarIncorporacao',\n        rotaEdicao: 'EditarIncorporacao',\n        desabilitado: false,\n        numero: 1\n      }, {\n        titulo: 'Itens',\n        rotaPadrao: 'ItensIncorporacaoListagem',\n        rotaVisualizacao: 'VisualizarItensIncorporacao',\n        rotaEdicao: 'ItensIncorporacaoListagem',\n        desabilitado: true,\n        numero: 2\n      }, {\n        titulo: 'Documentos',\n        rotaPadrao: 'IncorporacaoDocumentosEdicao',\n        rotaVisualizacao: 'VisualizarIncorporacaoDocumentos',\n        rotaEdicao: 'IncorporacaoDocumentosEdicao',\n        desabilitado: true,\n        numero: 3\n      }],\n      passoAtual: {},\n      incorporacaoId: null,\n      rotaOrigem: this.$store.state.incorporacao.rota.origem,\n      valueToolTip: false,\n      situacaoIncorporacao: ''\n    };\n  },\n  computed: {\n    verificaPermissaoEdicao: function verificaPermissaoEdicao() {\n      return AzHasPermissions(this.$store.state.loki.user.authorities, ['Mobiliario.Normal']);\n    }\n  },\n  watch: {\n    $route: function $route() {\n      this.setIncorporacaoId();\n      this.setPassoAtual(this.$route);\n    }\n  },\n  created: function () {\n    var _created = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.buscarSituacaoDaIncorporacao();\n\n            case 2:\n              _context.next = 4;\n              return this.validarIncorporacaoEmModoElaboracao(this.situacaoIncorporacao);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function created() {\n      return _created.apply(this, arguments);\n    }\n\n    return created;\n  }(),\n  mounted: function () {\n    var _mounted = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              this.retrairMenu();\n              this.setIncorporacaoId();\n              this.setPassoAtual(this.$route);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    function mounted() {\n      return _mounted.apply(this, arguments);\n    }\n\n    return mounted;\n  }(),\n  methods: _objectSpread(_objectSpread(_objectSpread({}, mapActions([actionTypes.PATRIMONIO.INCORPORACAO.DELETAR_INCORPORACAO, actionTypes.PATRIMONIO.INCORPORACAO.BUSCAR_SITUACAO_INCORPORACAO])), mapMutations([mutationTypes.PATRIMONIO.INCORPORACAO.SET_SITUACAO_INCORPORACAO])), {}, {\n    contralaAcessoAosPassosEmCadaRota: function contralaAcessoAosPassosEmCadaRota() {\n      if (this.$route.name === 'ItensIncorporacaoListagem' || this.$route.name === 'VisualizarItensIncorporacao') {\n        this.passos[1].desabilitado = false;\n        this.passos[2].desabilitado = true;\n      }\n\n      if (this.$route.name === 'EditarIncorporacao' || this.$route.name === 'VisualizarIncorporacao') {\n        this.passos[1].desabilitado = true;\n      }\n\n      if (this.$route.name === 'IncorporacaoDocumentosEdicao' || this.$route.name === 'VisualizarIncorporacaoDocumentos') {\n        this.passos[0].desabilitado = false;\n        this.passos[1].desabilitado = false;\n        this.passos[2].desabilitado = false;\n      }\n    },\n    buscarSituacaoDaIncorporacao: function () {\n      var _buscarSituacaoDaIncorporacao = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.buscarSituacaoIncorporacao(this.$route.params.incorporacaoId);\n\n              case 2:\n                this.situacaoIncorporacao = _context3.sent;\n                this.setSituacaoIncorporacao(this.situacaoIncorporacao);\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function buscarSituacaoDaIncorporacao() {\n        return _buscarSituacaoDaIncorporacao.apply(this, arguments);\n      }\n\n      return buscarSituacaoDaIncorporacao;\n    }(),\n    validarIncorporacaoEmModoElaboracao: function () {\n      var _validarIncorporacaoEmModoElaboracao = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(situacaoIncorporacao) {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(situacaoIncorporacao !== 'EM_ELABORACAO' && situacaoIncorporacao !== 'ERRO_PROCESSAMENTO')) {\n                  _context4.next = 4;\n                  break;\n                }\n\n                this.mostrarNotificacaoErro('Não é possivel editar esta incorporação!');\n                _context4.next = 4;\n                return this.$router.replace({\n                  name: 'IncorporacaoListagem'\n                });\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function validarIncorporacaoEmModoElaboracao(_x) {\n        return _validarIncorporacaoEmModoElaboracao.apply(this, arguments);\n      }\n\n      return validarIncorporacaoEmModoElaboracao;\n    }(),\n    desabilitaPasso3: function desabilitaPasso3() {\n      this.passos[2].desabilitado = true;\n    },\n    expandirMenu: function expandirMenu() {\n      this.$store.commit(mutationTypes.COMUM.SET_EXPANDIR_MENU);\n    },\n    habilitaPasso3: function habilitaPasso3() {\n      this.passos[2].desabilitado = false;\n    },\n    desabilitaPasso2: function desabilitaPasso2() {\n      this.passos[1].desabilitado = true;\n    },\n    habilitaPasso2: function habilitaPasso2() {\n      this.passos[1].desabilitado = false;\n    },\n    retrairMenu: function retrairMenu() {\n      this.$store.commit(mutationTypes.COMUM.SET_RETRAIR_MENU);\n    },\n    setIncorporacaoId: function setIncorporacaoId() {\n      this.incorporacaoId = this.$route.params.incorporacaoId;\n    },\n    setPassoAtual: function setPassoAtual(route) {\n      var encontrado = this.passos.filter(function (passo) {\n        return passo.rotaPadrao === route.name || passo.rotaEdicao === route.name || passo.rotaVisualizacao === route.name;\n      });\n      this.passoAtual = encontrado[0];\n      this.contralaAcessoAosPassosEmCadaRota();\n    },\n    tratarEventoDeletarIncorporacao: function () {\n      var _tratarEventoDeletarIncorporacao = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.deletarIncorporacao(this.incorporacaoId);\n\n              case 2:\n                this.mostrarNotificacaoSucessoDefault();\n                _context5.next = 5;\n                return this.$router.replace({\n                  name: this.rotaOrigem\n                });\n\n              case 5:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function tratarEventoDeletarIncorporacao() {\n        return _tratarEventoDeletarIncorporacao.apply(this, arguments);\n      }\n\n      return tratarEventoDeletarIncorporacao;\n    }(),\n    tratarEventoClick: function tratarEventoClick(item) {\n      if (item.desabilitado === false) {\n        if (this.incorporacaoId) {\n          if (!this.verificaPermissaoEdicao) {\n            this.$router.replace({\n              name: item.rotaVisualizacao\n            });\n          } else {\n            this.$router.replace({\n              name: item.rotaEdicao\n            });\n          }\n        } else {\n          this.$router.replace({\n            name: this.rotaOrigem\n          });\n        }\n      }\n    }\n  }),\n  destroyed: function destroyed() {\n    this.expandirMenu();\n  }\n};",{"version":3,"sources":["IncorporacaoEdicao.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <az-back-button :route=\"{ name: rotaOrigem }\" text=\"Voltar para listagem\"/>\n\n        <az-container class=\"incorporacao-container\">\n            <v-stepper v-model=\"passoAtual.numero\">\n                <v-stepper-header class=\"elevation-0 barra-passo\">\n                    <v-spacer/>\n\n                    <v-stepper-step\n                        :complete=\"passos[0].numero < passoAtual.numero\"\n                        :disabled=\"passos[0].desabilitado\"\n                        :editable=\"!passos[0].desabilitado\"\n                        :key=\"`${passos[0].numero}-header`\"\n                        :step=\"passos[0].numero\"\n                        @click=\"tratarEventoClick(passos[0])\"\n                        edit-icon=\"fas fa-check\">\n                        {{ passos[0].titulo }}\n                    </v-stepper-step>\n\n                    <v-divider/>\n\n                    <v-tooltip\n                        nudge-left=\"10\"\n                        nudge-top=\"-22\"\n                        max-width=\"200\"\n                        top>\n                        <template v-slot:activator=\"{ on }\">\n                            <div v-on=\"on\" v-show=\"passos[1].desabilitado\">\n                                <v-stepper-step\n                                    :complete=\"passos[1].numero < passoAtual.numero\"\n                                    :disabled=\"passos[1].desabilitado\"\n                                    :editable=\"!passos[1].desabilitado\"\n                                    :key=\"`${passos[1].numero}-header`\"\n                                    :step=\"passos[1].numero\"\n                                    @click=\"tratarEventoClick(passos[1])\"\n                                    edit-icon=\"fas fa-check\"\n                                    :class=\"{'passo-ativo' : !passos[1].desabilitado}\"\n                                >{{ passos[1].titulo }}\n                                </v-stepper-step>\n                            </div>\n                            <v-stepper-step\n                                :complete=\"passos[1].numero < passoAtual.numero\"\n                                :disabled=\"passos[1].desabilitado\"\n                                :editable=\"!passos[1].desabilitado\"\n                                :key=\"`${passos[1].numero}-header`\"\n                                :step=\"passos[1].numero\"\n                                @click=\"tratarEventoClick(passos[1])\"\n                                edit-icon=\"fas fa-check\"\n                                v-show=\"!passos[1].desabilitado\"\n                                :class=\"{'passo-ativo' : !passos[1].desabilitado}\"\n                            >{{ passos[1].titulo }}\n                            </v-stepper-step>\n                        </template>\n                        É necessário que todos os campos obrigatórios sejam preenchidos para continuar.\n                    </v-tooltip>\n\n                    <v-divider/>\n\n                    <v-tooltip\n                        nudge-left=\"10\"\n                        nudge-top=\"-20\"\n                        max-width=\"200\"\n                        top>\n                        <template v-slot:activator=\"{ on }\">\n                            <div v-on=\"on\" v-show=\"passos[2].desabilitado && !passos[1].desabilitado\">\n                                <v-stepper-step\n                                    :complete=\"passos[2].numero < passoAtual.numero\"\n                                    :disabled=\"passos[2].desabilitado\"\n                                    :editable=\"!passos[2].desabilitado\"\n                                    :key=\"`${passos[2].numero}-header`\"\n                                    :step=\"passos[2].numero\"\n                                    @click=\"tratarEventoClick(passos[2])\"\n                                    edit-icon=\"fas fa-check\"\n                                    :class=\"{'passo-ativo' : !passos[2].desabilitado}\"\n                                >{{ passos[2].titulo }}\n                                </v-stepper-step>\n                            </div>\n                            <v-stepper-step\n                                :complete=\"passos[2].numero < passoAtual.numero\"\n                                :disabled=\"passos[2].desabilitado\"\n                                :editable=\"!passos[2].desabilitado\"\n                                :key=\"`${passos[2].numero}-header`\"\n                                :step=\"passos[2].numero\"\n                                @click=\"tratarEventoClick(passos[2])\"\n                                edit-icon=\"fas fa-check\"\n                                v-show=\"!passos[2].desabilitado || passos[1].desabilitado\"\n                                :class=\"{'passo-ativo' : !passos[2].desabilitado}\"\n                            >{{ passos[2].titulo }}\n                            </v-stepper-step>\n                        </template>\n                        É necessário que todos os campos obrigatórios sejam preenchidos para continuar.\n                    </v-tooltip>\n\n                    <v-spacer/>\n\n                    <div>\n                        <botao-remover @remover=\"tratarEventoDeletarIncorporacao\"\n                                       v-if=\"incorporacaoId && verificaPermissaoEdicao\"/>\n                    </div>\n                </v-stepper-header>\n\n                <v-divider/>\n\n                <v-stepper-items>\n                    <v-stepper-content\n                        :key=\"`${passo.numero}-content`\"\n                        :step=\"passo.numero\"\n                        v-for=\"passo in passos\">\n                    </v-stepper-content>\n                    <router-view @desabilitaPasso2=\"desabilitaPasso2\"\n                                 @habilitaPasso2=\"habilitaPasso2\"\n                                 @desabilitaPasso3=\"desabilitaPasso3\"\n                                 @habilitaPasso3=\"habilitaPasso3\"\n                    />\n                </v-stepper-items>\n            </v-stepper>\n        </az-container>\n    </div>\n</template>\n\n<script>\n    import {actionTypes, mutationTypes} from '@/core/constants'\n    import {mapActions, mapMutations} from 'vuex'\n    import AzHasPermissions from '@azinformatica/loki/src/utils/AzHasPermissions'\n    import BotaoRemover from '@/views/components/botoes/BotaoRemover'\n\n    export default {\n        name: 'IncorporacaoEdicao',\n        components: {BotaoRemover},\n        data() {\n            return {\n                passos: [\n                    {\n                        titulo: 'Dados Gerais',\n                        rotaPadrao: 'EditarIncorporacao',\n                        rotaVisualizacao: 'VisualizarIncorporacao',\n                        rotaEdicao: 'EditarIncorporacao',\n                        desabilitado: false,\n                        numero: 1,\n                    },\n                    {\n                        titulo: 'Itens',\n                        rotaPadrao: 'ItensIncorporacaoListagem',\n                        rotaVisualizacao: 'VisualizarItensIncorporacao',\n                        rotaEdicao: 'ItensIncorporacaoListagem',\n                        desabilitado: true,\n                        numero: 2,\n                    },\n                    {\n                        titulo: 'Documentos',\n                        rotaPadrao: 'IncorporacaoDocumentosEdicao',\n                        rotaVisualizacao: 'VisualizarIncorporacaoDocumentos',\n                        rotaEdicao: 'IncorporacaoDocumentosEdicao',\n                        desabilitado: true,\n                        numero: 3,\n                    }\n                ],\n                passoAtual: {},\n                incorporacaoId: null,\n                rotaOrigem: this.$store.state.incorporacao.rota.origem,\n                valueToolTip: false,\n                situacaoIncorporacao:''\n            }\n        },\n        computed: {\n            verificaPermissaoEdicao() {\n                return AzHasPermissions(this.$store.state.loki.user.authorities, ['Mobiliario.Normal'])\n            }\n        },\n        watch: {\n            $route() {\n                this.setIncorporacaoId()\n                this.setPassoAtual(this.$route)\n            },\n        },\n        async created() {\n            await this.buscarSituacaoDaIncorporacao()\n            await this.validarIncorporacaoEmModoElaboracao(this.situacaoIncorporacao)\n        },\n        async mounted() {\n            this.retrairMenu()\n            this.setIncorporacaoId()\n            this.setPassoAtual(this.$route)\n        },\n        methods: {\n            ...mapActions([\n                actionTypes.PATRIMONIO.INCORPORACAO.DELETAR_INCORPORACAO,\n                actionTypes.PATRIMONIO.INCORPORACAO.BUSCAR_SITUACAO_INCORPORACAO\n            ]),\n            ...mapMutations([\n                mutationTypes.PATRIMONIO.INCORPORACAO.SET_SITUACAO_INCORPORACAO\n            ]),\n            contralaAcessoAosPassosEmCadaRota() {\n                if (this.$route.name === 'ItensIncorporacaoListagem' || this.$route.name === 'VisualizarItensIncorporacao') {\n                    this.passos[1].desabilitado = false\n                    this.passos[2].desabilitado = true\n                }\n                if (this.$route.name === 'EditarIncorporacao' || this.$route.name === 'VisualizarIncorporacao') {\n                    this.passos[1].desabilitado = true\n                }\n                if (this.$route.name === 'IncorporacaoDocumentosEdicao' || this.$route.name === 'VisualizarIncorporacaoDocumentos') {\n                    this.passos[0].desabilitado = false\n                    this.passos[1].desabilitado = false\n                    this.passos[2].desabilitado = false\n                }\n            },\n            async buscarSituacaoDaIncorporacao() {\n                this.situacaoIncorporacao = await this.buscarSituacaoIncorporacao(this.$route.params.incorporacaoId)\n                this.setSituacaoIncorporacao(this.situacaoIncorporacao)\n            },\n            async validarIncorporacaoEmModoElaboracao(situacaoIncorporacao) {\n                if (situacaoIncorporacao !== 'EM_ELABORACAO' && situacaoIncorporacao !== 'ERRO_PROCESSAMENTO') {\n                    this.mostrarNotificacaoErro('Não é possivel editar esta incorporação!')\n                    await this.$router.replace({name: 'IncorporacaoListagem'})\n                }\n            },\n\n            desabilitaPasso3() {\n                this.passos[2].desabilitado = true\n            },\n            expandirMenu() {\n                this.$store.commit(mutationTypes.COMUM.SET_EXPANDIR_MENU)\n            },\n            habilitaPasso3() {\n                this.passos[2].desabilitado = false\n            },\n            desabilitaPasso2() {\n                this.passos[1].desabilitado = true\n            },\n            habilitaPasso2() {\n                this.passos[1].desabilitado = false\n            },\n            retrairMenu() {\n                this.$store.commit(mutationTypes.COMUM.SET_RETRAIR_MENU)\n            },\n            setIncorporacaoId() {\n                this.incorporacaoId = this.$route.params.incorporacaoId\n            },\n            setPassoAtual(route) {\n                const encontrado = this.passos.filter(\n                    passo =>\n                        passo.rotaPadrao === route.name ||\n                        passo.rotaEdicao === route.name ||\n                        passo.rotaVisualizacao === route.name\n                )\n                this.passoAtual = encontrado[0]\n                this.contralaAcessoAosPassosEmCadaRota()\n            },\n            async tratarEventoDeletarIncorporacao() {\n                await this.deletarIncorporacao(this.incorporacaoId)\n                this.mostrarNotificacaoSucessoDefault()\n                await this.$router.replace({name: this.rotaOrigem})\n            },\n            tratarEventoClick(item) {\n                if (item.desabilitado === false) {\n                    if (this.incorporacaoId) {\n                        if (!this.verificaPermissaoEdicao) {\n                            this.$router.replace({name: item.rotaVisualizacao})\n                        } else {\n                            this.$router.replace({\n                                name: item.rotaEdicao,\n                            })\n                        }\n                    } else {\n                        this.$router.replace({\n                            name: this.rotaOrigem,\n                        })\n                    }\n                }\n            }\n        },\n        destroyed() {\n            this.expandirMenu()\n        }\n    }\n</script>\n\n<style lang=\"stylus\">\n\n.incorporacao-container\n    .v-stepper\n        box-shadow none\n\n        &__content\n            padding 0 15% 0 60%\n\n        &__step__step .v-icon.v-icon\n            font-size .9rem\n\n    .container\n        background-color #fff\n\n    .az-actions-form\n        border-top solid thin rgba(0, 0, 0, .12)\n        padding-top 10px\n        margin-top 0\n\n    &-conteudo\n        min-height 350px\n\n.barra-passo\n    display flex\n    align-items center\n    margin-right 1%\n\n.passo-ativo\n    .v-stepper__step__step\n        background-color #487b9c !important\n        border-color #487b9c !important\n\n</style>\n"],"sourceRoot":"src/views/pages/patrimonios/incorporacao/edicao"}]}