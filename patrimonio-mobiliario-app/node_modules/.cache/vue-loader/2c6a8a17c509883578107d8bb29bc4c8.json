{"remainingRequest":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/pages/movimentacao/movimentacao-interna/edicao/dados-gerais/devolucao-almoxarifado/EdicaoDadosGeraisDevolucaoAlmoxarifado.vue?vue&type=style&index=0&id=10f83a42&lang=stylus&scoped=true&","dependencies":[{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/pages/movimentacao/movimentacao-interna/edicao/dados-gerais/devolucao-almoxarifado/EdicaoDadosGeraisDevolucaoAlmoxarifado.vue","mtime":1616000736864},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.movimentacao-edicao-dados-gerais\n    min-height 62vh\n\n.label-motivo\n    font-size 14px\n    font-weight bold\n    color #555555\n    opacity 0.7\n\n",{"version":3,"sources":["EdicaoDadosGeraisDevolucaoAlmoxarifado.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiVA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"EdicaoDadosGeraisDevolucaoAlmoxarifado.vue","sourceRoot":"src/views/pages/movimentacao/movimentacao-interna/edicao/dados-gerais/devolucao-almoxarifado","sourcesContent":["<template>\n    <div>\n        <v-form ref=\"form\" class=\"az-form-content pb-0\">\n            <v-container class=\"white movimentacao-edicao-dados-gerais\" fluid>\n                <v-row>\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\">\n                        <auto-complete\n                            v-model=\"devolucaoAlmoxarifado.orgao\"\n                            :disabled=\"!verificaPermissaoEdicao\"\n                            :filter=\"filtroComboAutoComplete\"\n                            :items=\"orgaosOrigem\"\n                            :placeholder=\"verificaPermissaoEdicao ? 'Selecione o órgão de origem' : ' '\"\n                            :required=\"true\"\n                            :requiredIcon=\"verificaPermissaoEdicao\"\n                            item-text=\"descricao\"\n                            item-value=\"id\"\n                            label=\"Órgão Responsável\"\n                            name=\"orgao\"\n                            no-data-text=\"Não há órgãos com este nome\"\n                            @change=\"tratarEventoMudancaOrgaoOrigem\"\n                            @changeValue=\"alterarValor\">\n                        </auto-complete>\n                    </v-col>\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\">\n                        <auto-complete\n                            v-model=\"devolucaoAlmoxarifado.setorOrigem\"\n                            :disabled=\"!devolucaoAlmoxarifado.orgao || !verificaPermissaoEdicao\"\n                            :items=\"setoresOrigem\"\n                            :placeholder=\"verificaPermissaoEdicao && devolucaoAlmoxarifado.orgao ? 'Selecione o setor de origem' : ' '\"\n                            :required=\"devolucaoAlmoxarifado.orgao ? 'required' : ''\"\n                            :requiredIcon=\"devolucaoAlmoxarifado.orgao && verificaPermissaoEdicao\"\n                            item-text=\"descricao\"\n                            item-value=\"id\"\n                            label=\"Setor Origem\"\n                            name=\"setorOrigem\"\n                            no-data-text=\"Não há setores com este nome\"\n                            @change=\"editarSetorOrigem\"\n                            @changeValue=\"alterarValor\">\n                        </auto-complete>\n                    </v-col>\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\">\n                        <auto-complete\n                            v-model=\"devolucaoAlmoxarifado.setorDestino\"\n                            :disabled=\"!devolucaoAlmoxarifado.orgao || !verificaPermissaoEdicao\"\n                            :items=\"setoresDestino\"\n                            :placeholder=\"verificaPermissaoEdicao && devolucaoAlmoxarifado.orgao ? 'Selecione o setor de destino' : ' '\"\n                            :required=\"devolucaoAlmoxarifado.orgao ? 'required' : ''\"\n                            :requiredIcon=\"devolucaoAlmoxarifado.orgao && verificaPermissaoEdicao\"\n                            item-text=\"descricao\"\n                            item-value=\"id\"\n                            label=\"Almoxarifado Destino\"\n                            name=\"setorDestino\"\n                            no-data-text=\"Não há setores com este nome\"\n                            @change=\"editarSetorDestino\"\n                            @changeValue=\"alterarValor\">\n                        </auto-complete>\n                    </v-col>\n\n                    <v-col cols=\"12\" md=\"12\" sm=\"12\" xs=\"12\">\n                        <v-textarea\n                            v-model=\"devolucaoAlmoxarifado.motivoObservacao\"\n                            :counter=\"500\"\n                            :error-messages=\"errors.collect('motivoObservacao')\"\n                            auto-grow\n                            class=\"mt-3\"\n                            label=\"Motivo/Obs.\"\n                            maxlength=\"500\"\n                            name=\"motivoObservacao\"\n                            placeholder=\"Digite o motivo\"\n                            rows=\"1\"\n                            @change=\"editarDevolucaoAlmoxarifado\">\n                        </v-textarea>\n                    </v-col>\n\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\">\n                        <v-text-field\n                            v-model=\"devolucaoAlmoxarifado.numeroNotaLancamentoContabil\"\n                            v-mask=\"'####NL######'\"\n                            v-validate=\"'max:12'\"\n                            :class=\"{desativado: !verificaPermissaoEdicao}\"\n                            :disabled=\"!verificaPermissaoEdicao\"\n                            :error-messages=\"errors.collect('numeroNotaLancamentoContabil')\"\n                            :placeholder=\"verificaPermissaoEdicao ? placeholders.numeroNotaLancamentoContabil : ' '\"\n                            label=\"Número da NL\"\n                            maxlength=\"12\"\n                            name=\"numeroNotaLancamentoContabil\"\n                            @change=\"editarDevolucaoAlmoxarifado\">\n                        </v-text-field>\n                    </v-col>\n\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\">\n                        <az-date\n                            v-model=\"devolucaoAlmoxarifado.dataNotaLancamentoContabil\"\n                            :class=\"{desativado: !verificaPermissaoEdicao}\"\n                            :error-messages=\"errors.collect('dataNotaLancamentoContabil')\"\n                            :is-disabled=\"!verificaPermissaoEdicao\"\n                            :max-date=\"moment(new Date()).format('YYYY-MM-DDTHH:mm:ssZZ')\"\n                            :placeholderDate=\"(devolucaoAlmoxarifado.dataNotaLancamentoContabil) ? ' ' : placeholders.date\"\n                            date\n                            label=\"Data da NL\"\n                            name-date=\"dataNotaLancamentoContabil\"\n                            @input=\"editarDevolucaoAlmoxarifado\">\n                        </az-date>\n                    </v-col>\n\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\">\n                        <v-text-field\n                            v-model=\"devolucaoAlmoxarifado.numeroProcesso\"\n                            v-validate=\"'max:100'\"\n                            :class=\"{desativado: !verificaPermissaoEdicao}\"\n                            :counter=\"100\"\n                            :disabled=\"!verificaPermissaoEdicao\"\n                            :error-messages=\"errors.collect('numeroProcesso')\"\n                            :placeholder=\"verificaPermissaoEdicao ? 'Informe o número' : ' '\"\n                            label=\"N° Processo\"\n                            maxlength=\"100\"\n                            name=\"numeroProcesso\"\n                            @change=\"editarDevolucaoAlmoxarifado\">\n                        </v-text-field>\n                    </v-col>\n\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\">\n                        <v-autocomplete\n                            v-model=\"devolucaoAlmoxarifado.responsavel\"\n                            :class=\"{desativado: !verificaPermissaoEdicao}\"\n                            :disabled=\"!verificaPermissaoEdicao\"\n                            :error-messages=\"errors.collect('responsavel')\"\n                            :items=\"responsaveis\"\n                            item-text=\"nome\"\n                            item-value=\"id\"\n                            label=\"Responsável\"\n                            name=\"responsavel\"\n                            no-data-text=\"Não há responśaveis com esse nome\"\n                            placeholder=\"Selecione o responsável\"\n                            @change=\"editarDevolucaoAlmoxarifado\">\n                        </v-autocomplete>\n                    </v-col>\n                </v-row>\n            </v-container>\n        </v-form>\n        <acoes-botoes-continuar-voltar :controleContinuar=\"podeContinuar\" @continuar=\"continuar\" @voltar=\"voltar\"/>\n    </div>\n</template>\n\n<script>\n    import {actionTypes, mutationTypes} from '@/core/constants'\n    import {mapActions} from 'vuex'\n    import AzHasPermissions from '@azinformatica/loki/src/utils/AzHasPermissions'\n    import AcoesBotoesContinuarVoltar from '@/views/components/acoes/AcoesBotoesContinuarVoltar'\n    import AutoComplete from '@/views/components/autocomplete/AutoComplete'\n\n    export default {\n        name: 'EdicaoDadosGeraisDevolucaoAlmoxarifado',\n        components: {AutoComplete, AcoesBotoesContinuarVoltar},\n        data() {\n            return {\n                devolucaoAlmoxarifado: {\n                    responsavel: null\n                },\n                dadosDeEntrada: {},\n                responsaveis: [],\n                orgaosOrigem: [],\n                setoresOrigem: [],\n                setoresDestino: [],\n                placeholders: {\n                    date: '__/__/____',\n                    numeroNotaLancamentoContabil: '____NL_____'\n                }\n            }\n        },\n        async mounted() {\n            await this.buscarDevolucaoAlmoxarifado()\n            await this.buscarOrgaosOrigem()\n            await this.buscarResponsaveis()\n        },\n        computed: {\n            verificaPermissaoEdicao() {\n                return AzHasPermissions(this.$store.state.loki.user.authorities, ['Mobiliario.Movimentacoes'])\n            },\n            podeContinuar() {\n                if (this.devolucaoAlmoxarifado.orgao && this.devolucaoAlmoxarifado.setorOrigem && this.devolucaoAlmoxarifado.setorDestino) {\n                    this.habilitaPasso3()\n                    return true\n                } else {\n                    this.desabilitaPasso3()\n                    return false\n                }\n            }\n        },\n        methods: {\n            ...mapActions({\n                buscarTodosOrgaosOrigem: actionTypes.COMUM.BUSCAR_TODOS_ORGAOS,\n                buscarTodosResponsaveis: actionTypes.RESPONSAVEL.BUSCAR_TODOS_RESPONSAVEIS\n            }),\n            ...mapActions([\n                actionTypes.COMUM.BUSCAR_SETORES_ALMOXARIFADO,\n                actionTypes.COMUM.BUSCAR_SETORES_NAO_ALMOXARIFADO,\n                actionTypes.MOVIMENTACAO_INTERNA.DEVOLUCAO_ALMOXARIFADO.ATUALIZAR_DEVOLUCAO_ALMOXARIFADO,\n                actionTypes.MOVIMENTACAO_INTERNA.DEVOLUCAO_ALMOXARIFADO.BUSCAR_DEVOLUCAO_ALMOXARIFADO_POR_ID\n            ]),\n            habilitaPasso3() {\n                this.$emit('habilitaPasso3')\n            },\n            desabilitaPasso3() {\n                this.$emit('desabilitaPasso3')\n            },\n            voltar() {\n                this.$router.replace({name: 'MovimentacaoInternaEdicaoTipo'})\n            },\n            continuar() {\n                this.$router.replace({\n                    name: 'MovimentacaoInternaEdicaoItens',\n                    params: {movimentacaoInternaId: this.$route.params.movimentacaoInternaId}\n                })\n            },\n            filtroComboAutoComplete(item, queryText) {\n                if (item && item.nome && item.sigla) {\n                    const text = item.nome.toLowerCase()\n                    const textSigla = item.sigla.toLowerCase()\n                    const searchText = queryText.toLowerCase()\n                    return (text.indexOf(searchText) > -1 || textSigla.indexOf(searchText) > -1)\n                }\n                return false\n            },\n            async buscarOrgaosOrigem() {\n                this.desabilitarLoadingGlobal()\n                const resultado = await this.buscarTodosOrgaosOrigem()\n                this.habilitarLoadingGlobal()\n                if (resultado) {\n                    this.orgaosOrigem = resultado.items\n                    await this.selecionaOrgaoSeArrayConterApenasUmOrgaoOrigem(this.orgaosOrigem)\n                }\n            },\n            async buscarSetoresOrigem() {\n                this.setoresOrigem = []\n                if (this.devolucaoAlmoxarifado.orgao) {\n                    this.desabilitarLoadingGlobal()\n                    const resultado = await this.buscarSetoresNaoAlmoxarifado(this.devolucaoAlmoxarifado.orgao)\n                    this.habilitarLoadingGlobal()\n                    this.setoresOrigem = resultado.items\n                    this.selecionaSetorSeArrayConterApenasUmSetorOrigem(this.setoresOrigem)\n                }\n            },\n            async buscarSetoresDestino() {\n                this.setoresDestino = []\n                if (this.devolucaoAlmoxarifado.orgao) {\n                    this.desabilitarLoadingGlobal()\n                    const resultado = await this.buscarSetoresAlmoxarifado(this.devolucaoAlmoxarifado.orgao)\n                    this.habilitarLoadingGlobal()\n                    this.setoresDestino = resultado.items\n                    this.selecionaSetorSeArrayConterApenasUmSetorDestino(this.setoresDestino)\n                }\n            },\n            async buscarResponsaveis() {\n                const resposta = await this.buscarTodosResponsaveis()\n                this.responsaveis = resposta.items\n            },\n            selecionaSetorSeArrayConterApenasUmSetorOrigem(setores) {\n                if ((setores.length === 1) && !this.devolucaoAlmoxarifado.setorOrigem) {\n                    this.devolucaoAlmoxarifado.setorOrigem = setores[0].id\n                    this.editarDevolucaoAlmoxarifado()\n                }\n            },\n            selecionaSetorSeArrayConterApenasUmSetorDestino(setores) {\n                if (setores.length === 1 && !this.devolucaoAlmoxarifado.setorDestino) {\n                    this.devolucaoAlmoxarifado.setorDestino = setores[0].id\n                    this.editarDevolucaoAlmoxarifado()\n                }\n            },\n            async selecionaOrgaoSeArrayConterApenasUmOrgaoOrigem(orgaos) {\n                if (orgaos.length === 1 && !this.devolucaoAlmoxarifado.orgao) {\n                    this.devolucaoAlmoxarifado.orgao = orgaos[0].id\n                }\n                await this.trataEventoSelecaoDeOrgaoOrigem()\n            },\n            async editarDevolucaoAlmoxarifado() {\n                this.desabilitarLoadingGlobal()\n                try {\n                    const dadosAtualizados = await this.atualizarDevolucaoAlmoxarifado(this.devolucaoAlmoxarifado)\n                    this.setarDadosAtualizados(dadosAtualizados)\n                } catch (err) {\n                    this.mostrarNotificacaoErro(err.response.data.message)\n                    this.$store.commit(mutationTypes.LOKI.DISABLE_AUTO_SAVING)\n                    await this.buscarDevolucaoAlmoxarifado()\n                }\n                this.habilitarLoadingGlobal()\n            },\n            async buscarDevolucaoAlmoxarifado() {\n                this.desabilitarLoadingGlobal()\n                this.devolucaoAlmoxarifado = await this.buscarDevolucaoAlmoxarifadoPorId(this.$route.params.movimentacaoInternaId)\n                this.habilitarLoadingGlobal()\n            },\n            editarSetorOrigem(setorOrigem) {\n                if (setorOrigem) {\n                    if (setorOrigem !== this.devolucaoAlmoxarifado.setorDestino) {\n                        this.devolucaoAlmoxarifado.setorOrigem = setorOrigem\n                        this.editarDevolucaoAlmoxarifado()\n                    }\n                }\n            },\n            editarSetorDestino(setorDestino) {\n                if (setorDestino) {\n                    if (setorDestino !== this.devolucaoAlmoxarifado.setorOrigem) {\n                        this.devolucaoAlmoxarifado.setorDestino = setorDestino\n                        this.editarDevolucaoAlmoxarifado()\n                    }\n                }\n            },\n            async trataEventoSelecaoDeOrgaoOrigem() {\n                await this.editarDevolucaoAlmoxarifado()\n                await this.buscarSetoresOrigem()\n                await this.buscarSetoresDestino()\n            },\n            async tratarEventoMudancaOrgaoOrigem() {\n                this.anulaSetoresAoMudarOrgao()\n                this.limparListaSetores()\n                await this.trataEventoSelecaoDeOrgaoOrigem()\n            },\n            anulaSetoresAoMudarOrgao() {\n                this.devolucaoAlmoxarifado.setorOrigem = null\n                this.devolucaoAlmoxarifado.setorDestino = null\n            },\n            limparListaSetores() {\n                this.setoresOrigem = []\n                this.setoresDestino = []\n            },\n            setarDadosAtualizados(dados) {\n                this.verificarMudancasPropriedades(dados, this.dadosDeEntrada, this.devolucaoAlmoxarifado)\n            },\n            alterarValor(chave, valor) {\n                this.devolucaoAlmoxarifado[chave] = valor\n            }\n        }\n    }\n</script>\n\n<style lang=\"stylus\" scoped>\n.movimentacao-edicao-dados-gerais\n    min-height 62vh\n\n.label-motivo\n    font-size 14px\n    font-weight bold\n    color #555555\n    opacity 0.7\n\n</style>\n"]}]}