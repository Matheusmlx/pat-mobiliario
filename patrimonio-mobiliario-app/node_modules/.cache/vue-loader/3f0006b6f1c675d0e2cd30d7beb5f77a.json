{"remainingRequest":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/pages/movimentacao/movimentacao-interna/edicao/item/MovimentacaoInternaListagemItens.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/pages/movimentacao/movimentacao-interna/edicao/item/MovimentacaoInternaListagemItens.vue","mtime":1615573914669},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {actionTypes, mutationTypes} from '@/core/constants'\nimport {mapActions, mapMutations} from 'vuex'\nimport AzHasPermissions from '@azinformatica/loki/src/utils/AzHasPermissions'\nimport Paginacao from '@/views/components/tabela/Paginacao'\nimport BotaoRemover from '@/views/components/botoes/BotaoRemover'\nimport LabelPersonalizado from '@/views/components/label/LabelPersonalizado'\nimport BotaoAdicionarPatrimonio from '@/views/components/botoes/BotaoAdicionarPatrimonio'\n\nexport default {\n    name: 'MovimentacaoInternaListagemItens',\n    props: ['itens', 'paginas', 'totalItens'],\n    components: {Paginacao, BotaoRemover, BotaoAdicionarPatrimonio, LabelPersonalizado},\n    data() {\n        return {\n            paginacaoInterna: this.$store.state.movimentacaoInternaItem.resultadoBuscaTodosItensAdicionadosMovimentacaoInterna.paginacao,\n            nomeTela: 'MOVIMENTACAO_INTERNA_ITENS',\n            nomeTelaPatrimonio: 'INCORPORACAO_ITEM_LISTAGEM_PATRMONIO',\n            colunasTabela: []\n        }\n    },\n    watch: {\n        paginacaoInterna: {\n            handler(novoValor) {\n                this.tratarEventoPaginar(novoValor)\n            },\n            deep: true,\n        },\n    },\n    computed: {\n        existeItens() {\n            return (this.totalItens > 0)\n        },\n        verificaPermissaoEdicao() {\n            return AzHasPermissions(this.$store.state.loki.user.authorities, ['Mobiliario.Movimentacoes'])\n        }\n    },\n    async mounted() {\n        this.colunasTabela = await this.obterColunasTabela()\n    },\n    methods: {\n        ...mapActions([\n            actionTypes.MOVIMENTACAO_INTERNA.ITEM.DELETAR_ITEM_MOVIMENTACAO_INTERNA,\n            actionTypes.MOVIMENTACAO_INTERNA.BUSCAR_TIPO_MOVIMENTACAO_INTERNA\n        ]),\n        ...mapMutations([\n            mutationTypes.MOVIMENTACAO_INTERNA.ITEM.SET_PAGINACAO_BUSCA_TODOS_ITENS_ADICIONADOS_MOVIMENTACAO_INTERNA,\n            mutationTypes.MOVIMENTACAO_INTERNA.ITEM.RESETA_PAGE_BUSCA_TODOS_ITENS_ADICIONADOS_MOVIMENTACAO_INTERNA\n        ]),\n        adicionarItem(){\n            this.$emit('adicionarItem')\n        },\n        buscar() {\n            this.$emit('buscarTodosItens')\n        },\n        async tratarEventoDeletarItem(patrimonioId) {\n            if (!this.verificaPermissaoEdicao) return\n            const data = {movimentacaoInternaId: this.$route.params.movimentacaoInternaId, itemId: patrimonioId}\n            await this.deletarItemMovimentacaoInterna(data)\n            this.buscar()\n        },\n        tratarEventoPaginar(paginacao) {\n            this.setPaginacaoBuscaTodosItensAdicionadosMovimentacaoInterna(paginacao)\n            this.buscar()\n        },\n        resetaPage() {\n            this.resetaPageBuscaTodosItensAdicionadosMovimentacaoInterna()\n        },\n        async obterTipoMovimentacaoInterna() {\n            return this.buscarTipoMovimentacaoInterna(this.$route.params.movimentacaoInternaId)\n        },\n        async obterColunasTabela() {\n            const tipoMovimentacaoInterna = await this.obterTipoMovimentacaoInterna()\n            if (tipoMovimentacaoInterna === 'DISTRIBUICAO') {\n                return this.criarColunas(4,\n                                         [],\n                                         ['patrimonioNumero','patrimonioDescricao','incorporacaoCodigo','acoes'],\n                                         [false,false,false,false],\n                                         ['left','left','left','right'],\n                                         ['15%','55%','20%','10%'],\n                                         'gray--text')\n            }\n            return this.criarColunas(3,\n                                     [],\n                                     ['patrimonioNumero','patrimonioDescricao','acoes'],\n                                     [false,false,false],\n                                     ['left','left','right'],\n                                     ['13%','70%','20%'],\n                                     'gray--text')\n        }\n    }\n}\n",{"version":3,"sources":["MovimentacaoInternaListagemItens.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MovimentacaoInternaListagemItens.vue","sourceRoot":"src/views/pages/movimentacao/movimentacao-interna/edicao/item","sourcesContent":["<template>\n    <div>\n        <div class=\"itens-listagem-tabela-itens-movimentacao\">\n            <v-col md=\"12\" sm=\"12\" xs=\"12\" class=\"d-flex align-end justify-end pb-0\">\n                <botao-adicionar-patrimonio @adicionarPatrimonio=\"adicionarItem\" :desabilitar=\"!verificaPermissaoEdicao\" />\n            </v-col>\n\n            <az-container class=\"mt-0\">\n                <az-form class=\"movimentacao-interna-itens-tabela\">\n                    <v-data-table\n                        ref=\"table\"\n                        :headers=\"colunasTabela\"\n                        :items=\"itens\"\n                        :server-items-length=\"totalItens\"\n                        :options.sync=\"paginacaoInterna\"\n                        no-data-text=\"Não há patrimônios adicionados\"\n                        class=\"az-table-lista pr-tabela-movimentacao-interna-itens item-movimentacao-listagem-tabela\"\n                        hide-default-footer>\n                        <template v-slot:header.patrimonioNumero>\n                            <label-personalizado campo=\"numero\" :tela=\"nomeTelaPatrimonio\" apenasNome/>\n                        </template>\n                        <template v-slot:header.patrimonioDescricao>\n                            <label-personalizado campo=\"descricao\" :tela=\"nomeTela\" apenasNome/>\n                        </template>\n                        <template v-slot:header.incorporacaoCodigo>\n                            <label-personalizado campo=\"incorporacao\" :tela=\"nomeTela\" apenasNome/>\n                        </template>\n                        <template v-slot:item.patrimonioNumero=\"{item}\">\n                            <span class=\"d-inline-block text-truncate max-10\">{{ item.patrimonioNumero | textoSemValor }}</span>\n                        </template>\n                        <template v-slot:item.patrimonioDescricao=\"{item}\">\n                            <span class=\"d-inline-block text-truncate max-50\">{{ item.patrimonioDescricao | textoSemValor }}</span>\n                        </template>\n                        <template v-slot:item.incorporacaoCodigo=\"{item}\">\n                            <span class=\"d-inline-block text-truncate max-10\">{{ item.incorporacaoCodigo | textoSemValor }}</span>\n                        </template>\n                        <template v-slot:item.acoes=\"{item}\">\n                            <botao-remover v-if=\"verificaPermissaoEdicao\" @remover=\"tratarEventoDeletarItem(item.patrimonioId)\"\n                                           class=\"botao-excluir-item-movimentacao\"/>\n                        </template>\n                    </v-data-table>\n                    <paginacao :paginacao-interna=\"paginacaoInterna\" :paginas=\"paginas\" @resetaPage=\"resetaPage\"/>\n                </az-form>\n            </az-container>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {actionTypes, mutationTypes} from '@/core/constants'\n    import {mapActions, mapMutations} from 'vuex'\n    import AzHasPermissions from '@azinformatica/loki/src/utils/AzHasPermissions'\n    import Paginacao from '@/views/components/tabela/Paginacao'\n    import BotaoRemover from '@/views/components/botoes/BotaoRemover'\n    import LabelPersonalizado from '@/views/components/label/LabelPersonalizado'\n    import BotaoAdicionarPatrimonio from '@/views/components/botoes/BotaoAdicionarPatrimonio'\n\n    export default {\n        name: 'MovimentacaoInternaListagemItens',\n        props: ['itens', 'paginas', 'totalItens'],\n        components: {Paginacao, BotaoRemover, BotaoAdicionarPatrimonio, LabelPersonalizado},\n        data() {\n            return {\n                paginacaoInterna: this.$store.state.movimentacaoInternaItem.resultadoBuscaTodosItensAdicionadosMovimentacaoInterna.paginacao,\n                nomeTela: 'MOVIMENTACAO_INTERNA_ITENS',\n                nomeTelaPatrimonio: 'INCORPORACAO_ITEM_LISTAGEM_PATRMONIO',\n                colunasTabela: []\n            }\n        },\n        watch: {\n            paginacaoInterna: {\n                handler(novoValor) {\n                    this.tratarEventoPaginar(novoValor)\n                },\n                deep: true,\n            },\n        },\n        computed: {\n            existeItens() {\n                return (this.totalItens > 0)\n            },\n            verificaPermissaoEdicao() {\n                return AzHasPermissions(this.$store.state.loki.user.authorities, ['Mobiliario.Movimentacoes'])\n            }\n        },\n        async mounted() {\n            this.colunasTabela = await this.obterColunasTabela()\n        },\n        methods: {\n            ...mapActions([\n                actionTypes.MOVIMENTACAO_INTERNA.ITEM.DELETAR_ITEM_MOVIMENTACAO_INTERNA,\n                actionTypes.MOVIMENTACAO_INTERNA.BUSCAR_TIPO_MOVIMENTACAO_INTERNA\n            ]),\n            ...mapMutations([\n                mutationTypes.MOVIMENTACAO_INTERNA.ITEM.SET_PAGINACAO_BUSCA_TODOS_ITENS_ADICIONADOS_MOVIMENTACAO_INTERNA,\n                mutationTypes.MOVIMENTACAO_INTERNA.ITEM.RESETA_PAGE_BUSCA_TODOS_ITENS_ADICIONADOS_MOVIMENTACAO_INTERNA\n            ]),\n            adicionarItem(){\n                this.$emit('adicionarItem')\n            },\n            buscar() {\n                this.$emit('buscarTodosItens')\n            },\n            async tratarEventoDeletarItem(patrimonioId) {\n                if (!this.verificaPermissaoEdicao) return\n                const data = {movimentacaoInternaId: this.$route.params.movimentacaoInternaId, itemId: patrimonioId}\n                await this.deletarItemMovimentacaoInterna(data)\n                this.buscar()\n            },\n            tratarEventoPaginar(paginacao) {\n                this.setPaginacaoBuscaTodosItensAdicionadosMovimentacaoInterna(paginacao)\n                this.buscar()\n            },\n            resetaPage() {\n                this.resetaPageBuscaTodosItensAdicionadosMovimentacaoInterna()\n            },\n            async obterTipoMovimentacaoInterna() {\n                return this.buscarTipoMovimentacaoInterna(this.$route.params.movimentacaoInternaId)\n            },\n            async obterColunasTabela() {\n                const tipoMovimentacaoInterna = await this.obterTipoMovimentacaoInterna()\n                if (tipoMovimentacaoInterna === 'DISTRIBUICAO') {\n                    return this.criarColunas(4,\n                                             [],\n                                             ['patrimonioNumero','patrimonioDescricao','incorporacaoCodigo','acoes'],\n                                             [false,false,false,false],\n                                             ['left','left','left','right'],\n                                             ['15%','55%','20%','10%'],\n                                             'gray--text')\n                }\n                return this.criarColunas(3,\n                                         [],\n                                         ['patrimonioNumero','patrimonioDescricao','acoes'],\n                                         [false,false,false],\n                                         ['left','left','right'],\n                                         ['13%','70%','20%'],\n                                         'gray--text')\n            }\n        }\n    }\n</script>\n\n<style lang=\"stylus\">\n.item-movimentacao-listagem-tabela\n    min-height 50vh\n\n.itens-listagem-tabela-itens-movimentacao\n    min-height 62vh\n\n.itens-movimentacao-toolbar\n    background-color white\n\n.movimentacao-interna-itens-tabela\n    padding 0px\n\n.pr-tabela-movimentacao-interna-itens\n    th\n        font-size 13px !important\n        font-weight bold\n        color #666666 !important\n\n    tr\n        height 55px !important\n\n    td\n        margin-top 15px !important\n        padding 0 16px !important\n\n\n.v-data-table button\n    visibility visible !important\n    margin 0px !important\n\n.az-table-lista\n    color #777 !important\n\n.pr-tabela-movimentacao-interna-itens td:hover\n    cursor default !important\n\n.max-10\n    max-width 10vw\n\n.max-50\n    max-width 50vw\n\n.alinhamentoFiltragem\n    margin-top -20px !important\n\n.botao-excluir-item-movimentacao\n    padding 0 15% 2% 60%\n\n@media (max-width: 720px)\n    .max-10, .max-25\n        max-width 50vw !important\n\n</style>\n\n"]}]}