{"remainingRequest":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/pages/patrimonios/incorporacao/edicao/IncorporacaoEdicao.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/pages/patrimonios/incorporacao/edicao/IncorporacaoEdicao.vue","mtime":1617113267647},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {actionTypes, mutationTypes} from '@/core/constants'\nimport {mapActions, mapMutations} from 'vuex'\nimport AzHasPermissions from '@azinformatica/loki/src/utils/AzHasPermissions'\nimport BotaoRemover from '@/views/components/botoes/BotaoRemover'\n\nexport default {\n    name: 'IncorporacaoEdicao',\n    components: {BotaoRemover},\n    data() {\n        return {\n            passos: [\n                {\n                    titulo: 'Dados Gerais',\n                    rotaPadrao: 'EditarIncorporacao',\n                    rotaVisualizacao: 'VisualizarIncorporacao',\n                    rotaEdicao: 'EditarIncorporacao',\n                    desabilitado: false,\n                    numero: 1,\n                },\n                {\n                    titulo: 'Itens',\n                    rotaPadrao: 'ItensIncorporacaoListagem',\n                    rotaVisualizacao: 'VisualizarItensIncorporacao',\n                    rotaEdicao: 'ItensIncorporacaoListagem',\n                    desabilitado: true,\n                    numero: 2,\n                },\n                {\n                    titulo: 'Documentos',\n                    rotaPadrao: 'IncorporacaoDocumentosEdicao',\n                    rotaVisualizacao: 'VisualizarIncorporacaoDocumentos',\n                    rotaEdicao: 'IncorporacaoDocumentosEdicao',\n                    desabilitado: true,\n                    numero: 3,\n                }\n            ],\n            passoAtual: {},\n            incorporacaoId: null,\n            rotaOrigem: this.$store.state.incorporacao.rota.origem,\n            valueToolTip: false,\n            situacaoIncorporacao:''\n        }\n    },\n    computed: {\n        verificaPermissaoEdicao() {\n            return AzHasPermissions(this.$store.state.loki.user.authorities, ['Mobiliario.Normal'])\n        }\n    },\n    watch: {\n        $route() {\n            this.setIncorporacaoId()\n            this.setPassoAtual(this.$route)\n        },\n    },\n    async created() {\n        await this.buscarSituacaoDaIncorporacao()\n        await this.validarIncorporacaoEmModoElaboracao(this.situacaoIncorporacao)\n    },\n    async mounted() {\n        this.retrairMenu()\n        this.setIncorporacaoId()\n        this.setPassoAtual(this.$route)\n    },\n    methods: {\n        ...mapActions([\n            actionTypes.PATRIMONIO.INCORPORACAO.DELETAR_INCORPORACAO,\n            actionTypes.PATRIMONIO.INCORPORACAO.BUSCAR_SITUACAO_INCORPORACAO\n        ]),\n        ...mapMutations([\n            mutationTypes.PATRIMONIO.INCORPORACAO.SET_SITUACAO_INCORPORACAO\n        ]),\n        contralaAcessoAosPassosEmCadaRota() {\n            if (this.$route.name === 'ItensIncorporacaoListagem' || this.$route.name === 'VisualizarItensIncorporacao') {\n                this.passos[1].desabilitado = false\n                this.passos[2].desabilitado = true\n            }\n            if (this.$route.name === 'EditarIncorporacao' || this.$route.name === 'VisualizarIncorporacao') {\n                this.passos[1].desabilitado = true\n            }\n            if (this.$route.name === 'IncorporacaoDocumentosEdicao' || this.$route.name === 'VisualizarIncorporacaoDocumentos') {\n                this.passos[0].desabilitado = false\n                this.passos[1].desabilitado = false\n                this.passos[2].desabilitado = false\n            }\n        },\n        async buscarSituacaoDaIncorporacao() {\n            this.situacaoIncorporacao = await this.buscarSituacaoIncorporacao(this.$route.params.incorporacaoId)\n            this.setSituacaoIncorporacao(this.situacaoIncorporacao)\n        },\n        async validarIncorporacaoEmModoElaboracao(situacaoIncorporacao) {\n            if (situacaoIncorporacao !== 'EM_ELABORACAO' && situacaoIncorporacao !== 'ERRO_PROCESSAMENTO') {\n                this.mostrarNotificacaoErro('Não é possivel editar esta incorporação!')\n                await this.$router.replace({name: 'IncorporacaoListagem'})\n            }\n        },\n\n        desabilitaPasso3() {\n            this.passos[2].desabilitado = true\n        },\n        expandirMenu() {\n            this.$store.commit(mutationTypes.COMUM.SET_EXPANDIR_MENU)\n        },\n        habilitaPasso3() {\n            this.passos[2].desabilitado = false\n        },\n        desabilitaPasso2() {\n            this.passos[1].desabilitado = true\n        },\n        habilitaPasso2() {\n            this.passos[1].desabilitado = false\n        },\n        retrairMenu() {\n            this.$store.commit(mutationTypes.COMUM.SET_RETRAIR_MENU)\n        },\n        setIncorporacaoId() {\n            this.incorporacaoId = this.$route.params.incorporacaoId\n        },\n        setPassoAtual(route) {\n            const encontrado = this.passos.filter(\n                passo =>\n                    passo.rotaPadrao === route.name ||\n                    passo.rotaEdicao === route.name ||\n                    passo.rotaVisualizacao === route.name\n            )\n            this.passoAtual = encontrado[0]\n            this.contralaAcessoAosPassosEmCadaRota()\n        },\n        async tratarEventoDeletarIncorporacao() {\n            await this.deletarIncorporacao(this.incorporacaoId)\n            this.mostrarNotificacaoSucessoDefault()\n            await this.$router.replace({name: this.rotaOrigem})\n        },\n        tratarEventoClick(item) {\n            if (item.desabilitado === false) {\n                if (this.incorporacaoId) {\n                    if (!this.verificaPermissaoEdicao) {\n                        this.$router.replace({name: item.rotaVisualizacao})\n                    } else {\n                        this.$router.replace({\n                            name: item.rotaEdicao,\n                        })\n                    }\n                } else {\n                    this.$router.replace({\n                        name: this.rotaOrigem,\n                    })\n                }\n            }\n        }\n    },\n    destroyed() {\n        this.expandirMenu()\n    }\n}\n",{"version":3,"sources":["IncorporacaoEdicao.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"IncorporacaoEdicao.vue","sourceRoot":"src/views/pages/patrimonios/incorporacao/edicao","sourcesContent":["<template>\n    <div>\n        <az-back-button :route=\"{ name: rotaOrigem }\" text=\"Voltar para listagem\"/>\n\n        <az-container class=\"incorporacao-container\">\n            <v-stepper v-model=\"passoAtual.numero\">\n                <v-stepper-header class=\"elevation-0 barra-passo\">\n                    <v-spacer/>\n\n                    <v-stepper-step\n                        :complete=\"passos[0].numero < passoAtual.numero\"\n                        :disabled=\"passos[0].desabilitado\"\n                        :editable=\"!passos[0].desabilitado\"\n                        :key=\"`${passos[0].numero}-header`\"\n                        :step=\"passos[0].numero\"\n                        @click=\"tratarEventoClick(passos[0])\"\n                        edit-icon=\"fas fa-check\">\n                        {{ passos[0].titulo }}\n                    </v-stepper-step>\n\n                    <v-divider/>\n\n                    <v-tooltip\n                        nudge-left=\"10\"\n                        nudge-top=\"-22\"\n                        max-width=\"200\"\n                        top>\n                        <template v-slot:activator=\"{ on }\">\n                            <div v-on=\"on\" v-show=\"passos[1].desabilitado\">\n                                <v-stepper-step\n                                    :complete=\"passos[1].numero < passoAtual.numero\"\n                                    :disabled=\"passos[1].desabilitado\"\n                                    :editable=\"!passos[1].desabilitado\"\n                                    :key=\"`${passos[1].numero}-header`\"\n                                    :step=\"passos[1].numero\"\n                                    @click=\"tratarEventoClick(passos[1])\"\n                                    edit-icon=\"fas fa-check\"\n                                    :class=\"{'passo-ativo' : !passos[1].desabilitado}\"\n                                >{{ passos[1].titulo }}\n                                </v-stepper-step>\n                            </div>\n                            <v-stepper-step\n                                :complete=\"passos[1].numero < passoAtual.numero\"\n                                :disabled=\"passos[1].desabilitado\"\n                                :editable=\"!passos[1].desabilitado\"\n                                :key=\"`${passos[1].numero}-header`\"\n                                :step=\"passos[1].numero\"\n                                @click=\"tratarEventoClick(passos[1])\"\n                                edit-icon=\"fas fa-check\"\n                                v-show=\"!passos[1].desabilitado\"\n                                :class=\"{'passo-ativo' : !passos[1].desabilitado}\"\n                            >{{ passos[1].titulo }}\n                            </v-stepper-step>\n                        </template>\n                        É necessário que todos os campos obrigatórios sejam preenchidos para continuar.\n                    </v-tooltip>\n\n                    <v-divider/>\n\n                    <v-tooltip\n                        nudge-left=\"10\"\n                        nudge-top=\"-20\"\n                        max-width=\"200\"\n                        top>\n                        <template v-slot:activator=\"{ on }\">\n                            <div v-on=\"on\" v-show=\"passos[2].desabilitado && !passos[1].desabilitado\">\n                                <v-stepper-step\n                                    :complete=\"passos[2].numero < passoAtual.numero\"\n                                    :disabled=\"passos[2].desabilitado\"\n                                    :editable=\"!passos[2].desabilitado\"\n                                    :key=\"`${passos[2].numero}-header`\"\n                                    :step=\"passos[2].numero\"\n                                    @click=\"tratarEventoClick(passos[2])\"\n                                    edit-icon=\"fas fa-check\"\n                                    :class=\"{'passo-ativo' : !passos[2].desabilitado}\"\n                                >{{ passos[2].titulo }}\n                                </v-stepper-step>\n                            </div>\n                            <v-stepper-step\n                                :complete=\"passos[2].numero < passoAtual.numero\"\n                                :disabled=\"passos[2].desabilitado\"\n                                :editable=\"!passos[2].desabilitado\"\n                                :key=\"`${passos[2].numero}-header`\"\n                                :step=\"passos[2].numero\"\n                                @click=\"tratarEventoClick(passos[2])\"\n                                edit-icon=\"fas fa-check\"\n                                v-show=\"!passos[2].desabilitado || passos[1].desabilitado\"\n                                :class=\"{'passo-ativo' : !passos[2].desabilitado}\"\n                            >{{ passos[2].titulo }}\n                            </v-stepper-step>\n                        </template>\n                        É necessário que todos os campos obrigatórios sejam preenchidos para continuar.\n                    </v-tooltip>\n\n                    <v-spacer/>\n\n                    <div>\n                        <botao-remover @remover=\"tratarEventoDeletarIncorporacao\"\n                                       v-if=\"incorporacaoId && verificaPermissaoEdicao\"/>\n                    </div>\n                </v-stepper-header>\n\n                <v-divider/>\n\n                <v-stepper-items>\n                    <v-stepper-content\n                        :key=\"`${passo.numero}-content`\"\n                        :step=\"passo.numero\"\n                        v-for=\"passo in passos\">\n                    </v-stepper-content>\n                    <router-view @desabilitaPasso2=\"desabilitaPasso2\"\n                                 @habilitaPasso2=\"habilitaPasso2\"\n                                 @desabilitaPasso3=\"desabilitaPasso3\"\n                                 @habilitaPasso3=\"habilitaPasso3\"\n                    />\n                </v-stepper-items>\n            </v-stepper>\n        </az-container>\n    </div>\n</template>\n\n<script>\n    import {actionTypes, mutationTypes} from '@/core/constants'\n    import {mapActions, mapMutations} from 'vuex'\n    import AzHasPermissions from '@azinformatica/loki/src/utils/AzHasPermissions'\n    import BotaoRemover from '@/views/components/botoes/BotaoRemover'\n\n    export default {\n        name: 'IncorporacaoEdicao',\n        components: {BotaoRemover},\n        data() {\n            return {\n                passos: [\n                    {\n                        titulo: 'Dados Gerais',\n                        rotaPadrao: 'EditarIncorporacao',\n                        rotaVisualizacao: 'VisualizarIncorporacao',\n                        rotaEdicao: 'EditarIncorporacao',\n                        desabilitado: false,\n                        numero: 1,\n                    },\n                    {\n                        titulo: 'Itens',\n                        rotaPadrao: 'ItensIncorporacaoListagem',\n                        rotaVisualizacao: 'VisualizarItensIncorporacao',\n                        rotaEdicao: 'ItensIncorporacaoListagem',\n                        desabilitado: true,\n                        numero: 2,\n                    },\n                    {\n                        titulo: 'Documentos',\n                        rotaPadrao: 'IncorporacaoDocumentosEdicao',\n                        rotaVisualizacao: 'VisualizarIncorporacaoDocumentos',\n                        rotaEdicao: 'IncorporacaoDocumentosEdicao',\n                        desabilitado: true,\n                        numero: 3,\n                    }\n                ],\n                passoAtual: {},\n                incorporacaoId: null,\n                rotaOrigem: this.$store.state.incorporacao.rota.origem,\n                valueToolTip: false,\n                situacaoIncorporacao:''\n            }\n        },\n        computed: {\n            verificaPermissaoEdicao() {\n                return AzHasPermissions(this.$store.state.loki.user.authorities, ['Mobiliario.Normal'])\n            }\n        },\n        watch: {\n            $route() {\n                this.setIncorporacaoId()\n                this.setPassoAtual(this.$route)\n            },\n        },\n        async created() {\n            await this.buscarSituacaoDaIncorporacao()\n            await this.validarIncorporacaoEmModoElaboracao(this.situacaoIncorporacao)\n        },\n        async mounted() {\n            this.retrairMenu()\n            this.setIncorporacaoId()\n            this.setPassoAtual(this.$route)\n        },\n        methods: {\n            ...mapActions([\n                actionTypes.PATRIMONIO.INCORPORACAO.DELETAR_INCORPORACAO,\n                actionTypes.PATRIMONIO.INCORPORACAO.BUSCAR_SITUACAO_INCORPORACAO\n            ]),\n            ...mapMutations([\n                mutationTypes.PATRIMONIO.INCORPORACAO.SET_SITUACAO_INCORPORACAO\n            ]),\n            contralaAcessoAosPassosEmCadaRota() {\n                if (this.$route.name === 'ItensIncorporacaoListagem' || this.$route.name === 'VisualizarItensIncorporacao') {\n                    this.passos[1].desabilitado = false\n                    this.passos[2].desabilitado = true\n                }\n                if (this.$route.name === 'EditarIncorporacao' || this.$route.name === 'VisualizarIncorporacao') {\n                    this.passos[1].desabilitado = true\n                }\n                if (this.$route.name === 'IncorporacaoDocumentosEdicao' || this.$route.name === 'VisualizarIncorporacaoDocumentos') {\n                    this.passos[0].desabilitado = false\n                    this.passos[1].desabilitado = false\n                    this.passos[2].desabilitado = false\n                }\n            },\n            async buscarSituacaoDaIncorporacao() {\n                this.situacaoIncorporacao = await this.buscarSituacaoIncorporacao(this.$route.params.incorporacaoId)\n                this.setSituacaoIncorporacao(this.situacaoIncorporacao)\n            },\n            async validarIncorporacaoEmModoElaboracao(situacaoIncorporacao) {\n                if (situacaoIncorporacao !== 'EM_ELABORACAO' && situacaoIncorporacao !== 'ERRO_PROCESSAMENTO') {\n                    this.mostrarNotificacaoErro('Não é possivel editar esta incorporação!')\n                    await this.$router.replace({name: 'IncorporacaoListagem'})\n                }\n            },\n\n            desabilitaPasso3() {\n                this.passos[2].desabilitado = true\n            },\n            expandirMenu() {\n                this.$store.commit(mutationTypes.COMUM.SET_EXPANDIR_MENU)\n            },\n            habilitaPasso3() {\n                this.passos[2].desabilitado = false\n            },\n            desabilitaPasso2() {\n                this.passos[1].desabilitado = true\n            },\n            habilitaPasso2() {\n                this.passos[1].desabilitado = false\n            },\n            retrairMenu() {\n                this.$store.commit(mutationTypes.COMUM.SET_RETRAIR_MENU)\n            },\n            setIncorporacaoId() {\n                this.incorporacaoId = this.$route.params.incorporacaoId\n            },\n            setPassoAtual(route) {\n                const encontrado = this.passos.filter(\n                    passo =>\n                        passo.rotaPadrao === route.name ||\n                        passo.rotaEdicao === route.name ||\n                        passo.rotaVisualizacao === route.name\n                )\n                this.passoAtual = encontrado[0]\n                this.contralaAcessoAosPassosEmCadaRota()\n            },\n            async tratarEventoDeletarIncorporacao() {\n                await this.deletarIncorporacao(this.incorporacaoId)\n                this.mostrarNotificacaoSucessoDefault()\n                await this.$router.replace({name: this.rotaOrigem})\n            },\n            tratarEventoClick(item) {\n                if (item.desabilitado === false) {\n                    if (this.incorporacaoId) {\n                        if (!this.verificaPermissaoEdicao) {\n                            this.$router.replace({name: item.rotaVisualizacao})\n                        } else {\n                            this.$router.replace({\n                                name: item.rotaEdicao,\n                            })\n                        }\n                    } else {\n                        this.$router.replace({\n                            name: this.rotaOrigem,\n                        })\n                    }\n                }\n            }\n        },\n        destroyed() {\n            this.expandirMenu()\n        }\n    }\n</script>\n\n<style lang=\"stylus\">\n\n.incorporacao-container\n    .v-stepper\n        box-shadow none\n\n        &__content\n            padding 0 15% 0 60%\n\n        &__step__step .v-icon.v-icon\n            font-size .9rem\n\n    .container\n        background-color #fff\n\n    .az-actions-form\n        border-top solid thin rgba(0, 0, 0, .12)\n        padding-top 10px\n        margin-top 0\n\n    &-conteudo\n        min-height 350px\n\n.barra-passo\n    display flex\n    align-items center\n    margin-right 1%\n\n.passo-ativo\n    .v-stepper__step__step\n        background-color #487b9c !important\n        border-color #487b9c !important\n\n</style>\n"]}]}