{"remainingRequest":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/pages/patrimonios/incorporacao/visualizacao/dados-gerais/VisualizarIncorporacao.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/pages/patrimonios/incorporacao/visualizacao/dados-gerais/VisualizarIncorporacao.vue","mtime":1615288963593},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {actionTypes} from '@/core/constants'\nimport Empenho from '@/views/components/empenho/Empenho'\nimport {createNamespacedHelpers, mapActions} from 'vuex'\nimport AzHasPermissions from '@azinformatica/loki/src/utils/AzHasPermissions'\nimport LabelPersonalizado from '@/views/components/label/LabelPersonalizado'\nimport AcoesBotoesContinuarVoltar from '@/views/components/acoes/AcoesBotoesContinuarVoltar'\n\nconst {mapGetters} = createNamespacedHelpers('rotulosPersonalizados')\n\nexport default {\n    name: 'dadosGerais',\n    components: {Empenho, LabelPersonalizado, AcoesBotoesContinuarVoltar},\n    data() {\n        return {\n            dadosDeEntrada: {},\n            empenhos: [{incorporacaoId: this.$route.params.incorporacaoId}],\n            reconhecimentos: [],\n            fornecedores: [],\n            comodantes: [],\n            convenios: [],\n            fundos: [],\n            orgaos: [],\n            setores: [],\n            cnpjPesquisadoContemMascara: false,\n            empenhoObrigatorio: false,\n            notaObrigatorio: false,\n            reconhecimentoInativo: false,\n            fornecedorInativo: false,\n            orgaoInativo: false,\n            setorInativo: false,\n            nomeTela: 'INCORPORACAO_DADOS_GERAIS',\n            labelBtnCancel: 'Remover',\n            cpfCnpj: ''\n        }\n    },\n    async mounted() {\n        await this.buscaIncorporacao()\n        this.trataCamposReconhecimentoFornecedor()\n        this.trataCampoComodante()\n        await this.buscaOrgaos()\n        await this.buscarSetores()\n        this.trataCamposOrgaoSetor()\n        this.verificarSePodeProsseguir()\n        await this.buscarTodosFundos()\n    },\n    computed: {\n        ...mapGetters([\n            'getObrigatorioRotulosPersonalizados',\n            'getIncorporacaoValidado'\n        ]),\n        verificaPermissaoRetroativa() {\n            return AzHasPermissions(this.$store.state.loki.user.authorities, ['Mobiliario.Retroativo'])\n        },\n        dataPermitida() {\n            let date = new Date()\n            return new Date(date.getFullYear(), date.getMonth(), 1)\n        },\n        podeContinuar() {\n            if(this.empenhoObrigatorio){\n                if(!this.verificarSeTodosEmpenhosObrigatoriosEstaoPreenchidos()){\n                    return false\n                }\n            }\n            return this.getIncorporacaoValidado(this.dadosDeEntrada,\n                                                this.dadosDeEntrada.origemConvenio,\n                                                this.dadosDeEntrada.origemFundo,\n                                                this.dadosDeEntrada.origemProjeto,\n                                                this.dadosDeEntrada.origemComodato,\n                                                this.notaObrigatorio,\n                                                this.nomeTela)\n        }\n    },\n    filters: {\n        fornecedorFilter(id, fornecedores) {\n            const encontados = fornecedores.filter(f => f.id === id)\n            return encontados.length > 0 ? encontados[0].nome : ''\n        },\n    },\n    methods: {\n        ...mapActions([\n            actionTypes.COMUM.BUSCAR_FUNDOS,\n            actionTypes.COMUM.BUSCAR_TODOS_ORGAOS,\n            actionTypes.COMUM.BUSCAR_SETORES_ALMOXARIFADO,\n            actionTypes.CONFIGURACAO.RECONHECIMENTO.BUSCAR_RECONHECIMENTOS_AUTO_COMPLETE,\n            actionTypes.PATRIMONIO.INCORPORACAO.EMPENHO.BUSCAR_TODOS_EMPENHOS,\n            actionTypes.PATRIMONIO.INCORPORACAO.EMPENHO.INSERIR_EMPENHO,\n            actionTypes.CONFIGURACAO.CONVENIO.BUSCAR_CONVENIO_POR_ID,\n            actionTypes.PATRIMONIO.INCORPORACAO.BUSCAR_INCORPORACAO_POR_ID\n        ]),\n        async buscaEmpenhos() {\n            const resultado = await this.buscarTodosEmpenhos(this.$route.params.incorporacaoId)\n            if (resultado && resultado.items.length > 0) {\n                this.empenhos = resultado.items\n            }\n            this.verificarSePodeProsseguir()\n        },\n        async buscaIncorporacao() {\n            this.dadosDeEntrada = await this.buscarIncorporacaoPorId(this.$route.params.incorporacaoId)\n            await this.buscarReconhecimentos()\n            await this.buscarConvenio()\n            await this.buscaEmpenhos()\n        },\n        trataCamposReconhecimentoFornecedor(){\n            this.trataCampoReconhecimento()\n            this.trataCampoFornecedor()\n        },\n        trataCamposOrgaoSetor(){\n            this.trataCampoOrgao()\n            this.trataCampoSetor()\n        },\n        trataCampoReconhecimento(){\n            if(this.dadosDeEntrada && this.dadosDeEntrada.reconhecimento){\n                if(this.dadosDeEntrada.reconhecimento.situacao === 'INATIVO'){\n                    this.dadosDeEntrada.reconhecimento.disabled = true\n                    this.reconhecimentoInativo = true\n                    this.reconhecimentos.unshift(this.dadosDeEntrada.reconhecimento)\n                }else if(this.dadosDeEntrada.reconhecimento.situacao === 'ATIVO'){\n                    this.reconhecimentoInativo = false\n                }\n            }\n        },\n        trataCampoFornecedor(){\n            if(this.dadosDeEntrada && this.dadosDeEntrada.fornecedor) {\n                if (this.dadosDeEntrada.fornecedor.situacao === 'INATIVO') {\n                    this.dadosDeEntrada.fornecedor.disabled = true\n                    this.fornecedorInativo = true\n                    this.fornecedores.unshift(this.dadosDeEntrada.fornecedor)\n                } else if(this.dadosDeEntrada.fornecedor.situacao === 'ATIVO') {\n                    this.fornecedorInativo = false\n                    this.fornecedores.push(this.dadosDeEntrada.fornecedor)\n                }\n            }\n        },\n        trataCampoComodante(){\n            if(this.dadosDeEntrada.comodante){\n                this.comodantes.push(this.dadosDeEntrada.comodante)\n            }\n        },\n        trataCampoOrgao(){\n            if(this.dadosDeEntrada && this.dadosDeEntrada.orgao) {\n                if (this.dadosDeEntrada.orgao.situacao === 'INATIVO') {\n                    this.dadosDeEntrada.orgao.disabled = true\n                    this.orgaoInativo = true\n                    this.orgaos.unshift(this.dadosDeEntrada.orgao)\n                } else if(this.dadosDeEntrada.orgao.situacao === 'ATIVO'){\n                    this.orgaoInativo = false\n                }\n            }\n        },\n        trataCampoSetor(){\n            if(this.dadosDeEntrada && this.dadosDeEntrada.setor) {\n                if (this.dadosDeEntrada.setor.situacao === 'INATIVO') {\n                    this.dadosDeEntrada.setor.disabled = true\n                    this.setorInativo = true\n                    this.setores.unshift(this.dadosDeEntrada.setor)\n                } else if(this.dadosDeEntrada.setor.situacao === 'ATIVO'){\n                    this.setorInativo = false\n                }\n            }\n        },\n        async buscarConvenio() {\n            if (this.dadosDeEntrada.convenio) {\n                let convenio = await this.buscarConvenioPorId(this.dadosDeEntrada.convenio)\n                this.dadosDeEntrada.convenio = convenio.id\n                this.convenios.push(convenio)\n            }\n        },\n        async buscarReconhecimentos() {\n            this.setMensagemLoading('Carregando...')\n            const resultado = await this.buscarReconhecimentosAutoComplete()\n            this.reconhecimentos = resultado.items\n            this.verificaSeEmpenhoEOuNotaObrigatorio()\n        },\n        filtroComboAutoComplete(item, queryText) {\n            const text = item.nome.toLowerCase()\n            const searchText = queryText.toLowerCase()\n            return text.indexOf(searchText) > -1\n        },\n        formataCnpj(cnpj = '') {\n            cnpj = cnpj.replace(/\\D/g, '')\n            cnpj = cnpj.replace(\n                /(\\d{2})(\\d{3})(\\d{3})(\\d{4})(\\d{2})/,\n                '$1.$2.$3/$4-$5'\n            )\n            return cnpj\n        },\n        verificarSePodeProsseguir() {\n            if (this.podeContinuar) {\n                this.$emit('habilitaPasso2')\n            } else {\n                this.$emit('desabilitaPasso2')\n            }\n        },\n        verificarSeTodosEmpenhosObrigatoriosEstaoPreenchidos() {\n            return this.empenhos.every(empenho => empenho.numeroEmpenho && empenho.dataEmpenho && empenho.valorEmpenho && empenho.valorEmpenho!==0)\n        },\n        selecionarReconhecimento() {\n            return this.reconhecimentos.filter(reconhecimento => reconhecimento.id === this.dadosDeEntrada.reconhecimento.id)\n        },\n        verificaSeEmpenhoEOuNotaObrigatorio() {\n            if (this.dadosDeEntrada.reconhecimento !== null) {\n                const reconhecimentoSelecionado = this.selecionarReconhecimento()\n\n                if (reconhecimentoSelecionado.length > 0) {\n                    this.empenhoObrigatorio = reconhecimentoSelecionado[0].empenho\n                    this.notaObrigatorio = reconhecimentoSelecionado[0].notaFiscal\n                }\n            }\n            this.verificarSePodeProsseguir()\n        },\n        async buscaOrgaos() {\n            this.desabilitarLoadingGlobal()\n            const resultado = await this.buscarTodosOrgaos()\n            this.habilitarLoadingGlobal()\n            if (resultado) {\n                this.orgaos = resultado.items\n            }\n        },\n        async selecionaOrgao() {\n            this.dadosDeEntrada.setor = null\n            this.setores = []\n            if (this.dadosDeEntrada.orgao) {\n                const resultado = await this.buscarSetoresAlmoxarifado(this.dadosDeEntrada.orgao)\n                this.setores = resultado.items\n                await this.buscarTodosFundos()\n            }\n        },\n        async buscarSetores() {\n            if (this.dadosDeEntrada.orgao) {\n                const resultado = await this.buscarSetoresAlmoxarifado(this.dadosDeEntrada.orgao.id ? this.dadosDeEntrada.orgao.id : this.dadosDeEntrada.orgao)\n                this.setores = resultado.items\n            }\n        },\n        async buscarTodosFundos() {\n            if (this.dadosDeEntrada.orgao) {\n                const resultado = await this.buscarFundos(this.dadosDeEntrada.orgao.id ? this.dadosDeEntrada.orgao.id : this.dadosDeEntrada.orgao)\n                this.fundos = resultado.items\n            }\n        },\n        filtroAutocompleteFornecedores(item, queryText) {\n            const textOne = item.nome.toLowerCase()\n            const searchText = queryText.toLowerCase()\n\n            if (item.cpfCnpj) {\n                const textTwo = item.cpfCnpj\n                return textOne.indexOf(searchText) > -1 ||\n                    textTwo.indexOf(searchText) > -1\n            }\n            return textOne.indexOf(searchText) > -1\n        },\n        tratarEventoVoltar() {\n            this.$router.push({name: 'IncorporacaoListagem'})\n        },\n        tratarEventoContinuar() {\n            this.$router.push({name: 'ItensIncorporacaoListagem', params: {incorporacaoId: this.$route.params.incorporacaoId}})\n        },\n    }\n}\n",{"version":3,"sources":["VisualizarIncorporacao.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyQA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VisualizarIncorporacao.vue","sourceRoot":"src/views/pages/patrimonios/incorporacao/visualizacao/dados-gerais","sourcesContent":["<template>\n    <div>\n        <v-form class=\"az-form-content pb-0\" ref=\"form\">\n            <v-container class=\"white form-dados-gerais-visualizacao\" fluid>\n                <v-row>\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\">\n                        <v-autocomplete\n                            v-model=\"dadosDeEntrada.reconhecimento\"\n                            disabled\n                            :placeholder=\"' '\"\n                            name=\"reconhecimento\"\n                            :items=\"reconhecimentos\"\n                            item-text=\"nome\"\n                            item-value=\"id\"\n                            :filter=\"filtroComboAutoComplete\">\n                            <template v-slot:label>\n                                <label-personalizado campo=\"reconhecimento\" :tela=\"nomeTela\" apresentaTooltip :permissaoEdicao=\"false\" obrigatorioPorPadrao/>\n                            </template>\n                        </v-autocomplete>\n                    </v-col>\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\">\n                        <v-text-field\n                            v-model=\"dadosDeEntrada.numProcesso\"\n                            disabled\n                            :placeholder=\"' '\"\n                            name=\"número do processo\"\n                            maxlength=\"30\">\n                            <template v-slot:label>\n                                <label-personalizado campo=\"numProcesso\" :tela=\"nomeTela\" :permissaoEdicao=\"false\"/>\n                            </template>\n                        </v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\">\n                        <v-autocomplete\n                            style=\"max-height:35px;\"\n                            v-model=\"dadosDeEntrada.fornecedor\"\n                            disabled\n                            :placeholder=\"' '\"\n                            :items=\"fornecedores\"\n                            :filter=\"filtroAutocompleteFornecedores\"\n                            item-text=\"cpfCnpj\"\n                            item-value=\"id\"\n                            name=\"CNPJ Fornecedor\">\n                            <template v-slot:label>\n                                <label-personalizado campo=\"fornecedor\" :tela=\"nomeTela\" :permissaoEdicao=\"false\"/>\n                            </template>\n                        </v-autocomplete>\n                        <az-text-view\n                            :text=\"dadosDeEntrada.fornecedor ? $options.filters.fornecedorFilter(dadosDeEntrada.fornecedor, fornecedores) : ''\" class=\"mt-2\"/>\n                    </v-col>\n                </v-row>\n                <div class=\"empenhoBorder\">\n                    <empenho v-for=\"(empenho, index) in empenhos\" :key=\"empenho.id\"\n                             :value=\"empenho\"\n                             :quantidadeEmpenhos=\"empenhos.length\"\n                             :primeiroEmpenho=\"index === 0\"\n                             :obrigatorio=\"empenhoObrigatorio\"\n                             :status-reconhecimento=\"!dadosDeEntrada.reconhecimento\"\n                             @buscarEmpenhos=\"buscaEmpenhos\"/>\n                </div>\n                <v-row>\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\">\n                        <v-text-field\n                            v-model=\"dadosDeEntrada.nota\"\n                            disabled\n                            :placeholder=\"' '\"\n                            name=\"número da nota\">\n                            <template v-slot:label>\n                                <label-personalizado campo=\"nota\" :tela=\"nomeTela\" :permissaoEdicao=\"false\" obrigatorioPorPadrao/>\n                            </template>\n                        </v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\">\n                        <az-date\n                            v-model=\"dadosDeEntrada.dataNota\"\n                            is-disabled\n                            :placeholderDate=\"'__/__/____'\"\n                            name-date=\"data nota\"\n                            date>\n                            <template v-slot:label-date>\n                                <label-personalizado campo=\"dataNota\" :tela=\"nomeTela\" :permissaoEdicao=\"false\" obrigatorioPorPadrao/>\n                            </template>\n                        </az-date>\n                    </v-col>\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\">\n                        <az-money\n                            v-if=\"dadosDeEntrada.id\"\n                            v-model=\"dadosDeEntrada.valorNota\"\n                            disabled\n                            :placeholder=\"' '\"\n                            class=\"botaoExcluirMoney\">\n                            <template v-slot:label>\n                                <label-personalizado campo=\"valorNota\" :tela=\"nomeTela\" :permissaoEdicao=\"false\" obrigatorioPorPadrao/>\n                            </template>\n                        </az-money>\n                    </v-col>\n                </v-row>\n                <v-row>\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\">\n                        <v-autocomplete\n                            v-model=\"dadosDeEntrada.orgao\"\n                            disabled\n                            :placeholder=\"' '\"\n                            item-text=\"descricao\"\n                            item-value=\"id\"\n                            name=\"orgaoResponsavel\"\n                            :items=\"orgaos\"\n                            :filter=\"filtroComboAutoComplete\">\n                            <template v-slot:label>\n                                <label-personalizado campo=\"orgao\" :tela=\"nomeTela\" :permissaoEdicao=\"false\" obrigatorioPorPadrao/>\n                            </template>\n                        </v-autocomplete>\n                    </v-col>\n\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\">\n                        <v-autocomplete\n                            v-model=\"dadosDeEntrada.setor\"\n                            disabled\n                            :placeholder=\"' '\"\n                            item-text=\"descricao\"\n                            item-value=\"id\"\n                            name=\"setor\"\n                            :items=\"setores\">\n                            <template v-slot:label>\n                                <label-personalizado campo=\"setor\" :tela=\"nomeTela\" :permissaoEdicao=\"false\" obrigatorioPorPadrao apresentaTooltip/>\n                            </template>\n                        </v-autocomplete>\n                    </v-col>\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\">\n                        <az-date\n                            v-model=\"dadosDeEntrada.dataRecebimento\"\n                            is-disabled\n                            :placeholderDate=\"'__/__/____'\"\n                            name-date=\"recebimento\"\n                            date>\n                            <template v-slot:label-date>\n                                <label-personalizado campo=\"dataRecebimento\" :tela=\"nomeTela\" :permissaoEdicao=\"false\" obrigatorioPorPadrao/>\n                            </template>\n                        </az-date>\n                    </v-col>\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\">\n                        <v-text-field\n                            v-model=\"dadosDeEntrada.numeroNotaLancamentoContabil\"\n                            disabled\n                            :placeholder=\"' '\"\n                            name=\"número da NL\"\n                            v-mask=\"'####NL######'\">\n                            <template v-slot:label>\n                                <label-personalizado campo=\"numeroNotaLancamentoContabil\" :tela=\"nomeTela\" :permissaoEdicao=\"false\"/>\n                            </template>\n                        </v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\">\n                        <az-date\n                            v-model=\"dadosDeEntrada.dataNotaLancamentoContabil\"\n                            is-disabled\n                            :placeholderDate=\"'__/__/____'\"\n                            name-date=\"data da NL\"\n                            date>\n                            <template v-slot:label-date>\n                                <label-personalizado campo=\"dataNotaLancamentoContabil\" :tela=\"nomeTela\" :permissaoEdicao=\"false\" />\n                            </template>\n                        </az-date>\n                    </v-col>\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\" class=\"pt-0\">\n                        <p class=\"titulo_checkbox pb-0\"><label-personalizado campo=\"origem\" :tela=\"nomeTela\" :apenasNome=\"true\"/></p>\n                        <v-row class=\"checkbox_input tamanhoCheckbox\">\n                            <v-col cols=\"3\">\n                                <v-checkbox\n                                    v-model=\"dadosDeEntrada.origemConvenio\"\n                                    disabled\n                                    label=\"Convênio\"\n                                    class=\"tamanhoCheckbox\"/>\n                            </v-col>\n                            <v-col cols=\"3\">\n                                <v-checkbox\n                                    v-model=\"dadosDeEntrada.origemFundo\"\n                                    disabled\n                                    label=\"Fundo\"\n                                    class=\"checkbox__fundo\"/>\n                            </v-col>\n                            <v-col cols=\"3\">\n                                <v-checkbox\n                                    v-model=\"dadosDeEntrada.origemProjeto\"\n                                    disabled\n                                    label=\"Projeto\"\n                                    class=\"checkbox__projeto\"/>\n                            </v-col>\n                            <v-col cols=\"3\">\n                                <v-checkbox\n                                    v-model=\"dadosDeEntrada.origemComodato\"\n                                    disabled\n                                    label=\"Comodato\"\n                                    class=\"checkbox__comodato\"/>\n                            </v-col>\n\n                        </v-row>\n                    </v-col>\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\" v-if=\"dadosDeEntrada.origemConvenio\">\n                        <v-autocomplete\n                            v-model=\"dadosDeEntrada.convenio\"\n                            disabled\n                            :placeholder=\"' '\"\n                            name=\"convenio\"\n                            :items=\"convenios\"\n                            item-text=\"nome\"\n                            item-value=\"id\"\n                            hide-no-data\n                            hide-selected\n                            :filter=\"filtroComboAutoComplete\">\n                            <template v-slot:label>\n                                <label-personalizado campo=\"convenio\" :tela=\"nomeTela\" :permissaoEdicao=\"false\"/>\n                            </template>\n                        </v-autocomplete>\n                    </v-col>\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\" v-if=\"dadosDeEntrada.origemFundo\">\n                        <v-autocomplete\n                            v-model=\"dadosDeEntrada.fundo\"\n                            disabled\n                            :placeholder=\"' '\"\n                            name=\"fundo\"\n                            :items=\"fundos\"\n                            item-text=\"descricao\"\n                            item-value=\"id\">\n                            <template v-slot:label>\n                                <label-personalizado campo=\"fundo\" :tela=\"nomeTela\" :permissaoEdicao=\"false\"/>\n                            </template>\n                        </v-autocomplete>\n                    </v-col>\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\" v-if=\"dadosDeEntrada.origemProjeto\">\n                        <v-text-field\n                            v-model=\"dadosDeEntrada.projeto\"\n                            disabled\n                            :placeholder=\"' '\"\n                            name=\"projeto\"\n                            maxlength=\"100\">\n                            <template v-slot:label>\n                                <label-personalizado campo=\"projeto\" :tela=\"nomeTela\" :permissaoEdicao=\"false\"/>\n                            </template>\n                        </v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\" md=\"4\" sm=\"6\" xs=\"12\" v-if=\"dadosDeEntrada.origemComodato\">\n                        <v-autocomplete\n                            v-model=\"dadosDeEntrada.comodante\"\n                            disabled\n                            :placeholder=\"' '\"\n                            :items=\"comodantes\"\n                            :filter=\"filtroComboAutoComplete\"\n                            item-text=\"nome\"\n                            item-value=\"id\"\n                            name=\"Comodante\">\n                            <template v-slot:label>\n                                <label-personalizado campo=\"comodante\" :tela=\"nomeTela\" :permissaoEdicao=\"false\"/>\n                            </template>\n                        </v-autocomplete>\n                    </v-col>\n                </v-row>\n            </v-container>\n        </v-form>\n        <acoes-botoes-continuar-voltar :controleContinuar=\"podeContinuar\" @voltar=\"tratarEventoVoltar\"\n                                       @continuar=\"tratarEventoContinuar\"/>\n    </div>\n</template>\n\n<script>\n    import {actionTypes} from '@/core/constants'\n    import Empenho from '@/views/components/empenho/Empenho'\n    import {createNamespacedHelpers, mapActions} from 'vuex'\n    import AzHasPermissions from '@azinformatica/loki/src/utils/AzHasPermissions'\n    import LabelPersonalizado from '@/views/components/label/LabelPersonalizado'\n    import AcoesBotoesContinuarVoltar from '@/views/components/acoes/AcoesBotoesContinuarVoltar'\n\n    const {mapGetters} = createNamespacedHelpers('rotulosPersonalizados')\n\n    export default {\n        name: 'dadosGerais',\n        components: {Empenho, LabelPersonalizado, AcoesBotoesContinuarVoltar},\n        data() {\n            return {\n                dadosDeEntrada: {},\n                empenhos: [{incorporacaoId: this.$route.params.incorporacaoId}],\n                reconhecimentos: [],\n                fornecedores: [],\n                comodantes: [],\n                convenios: [],\n                fundos: [],\n                orgaos: [],\n                setores: [],\n                cnpjPesquisadoContemMascara: false,\n                empenhoObrigatorio: false,\n                notaObrigatorio: false,\n                reconhecimentoInativo: false,\n                fornecedorInativo: false,\n                orgaoInativo: false,\n                setorInativo: false,\n                nomeTela: 'INCORPORACAO_DADOS_GERAIS',\n                labelBtnCancel: 'Remover',\n                cpfCnpj: ''\n            }\n        },\n        async mounted() {\n            await this.buscaIncorporacao()\n            this.trataCamposReconhecimentoFornecedor()\n            this.trataCampoComodante()\n            await this.buscaOrgaos()\n            await this.buscarSetores()\n            this.trataCamposOrgaoSetor()\n            this.verificarSePodeProsseguir()\n            await this.buscarTodosFundos()\n        },\n        computed: {\n            ...mapGetters([\n                'getObrigatorioRotulosPersonalizados',\n                'getIncorporacaoValidado'\n            ]),\n            verificaPermissaoRetroativa() {\n                return AzHasPermissions(this.$store.state.loki.user.authorities, ['Mobiliario.Retroativo'])\n            },\n            dataPermitida() {\n                let date = new Date()\n                return new Date(date.getFullYear(), date.getMonth(), 1)\n            },\n            podeContinuar() {\n                if(this.empenhoObrigatorio){\n                    if(!this.verificarSeTodosEmpenhosObrigatoriosEstaoPreenchidos()){\n                        return false\n                    }\n                }\n                return this.getIncorporacaoValidado(this.dadosDeEntrada,\n                                                    this.dadosDeEntrada.origemConvenio,\n                                                    this.dadosDeEntrada.origemFundo,\n                                                    this.dadosDeEntrada.origemProjeto,\n                                                    this.dadosDeEntrada.origemComodato,\n                                                    this.notaObrigatorio,\n                                                    this.nomeTela)\n            }\n        },\n        filters: {\n            fornecedorFilter(id, fornecedores) {\n                const encontados = fornecedores.filter(f => f.id === id)\n                return encontados.length > 0 ? encontados[0].nome : ''\n            },\n        },\n        methods: {\n            ...mapActions([\n                actionTypes.COMUM.BUSCAR_FUNDOS,\n                actionTypes.COMUM.BUSCAR_TODOS_ORGAOS,\n                actionTypes.COMUM.BUSCAR_SETORES_ALMOXARIFADO,\n                actionTypes.CONFIGURACAO.RECONHECIMENTO.BUSCAR_RECONHECIMENTOS_AUTO_COMPLETE,\n                actionTypes.PATRIMONIO.INCORPORACAO.EMPENHO.BUSCAR_TODOS_EMPENHOS,\n                actionTypes.PATRIMONIO.INCORPORACAO.EMPENHO.INSERIR_EMPENHO,\n                actionTypes.CONFIGURACAO.CONVENIO.BUSCAR_CONVENIO_POR_ID,\n                actionTypes.PATRIMONIO.INCORPORACAO.BUSCAR_INCORPORACAO_POR_ID\n            ]),\n            async buscaEmpenhos() {\n                const resultado = await this.buscarTodosEmpenhos(this.$route.params.incorporacaoId)\n                if (resultado && resultado.items.length > 0) {\n                    this.empenhos = resultado.items\n                }\n                this.verificarSePodeProsseguir()\n            },\n            async buscaIncorporacao() {\n                this.dadosDeEntrada = await this.buscarIncorporacaoPorId(this.$route.params.incorporacaoId)\n                await this.buscarReconhecimentos()\n                await this.buscarConvenio()\n                await this.buscaEmpenhos()\n            },\n            trataCamposReconhecimentoFornecedor(){\n                this.trataCampoReconhecimento()\n                this.trataCampoFornecedor()\n            },\n            trataCamposOrgaoSetor(){\n                this.trataCampoOrgao()\n                this.trataCampoSetor()\n            },\n            trataCampoReconhecimento(){\n                if(this.dadosDeEntrada && this.dadosDeEntrada.reconhecimento){\n                    if(this.dadosDeEntrada.reconhecimento.situacao === 'INATIVO'){\n                        this.dadosDeEntrada.reconhecimento.disabled = true\n                        this.reconhecimentoInativo = true\n                        this.reconhecimentos.unshift(this.dadosDeEntrada.reconhecimento)\n                    }else if(this.dadosDeEntrada.reconhecimento.situacao === 'ATIVO'){\n                        this.reconhecimentoInativo = false\n                    }\n                }\n            },\n            trataCampoFornecedor(){\n                if(this.dadosDeEntrada && this.dadosDeEntrada.fornecedor) {\n                    if (this.dadosDeEntrada.fornecedor.situacao === 'INATIVO') {\n                        this.dadosDeEntrada.fornecedor.disabled = true\n                        this.fornecedorInativo = true\n                        this.fornecedores.unshift(this.dadosDeEntrada.fornecedor)\n                    } else if(this.dadosDeEntrada.fornecedor.situacao === 'ATIVO') {\n                        this.fornecedorInativo = false\n                        this.fornecedores.push(this.dadosDeEntrada.fornecedor)\n                    }\n                }\n            },\n            trataCampoComodante(){\n                if(this.dadosDeEntrada.comodante){\n                    this.comodantes.push(this.dadosDeEntrada.comodante)\n                }\n            },\n            trataCampoOrgao(){\n                if(this.dadosDeEntrada && this.dadosDeEntrada.orgao) {\n                    if (this.dadosDeEntrada.orgao.situacao === 'INATIVO') {\n                        this.dadosDeEntrada.orgao.disabled = true\n                        this.orgaoInativo = true\n                        this.orgaos.unshift(this.dadosDeEntrada.orgao)\n                    } else if(this.dadosDeEntrada.orgao.situacao === 'ATIVO'){\n                        this.orgaoInativo = false\n                    }\n                }\n            },\n            trataCampoSetor(){\n                if(this.dadosDeEntrada && this.dadosDeEntrada.setor) {\n                    if (this.dadosDeEntrada.setor.situacao === 'INATIVO') {\n                        this.dadosDeEntrada.setor.disabled = true\n                        this.setorInativo = true\n                        this.setores.unshift(this.dadosDeEntrada.setor)\n                    } else if(this.dadosDeEntrada.setor.situacao === 'ATIVO'){\n                        this.setorInativo = false\n                    }\n                }\n            },\n            async buscarConvenio() {\n                if (this.dadosDeEntrada.convenio) {\n                    let convenio = await this.buscarConvenioPorId(this.dadosDeEntrada.convenio)\n                    this.dadosDeEntrada.convenio = convenio.id\n                    this.convenios.push(convenio)\n                }\n            },\n            async buscarReconhecimentos() {\n                this.setMensagemLoading('Carregando...')\n                const resultado = await this.buscarReconhecimentosAutoComplete()\n                this.reconhecimentos = resultado.items\n                this.verificaSeEmpenhoEOuNotaObrigatorio()\n            },\n            filtroComboAutoComplete(item, queryText) {\n                const text = item.nome.toLowerCase()\n                const searchText = queryText.toLowerCase()\n                return text.indexOf(searchText) > -1\n            },\n            formataCnpj(cnpj = '') {\n                cnpj = cnpj.replace(/\\D/g, '')\n                cnpj = cnpj.replace(\n                    /(\\d{2})(\\d{3})(\\d{3})(\\d{4})(\\d{2})/,\n                    '$1.$2.$3/$4-$5'\n                )\n                return cnpj\n            },\n            verificarSePodeProsseguir() {\n                if (this.podeContinuar) {\n                    this.$emit('habilitaPasso2')\n                } else {\n                    this.$emit('desabilitaPasso2')\n                }\n            },\n            verificarSeTodosEmpenhosObrigatoriosEstaoPreenchidos() {\n                return this.empenhos.every(empenho => empenho.numeroEmpenho && empenho.dataEmpenho && empenho.valorEmpenho && empenho.valorEmpenho!==0)\n            },\n            selecionarReconhecimento() {\n                return this.reconhecimentos.filter(reconhecimento => reconhecimento.id === this.dadosDeEntrada.reconhecimento.id)\n            },\n            verificaSeEmpenhoEOuNotaObrigatorio() {\n                if (this.dadosDeEntrada.reconhecimento !== null) {\n                    const reconhecimentoSelecionado = this.selecionarReconhecimento()\n\n                    if (reconhecimentoSelecionado.length > 0) {\n                        this.empenhoObrigatorio = reconhecimentoSelecionado[0].empenho\n                        this.notaObrigatorio = reconhecimentoSelecionado[0].notaFiscal\n                    }\n                }\n                this.verificarSePodeProsseguir()\n            },\n            async buscaOrgaos() {\n                this.desabilitarLoadingGlobal()\n                const resultado = await this.buscarTodosOrgaos()\n                this.habilitarLoadingGlobal()\n                if (resultado) {\n                    this.orgaos = resultado.items\n                }\n            },\n            async selecionaOrgao() {\n                this.dadosDeEntrada.setor = null\n                this.setores = []\n                if (this.dadosDeEntrada.orgao) {\n                    const resultado = await this.buscarSetoresAlmoxarifado(this.dadosDeEntrada.orgao)\n                    this.setores = resultado.items\n                    await this.buscarTodosFundos()\n                }\n            },\n            async buscarSetores() {\n                if (this.dadosDeEntrada.orgao) {\n                    const resultado = await this.buscarSetoresAlmoxarifado(this.dadosDeEntrada.orgao.id ? this.dadosDeEntrada.orgao.id : this.dadosDeEntrada.orgao)\n                    this.setores = resultado.items\n                }\n            },\n            async buscarTodosFundos() {\n                if (this.dadosDeEntrada.orgao) {\n                    const resultado = await this.buscarFundos(this.dadosDeEntrada.orgao.id ? this.dadosDeEntrada.orgao.id : this.dadosDeEntrada.orgao)\n                    this.fundos = resultado.items\n                }\n            },\n            filtroAutocompleteFornecedores(item, queryText) {\n                const textOne = item.nome.toLowerCase()\n                const searchText = queryText.toLowerCase()\n\n                if (item.cpfCnpj) {\n                    const textTwo = item.cpfCnpj\n                    return textOne.indexOf(searchText) > -1 ||\n                        textTwo.indexOf(searchText) > -1\n                }\n                return textOne.indexOf(searchText) > -1\n            },\n            tratarEventoVoltar() {\n                this.$router.push({name: 'IncorporacaoListagem'})\n            },\n            tratarEventoContinuar() {\n                this.$router.push({name: 'ItensIncorporacaoListagem', params: {incorporacaoId: this.$route.params.incorporacaoId}})\n            },\n        }\n    }\n</script>\n\n<style scoped lang=\"stylus\">\n.form-dados-gerais-visualizacao\n    min-height 62vh\n\n.tamanhoCheckbox\n    height 20px\n    .checkbox__fundo\n        margin-left 5px\n    .checkbox__projeto\n        margin-left -7px\n    .checkbox__comodato\n        margin-left -16px\n\n.titulo_checkbox\n    font-size 14px\n    color #777777\n    display inline-flex\n    margin-left 5px\n    font-weight bold\n    margin-bottom 0!important\n\n.empenhoBorder\n    width 100%\n    padding-top 8px\n    margin-bottom 15px\n    border-style solid\n    border-radius 5px\n    border-color #7777\n    border-width 1px\n\n>>>\n    @media (max-width: 1280px)\n        .tamanhoCheckbox\n            label\n                font-size 13px\n            .v-input--selection-controls__input\n                margin-right 0\n                width 12px\n                padding-right 4px\n            .v-input--selection-controls__input:first-child\n                margin-left 5px\n            .v-input--selection-controls__ripple:before,\n            .v-ripple__container\n                top 3px\n                bottom 3px\n                left -5px\n                right 10px\n</style>\n"]}]}