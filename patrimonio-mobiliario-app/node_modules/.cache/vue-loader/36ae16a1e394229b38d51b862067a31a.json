{"remainingRequest":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/pages/movimentacao/movimentacao-interna/visualizacaoRegistro/VisualizarRegistroMovimentacaoInterna.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/pages/movimentacao/movimentacao-interna/visualizacaoRegistro/VisualizarRegistroMovimentacaoInterna.vue","mtime":1615401870875},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport VisualizarRegistroMovimentacaoInternaCabecalho from './VisualizarRegistroMovimentacaoInternaCabecalho'\nimport VisualizarRegistroMovimentacaoInternaDadosGerais from './VisualizarRegistroMovimentacaoInternaDadosGerais'\nimport VisualizarRegistroMovimentacaoInternaItem from './VisualizarRegistroMovimentacaoInternaItem'\nimport VisualizarRegistroMovimentacaoInternaDocumentos from './VisualizarRegistroMovimentacaoInternaDocumentos'\nimport {actionTypes, mutationTypes} from '@/core/constants'\nimport {mapActions} from 'vuex'\n\nexport default {\n    name: 'VisualizarRegistroMovimentacaoInterna',\n    components: {\n        VisualizarRegistroMovimentacaoInternaDadosGerais,\n        VisualizarRegistroMovimentacaoInternaCabecalho,\n        VisualizarRegistroMovimentacaoInternaItem,\n        VisualizarRegistroMovimentacaoInternaDocumentos\n    },\n    data() {\n        return {\n            rotaOrigem: 'MovimentacaoInternaListagem',\n            movimentacao: null,\n            movimentacaoInternaId: null,\n            tooltip: '',\n            ehDestinatario: false\n        }\n    },\n    async mounted() {\n        this.setarIdMovimentacaoInterna(Number.parseInt(this.$route.params.movimentacaoInternaId))\n        await this.buscarMovimentacaoInterna()\n        await this.buscarTooltipMovimentacaoTemporaria()\n        await this.validarUsuarioEDestinatario()\n    },\n    async beforeRouteUpdate(to, from, next) {\n        this.setarIdMovimentacaoInterna(to.params.movimentacaoInternaId)\n        await this.buscarMovimentacaoInterna()\n        await this.buscarTooltipMovimentacaoTemporaria()\n        await this.validarUsuarioEDestinatario()\n        next()\n    },\n    methods: {\n        ...mapActions([\n            actionTypes.MOVIMENTACAO_INTERNA.VISUALIZACAO.ATUALIZAR_MOVIMENTACAO_INTERNA_VISUALIZACAO_REGISTRO,\n            actionTypes.MOVIMENTACAO_INTERNA.VISUALIZACAO.BUSCAR_MOVIMENTACAO_INTERNA_VISUALIZACAO_REGISTRO,\n            actionTypes.MOVIMENTACAO_INTERNA.TEMPORARIA.DEVOLVER_TODOS_PATRIMONIOS,\n            actionTypes.MOVIMENTACAO_INTERNA.VISUALIZACAO.BUSCAR_MOVIMENTACAO_INTERNA_VISUALIZACAO_REGISTRO,\n            actionTypes.MOVIMENTACAO_INTERNA.TEMPORARIA.BUSCAR_INFORMACAO_TOOLTIP,\n            actionTypes.COMUM.BUSCAR_SETORES_POSSUI_ACESSO\n        ]),\n        setarIdMovimentacaoInterna(movimentacaoInternaId) {\n            this.movimentacaoInternaId = movimentacaoInternaId\n        },\n        async tratarDevolucaoPatrimonios() {\n            try {\n                await this.devolverTodosPatrimonios(this.movimentacaoInternaId)\n                this.mostrarNotificacaoSucesso('Operação realizada com sucesso')\n            }catch (err){\n                this.mostrarNotificacaoErro(err.response.data.message)\n                this.$store.commit(mutationTypes.LOKI.DISABLE_AUTO_SAVING)\n            }finally {\n                await this.buscarMovimentacaoInterna()\n            }\n        },\n        async tratarEventoEdicao(dados) {\n            try {\n                await this.atualizarMovimentacaoInternaVisualizacaoRegistro(dados)\n            } catch (err) {\n                this.mostrarNotificacaoErro(err.response.data.message)\n                this.$store.commit(mutationTypes.LOKI.DISABLE_AUTO_SAVING)\n            } finally {\n                await this.buscarMovimentacaoInterna()\n            }\n        },\n        async buscarMovimentacaoInterna() {\n            this.movimentacao = await this.buscarMovimentacaoInternaVisualizacaoRegistro(this.movimentacaoInternaId)\n        },\n        async buscarTooltipMovimentacaoTemporaria() {\n            if (this.movimentacao.tipo === 'TEMPORARIA' && this.movimentacao.situacao === 'DEVOLVIDO_PARCIAL') {\n                const resultado = await this.buscarInformacaoTooltip(this.movimentacao.id)\n                this.tooltip = resultado.razaoPatrimoniosDevolvidos\n            }\n        },\n        async buscarInformacoesAtualizadasMovimentacao() {\n            await this.buscarMovimentacaoInterna()\n            await this.buscarTooltipMovimentacaoTemporaria()\n        },\n        async validarUsuarioEDestinatario() {\n            const resultado = await this.buscarSetoresPossuiAcesso()\n            resultado.items.forEach(setor => {\n                if (setor.descricao === this.movimentacao.setorDestino) {\n                    this.ehDestinatario = true\n                }\n            })\n        }\n    }\n}\n",{"version":3,"sources":["VisualizarRegistroMovimentacaoInterna.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VisualizarRegistroMovimentacaoInterna.vue","sourceRoot":"src/views/pages/movimentacao/movimentacao-interna/visualizacaoRegistro","sourcesContent":["<template>\n    <div>\n        <az-back-button :route=\"{name: rotaOrigem}\" text=\"Voltar para a Listagem\"/>\n\n        <az-container class=\"corpo-container\">\n            <visualizar-registro-movimentacao-interna-cabecalho\n                :movimentacao=\"movimentacao\"\n                :eh-destinatario=\"ehDestinatario\"\n                @devolverTodosPatrimonios=\"tratarDevolucaoPatrimonios\"\n                v-if=\"movimentacao\"\n            />\n\n            <visualizar-registro-movimentacao-interna-dados-gerais\n                :movimentacao=\"movimentacao\"\n                :tooltip=\"tooltip\"\n                @editar=\"tratarEventoEdicao\"\n                v-if=\"movimentacao\"\n            />\n\n            <visualizar-registro-movimentacao-interna-item\n                :movimentacao=\"movimentacao\"\n                v-if=\"movimentacao\"\n            />\n\n            <visualizar-registro-movimentacao-interna-documentos\n                :movimentacaoInternaId=\"movimentacaoInternaId\"\n                v-if=\"movimentacaoInternaId\"\n            />\n\n            <router-view @buscarInformacoesAtualizadasMovimentacao=\"buscarInformacoesAtualizadasMovimentacao\"/>\n        </az-container>\n    </div>\n</template>\n\n<script>\n    import VisualizarRegistroMovimentacaoInternaCabecalho from './VisualizarRegistroMovimentacaoInternaCabecalho'\n    import VisualizarRegistroMovimentacaoInternaDadosGerais from './VisualizarRegistroMovimentacaoInternaDadosGerais'\n    import VisualizarRegistroMovimentacaoInternaItem from './VisualizarRegistroMovimentacaoInternaItem'\n    import VisualizarRegistroMovimentacaoInternaDocumentos from './VisualizarRegistroMovimentacaoInternaDocumentos'\n    import {actionTypes, mutationTypes} from '@/core/constants'\n    import {mapActions} from 'vuex'\n\n    export default {\n        name: 'VisualizarRegistroMovimentacaoInterna',\n        components: {\n            VisualizarRegistroMovimentacaoInternaDadosGerais,\n            VisualizarRegistroMovimentacaoInternaCabecalho,\n            VisualizarRegistroMovimentacaoInternaItem,\n            VisualizarRegistroMovimentacaoInternaDocumentos\n        },\n        data() {\n            return {\n                rotaOrigem: 'MovimentacaoInternaListagem',\n                movimentacao: null,\n                movimentacaoInternaId: null,\n                tooltip: '',\n                ehDestinatario: false\n            }\n        },\n        async mounted() {\n            this.setarIdMovimentacaoInterna(Number.parseInt(this.$route.params.movimentacaoInternaId))\n            await this.buscarMovimentacaoInterna()\n            await this.buscarTooltipMovimentacaoTemporaria()\n            await this.validarUsuarioEDestinatario()\n        },\n        async beforeRouteUpdate(to, from, next) {\n            this.setarIdMovimentacaoInterna(to.params.movimentacaoInternaId)\n            await this.buscarMovimentacaoInterna()\n            await this.buscarTooltipMovimentacaoTemporaria()\n            await this.validarUsuarioEDestinatario()\n            next()\n        },\n        methods: {\n            ...mapActions([\n                actionTypes.MOVIMENTACAO_INTERNA.VISUALIZACAO.ATUALIZAR_MOVIMENTACAO_INTERNA_VISUALIZACAO_REGISTRO,\n                actionTypes.MOVIMENTACAO_INTERNA.VISUALIZACAO.BUSCAR_MOVIMENTACAO_INTERNA_VISUALIZACAO_REGISTRO,\n                actionTypes.MOVIMENTACAO_INTERNA.TEMPORARIA.DEVOLVER_TODOS_PATRIMONIOS,\n                actionTypes.MOVIMENTACAO_INTERNA.VISUALIZACAO.BUSCAR_MOVIMENTACAO_INTERNA_VISUALIZACAO_REGISTRO,\n                actionTypes.MOVIMENTACAO_INTERNA.TEMPORARIA.BUSCAR_INFORMACAO_TOOLTIP,\n                actionTypes.COMUM.BUSCAR_SETORES_POSSUI_ACESSO\n            ]),\n            setarIdMovimentacaoInterna(movimentacaoInternaId) {\n                this.movimentacaoInternaId = movimentacaoInternaId\n            },\n            async tratarDevolucaoPatrimonios() {\n                try {\n                    await this.devolverTodosPatrimonios(this.movimentacaoInternaId)\n                    this.mostrarNotificacaoSucesso('Operação realizada com sucesso')\n                }catch (err){\n                    this.mostrarNotificacaoErro(err.response.data.message)\n                    this.$store.commit(mutationTypes.LOKI.DISABLE_AUTO_SAVING)\n                }finally {\n                    await this.buscarMovimentacaoInterna()\n                }\n            },\n            async tratarEventoEdicao(dados) {\n                try {\n                    await this.atualizarMovimentacaoInternaVisualizacaoRegistro(dados)\n                } catch (err) {\n                    this.mostrarNotificacaoErro(err.response.data.message)\n                    this.$store.commit(mutationTypes.LOKI.DISABLE_AUTO_SAVING)\n                } finally {\n                    await this.buscarMovimentacaoInterna()\n                }\n            },\n            async buscarMovimentacaoInterna() {\n                this.movimentacao = await this.buscarMovimentacaoInternaVisualizacaoRegistro(this.movimentacaoInternaId)\n            },\n            async buscarTooltipMovimentacaoTemporaria() {\n                if (this.movimentacao.tipo === 'TEMPORARIA' && this.movimentacao.situacao === 'DEVOLVIDO_PARCIAL') {\n                    const resultado = await this.buscarInformacaoTooltip(this.movimentacao.id)\n                    this.tooltip = resultado.razaoPatrimoniosDevolvidos\n                }\n            },\n            async buscarInformacoesAtualizadasMovimentacao() {\n                await this.buscarMovimentacaoInterna()\n                await this.buscarTooltipMovimentacaoTemporaria()\n            },\n            async validarUsuarioEDestinatario() {\n                const resultado = await this.buscarSetoresPossuiAcesso()\n                resultado.items.forEach(setor => {\n                    if (setor.descricao === this.movimentacao.setorDestino) {\n                        this.ehDestinatario = true\n                    }\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"stylus\">\n    .corpo-container\n        min-height 80vh\n</style>\n"]}]}