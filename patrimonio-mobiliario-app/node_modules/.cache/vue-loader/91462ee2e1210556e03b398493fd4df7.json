{"remainingRequest":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/components/modal/incorporacao/registroIncorporacao/ModalItensRegistroIncorporacao.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/components/modal/incorporacao/registroIncorporacao/ModalItensRegistroIncorporacao.vue","mtime":1615831389257},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {actionTypes, mutationTypes} from '@/core/constants'\nimport {mapActions, mapMutations, mapState} from 'vuex'\nimport ModalItensRegistroIncorporacaoDados from './ModalItensRegistroIncorporacaoDados'\nimport ModalItensRegistroTabelaVeiculo from './ModalItensRegistroTabelaVeiculo'\nimport ModalItensRegistroTabelaMovel from './ModalItensRegistroTabelaMovel'\nimport ModalItensRegistroTabelaEquipamentoArmamento from './ModalItensRegistroTabelaEquipamentoArmamento'\nimport ModalItensRegistroIncorporacaoDadosVisualizar from './ModalItensRegistroIncorporacaoDadosVisualizar'\nimport Paginacao from '@/views/components/tabela/Paginacao'\nimport AzHasPermissions from '@azinformatica/loki/src/utils/AzHasPermissions'\n\nexport default {\n    name: 'ModalItensRegistroIncorporacao',\n    components: {\n        ModalItensRegistroIncorporacaoDadosVisualizar,\n        Paginacao,\n        ModalItensRegistroIncorporacaoDados,\n        ModalItensRegistroTabelaVeiculo,\n        ModalItensRegistroTabelaMovel,\n        ModalItensRegistroTabelaEquipamentoArmamento\n    },\n    data() {\n        return {\n            dadosGerais: {\n                idIncorporacao: null,\n                tipoBem: ''\n            },\n            paginacaoInterna: this.$store.state.patrimonio.resultadoBuscaTodosPatrimoniosRegistro.paginacao,\n            patrimonios: [],\n            paginas: 0,\n            totalItens: 0,\n            itemIncorporacaoId: null,\n            incorporacaoId: null,\n            value:true\n        }\n    },\n    watch: {\n        paginacaoInterna: {\n            handler(novoValor) {\n                this.tratarEventoPaginar(novoValor)\n            },\n            deep: true,\n        },\n    },\n    computed:{\n        tipoVeiculo() {\n            return this.dadosGerais.tipoBem === 'VEICULO'\n        },\n        tipoMovel() {\n            return this.dadosGerais.tipoBem === 'MOVEL'\n        },\n        tipoEquipamentoArmamento() {\n            return this.dadosGerais.tipoBem === 'EQUIPAMENTO' || this.dadosGerais.tipoBem === 'ARMAMENTO'\n        },\n        verificaPermissaoEdicao() {\n            return AzHasPermissions(this.$store.state.loki.user.authorities, [\n                'Mobiliario.Normal',\n            ])\n        },\n        ...mapState({todosPatrimonios: state => state.patrimonio.resultadoBuscaTodosPatrimoniosRegistro}),\n    },\n    async mounted() {\n        this.setItemIncorporacaoId()\n        this.setIncorporacaoId()\n        await this.buscarItemDeIncorporacao()\n        this.resetaPage()\n        await this.buscaTodosPatrimonios()\n    },\n    methods: {\n        ...mapActions([\n            actionTypes.PATRIMONIO.INCORPORACAO.INCORPORACAO_ITEM.BUSCAR_ITEM_INCORPORACAO_REGISTRO,\n            actionTypes.PATRIMONIO.BUSCAR_TODOS_PATRIMONIOS_REGISTRO\n        ]),\n        ...mapMutations([\n            mutationTypes.PATRIMONIO.SET_PAGINACAO_BUSCA_TODOS_PATRIMONIOS_REGISTRO,\n            mutationTypes.PATRIMONIO.RESETA_PAGE_PATRIMONIO_REGISTRO,\n            mutationTypes.PATRIMONIO.INCORPORACAO.INCORPORACAO_ITEM.DESATIVAR_SALVAMENTO_AUTOMATICO\n        ]),\n        async buscarItemDeIncorporacao() {\n            this.desabilitarLoadingGlobal()\n            const resultado = await this.buscarItemIncorporacaoRegistro({id: this.itemIncorporacaoId})\n            this.habilitarLoadingGlobal()\n            this.dadosGerais = resultado\n            this.setDadosGerais()\n        },\n        async buscaTodosPatrimonios() {\n            if (this.itemIncorporacaoId) {\n                const resultado = await this.buscarTodosTodosPatrimoniosRegistro(this.itemIncorporacaoId)\n                if (resultado) {\n                    this.patrimonios = resultado.items\n                    this.paginas = resultado.totalPages\n                    this.totalItens = resultado.totalElements\n                }\n            }\n        },\n        tratarEventoPaginar(paginacao) {\n            this.setPaginacaoBuscaTodosPatrimoniosRegistro(paginacao)\n            this.resetarPaginacaoSortBy(paginacao)\n            this.buscaTodosPatrimonios()\n        },\n        resetarPaginacaoSortBy(paginacao) {\n            if (!paginacao.sortBy[0]) {\n                this.todosPatrimonios.paginacao.sortBy[0] = paginacao.defaultSortBy\n            }\n        },\n        resetaPage() {\n            this.resetaPagePatrimonioRegistro()\n        },\n        fecharModal() {\n            this.desativarSalvamentoAutomatico()\n            this.$router.push({\n                name: 'VisualizarRegistroIncorporacao',\n                params: {incorporacaoId: this.incorporacaoId}\n            })\n        },\n        setDadosGerais(){\n            this.dadosGerais.idIncorporacao = this.incorporacaoId\n            this.dadosGerais.naturezaDespesa = null\n            this.dadosGerais.estadoConservacao = null\n        },\n        setItemIncorporacaoId(){\n            if (this.$route.params.itemIncorporacaoId) {\n                this.itemIncorporacaoId = this.$route.params.itemIncorporacaoId\n            }\n        },\n        setIncorporacaoId(){\n            if(this.$route.params.incorporacaoId){\n                this.incorporacaoId = this.$route.params.incorporacaoId\n            }\n        },\n        async redirecionarFichaPatrimonio(item) {\n            await this.$router.push({name: 'FichaPatrimonioDadosGerais', params: {patrimonioId: item.id}})\n        }\n    }\n}\n",{"version":3,"sources":["ModalItensRegistroIncorporacao.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModalItensRegistroIncorporacao.vue","sourceRoot":"src/views/components/modal/incorporacao/registroIncorporacao","sourcesContent":["<template>\n    <v-row justify=\"center\">\n        <v-dialog v-model=\"value\" persistent max-width=\"1100\" scrollable @keydown.esc=\"fecharModal\">\n            <v-card>\n                <v-toolbar dark color=\"primary\" class=\"styleToolBar\">\n                    <v-toolbar-title><span class=\"etapaStyle\">Visualização de Item</span></v-toolbar-title>\n                    <v-spacer/>\n                    <az-auto-save v-if=\"$store.state.itemIncorporacao.autoSave.show\" class=\"auto-save-modal\"/>\n                    <v-btn class=\"close__button\" icon @click=\"fecharModal\">\n                        <v-icon size=\"20\">close</v-icon>\n                    </v-btn>\n                </v-toolbar>\n                <v-card-text class=\"container-item-registro\">\n                    <modal-itens-registro-incorporacao-dados v-if=\"dadosGerais.idIncorporacao && verificaPermissaoEdicao\" :value=\"dadosGerais\"/>\n                    <modal-itens-registro-incorporacao-dados-visualizar v-if=\"dadosGerais.idIncorporacao && !verificaPermissaoEdicao\" :value=\"dadosGerais\"/>\n                    <div class=\"container-item-tabela\">\n                    <modal-itens-registro-tabela-veiculo\n                        v-if=\"tipoVeiculo\"\n                        :itens=\"patrimonios\"\n                        :paginas=\"paginas\"\n                        :total-itens=\"totalItens\"\n                        :paginacao=\"$store.state.patrimonio.resultadoBuscaTodosPatrimoniosRegistro.paginacao\"\n                        @paginar=\"tratarEventoPaginar\"\n                        @redirecionarFichaPatrimonio=\"redirecionarFichaPatrimonio\"\n                    />\n                    <modal-itens-registro-tabela-movel\n                        v-if=\"tipoMovel\"\n                        :itens=\"patrimonios\"\n                        :paginas=\"paginas\"\n                        :total-itens=\"totalItens\"\n                        :paginacao=\"$store.state.patrimonio.resultadoBuscaTodosPatrimoniosRegistro.paginacao\"\n                        @paginar=\"tratarEventoPaginar\"\n                        @redirecionarFichaPatrimonio=\"redirecionarFichaPatrimonio\"\n                    /><modal-itens-registro-tabela-equipamento-armamento\n                        v-if=\"tipoEquipamentoArmamento\"\n                        :itens=\"patrimonios\"\n                        :paginas=\"paginas\"\n                        :total-itens=\"totalItens\"\n                        :paginacao=\"$store.state.patrimonio.resultadoBuscaTodosPatrimoniosRegistro.paginacao\"\n                        @paginar=\"tratarEventoPaginar\"\n                        @redirecionarFichaPatrimonio=\"redirecionarFichaPatrimonio\"\n                    />\n                    </div>\n                </v-card-text>\n                <div>\n                    <paginacao :paginacao-interna=\"paginacaoInterna\" :paginas=\"paginas\" @resetaPage=\"resetaPage\" class=\"mr-5 ml-5\"/>\n                </div>\n            </v-card>\n        </v-dialog>\n    </v-row>\n</template>\n\n<script>\n    import {actionTypes, mutationTypes} from '@/core/constants'\n    import {mapActions, mapMutations, mapState} from 'vuex'\n    import ModalItensRegistroIncorporacaoDados from './ModalItensRegistroIncorporacaoDados'\n    import ModalItensRegistroTabelaVeiculo from './ModalItensRegistroTabelaVeiculo'\n    import ModalItensRegistroTabelaMovel from './ModalItensRegistroTabelaMovel'\n    import ModalItensRegistroTabelaEquipamentoArmamento from './ModalItensRegistroTabelaEquipamentoArmamento'\n    import ModalItensRegistroIncorporacaoDadosVisualizar from './ModalItensRegistroIncorporacaoDadosVisualizar'\n    import Paginacao from '@/views/components/tabela/Paginacao'\n    import AzHasPermissions from '@azinformatica/loki/src/utils/AzHasPermissions'\n\n    export default {\n        name: 'ModalItensRegistroIncorporacao',\n        components: {\n            ModalItensRegistroIncorporacaoDadosVisualizar,\n            Paginacao,\n            ModalItensRegistroIncorporacaoDados,\n            ModalItensRegistroTabelaVeiculo,\n            ModalItensRegistroTabelaMovel,\n            ModalItensRegistroTabelaEquipamentoArmamento\n        },\n        data() {\n            return {\n                dadosGerais: {\n                    idIncorporacao: null,\n                    tipoBem: ''\n                },\n                paginacaoInterna: this.$store.state.patrimonio.resultadoBuscaTodosPatrimoniosRegistro.paginacao,\n                patrimonios: [],\n                paginas: 0,\n                totalItens: 0,\n                itemIncorporacaoId: null,\n                incorporacaoId: null,\n                value:true\n            }\n        },\n        watch: {\n            paginacaoInterna: {\n                handler(novoValor) {\n                    this.tratarEventoPaginar(novoValor)\n                },\n                deep: true,\n            },\n        },\n        computed:{\n            tipoVeiculo() {\n                return this.dadosGerais.tipoBem === 'VEICULO'\n            },\n            tipoMovel() {\n                return this.dadosGerais.tipoBem === 'MOVEL'\n            },\n            tipoEquipamentoArmamento() {\n                return this.dadosGerais.tipoBem === 'EQUIPAMENTO' || this.dadosGerais.tipoBem === 'ARMAMENTO'\n            },\n            verificaPermissaoEdicao() {\n                return AzHasPermissions(this.$store.state.loki.user.authorities, [\n                    'Mobiliario.Normal',\n                ])\n            },\n            ...mapState({todosPatrimonios: state => state.patrimonio.resultadoBuscaTodosPatrimoniosRegistro}),\n        },\n        async mounted() {\n            this.setItemIncorporacaoId()\n            this.setIncorporacaoId()\n            await this.buscarItemDeIncorporacao()\n            this.resetaPage()\n            await this.buscaTodosPatrimonios()\n        },\n        methods: {\n            ...mapActions([\n                actionTypes.PATRIMONIO.INCORPORACAO.INCORPORACAO_ITEM.BUSCAR_ITEM_INCORPORACAO_REGISTRO,\n                actionTypes.PATRIMONIO.BUSCAR_TODOS_PATRIMONIOS_REGISTRO\n            ]),\n            ...mapMutations([\n                mutationTypes.PATRIMONIO.SET_PAGINACAO_BUSCA_TODOS_PATRIMONIOS_REGISTRO,\n                mutationTypes.PATRIMONIO.RESETA_PAGE_PATRIMONIO_REGISTRO,\n                mutationTypes.PATRIMONIO.INCORPORACAO.INCORPORACAO_ITEM.DESATIVAR_SALVAMENTO_AUTOMATICO\n            ]),\n            async buscarItemDeIncorporacao() {\n                this.desabilitarLoadingGlobal()\n                const resultado = await this.buscarItemIncorporacaoRegistro({id: this.itemIncorporacaoId})\n                this.habilitarLoadingGlobal()\n                this.dadosGerais = resultado\n                this.setDadosGerais()\n            },\n            async buscaTodosPatrimonios() {\n                if (this.itemIncorporacaoId) {\n                    const resultado = await this.buscarTodosTodosPatrimoniosRegistro(this.itemIncorporacaoId)\n                    if (resultado) {\n                        this.patrimonios = resultado.items\n                        this.paginas = resultado.totalPages\n                        this.totalItens = resultado.totalElements\n                    }\n                }\n            },\n            tratarEventoPaginar(paginacao) {\n                this.setPaginacaoBuscaTodosPatrimoniosRegistro(paginacao)\n                this.resetarPaginacaoSortBy(paginacao)\n                this.buscaTodosPatrimonios()\n            },\n            resetarPaginacaoSortBy(paginacao) {\n                if (!paginacao.sortBy[0]) {\n                    this.todosPatrimonios.paginacao.sortBy[0] = paginacao.defaultSortBy\n                }\n            },\n            resetaPage() {\n                this.resetaPagePatrimonioRegistro()\n            },\n            fecharModal() {\n                this.desativarSalvamentoAutomatico()\n                this.$router.push({\n                    name: 'VisualizarRegistroIncorporacao',\n                    params: {incorporacaoId: this.incorporacaoId}\n                })\n            },\n            setDadosGerais(){\n                this.dadosGerais.idIncorporacao = this.incorporacaoId\n                this.dadosGerais.naturezaDespesa = null\n                this.dadosGerais.estadoConservacao = null\n            },\n            setItemIncorporacaoId(){\n                if (this.$route.params.itemIncorporacaoId) {\n                    this.itemIncorporacaoId = this.$route.params.itemIncorporacaoId\n                }\n            },\n            setIncorporacaoId(){\n                if(this.$route.params.incorporacaoId){\n                    this.incorporacaoId = this.$route.params.incorporacaoId\n                }\n            },\n            async redirecionarFichaPatrimonio(item) {\n                await this.$router.push({name: 'FichaPatrimonioDadosGerais', params: {patrimonioId: item.id}})\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"stylus\">\n\n    .etapaStyle\n        font-weight bold\n        font-size 16px\n\n    .auto-save-modal\n        color white\n\n    .container-item-registro\n        padding 0px !important\n        overflow-x hidden\n        height 75vh\n\n    .container-item-tabela\n        padding 0px 10px\n\n</style>\n"]}]}