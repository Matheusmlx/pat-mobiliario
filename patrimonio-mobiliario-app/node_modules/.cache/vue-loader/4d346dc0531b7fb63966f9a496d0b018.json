{"remainingRequest":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/pages/configuracao/reconhecimento/Reconhecimento.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/src/views/pages/configuracao/reconhecimento/Reconhecimento.vue","mtime":1615553310324},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/matheus/Documentos/patrimonio-mobiliario/patrimonio-mobiliario-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport BotaoNovoBarraSuperior from '@/views/components/botoes/BotaoNovoBarraSuperior'\nimport ReconhecimentoListagem from './listagem/ReconhecimentoListagem'\nimport {actionTypes, mutationTypes} from '@/core/constants'\nimport {mapActions, mapMutations, mapState} from 'vuex'\nimport _ from 'lodash'\n\nexport default {\n    components: {\n        BotaoNovoBarraSuperior,\n        ReconhecimentoListagem\n    },\n    data() {\n        return {\n            filtrosInterno: this.buscarFiltros(),\n            paginas: 0,\n            itens: [],\n            totalItens: 0,\n            permitirAcoes: true,\n            botaoNovoDesabilitado: false\n        }\n    },\n    computed: {\n        ...mapState({todosReconhecimentos: state => state.reconhecimento.todosReconhecimentos})\n    },\n    methods: {\n        ...mapActions([\n            actionTypes.CONFIGURACAO.RECONHECIMENTO.EDITAR_RECONHECIMENTO,\n            actionTypes.CONFIGURACAO.RECONHECIMENTO.BUSCAR_TODOS_RECONHECIMENTOS,\n            actionTypes.CONFIGURACAO.RECONHECIMENTO.INSERIR_RECONHECIMENTO\n        ]),\n        ...mapMutations([\n            mutationTypes.CONFIGURACAO.RECONHECIMENTO.SET_FILTROS_BUSCA_TODOS_RECONHECIMENTOS,\n            mutationTypes.CONFIGURACAO.RECONHECIMENTO.SET_PAGINACAO_BUSCA_TODOS_RECONHECIMENTOS,\n            mutationTypes.CONFIGURACAO.RECONHECIMENTO.RESETA_PAGE_RECONHECIMENTO\n        ]),\n        async atualizarReconhecimento(reconhecimento) {\n            if(await this.editarReconhecimento(reconhecimento)) {\n                this.habilitaBotaoNovo()\n                this.permitirAcoes = true\n            }\n            await this.buscarReconhecimentos()\n            this.mostrarNotificacaoAviso('Atenção: alterar os dados do reconhecimento não afeta incorporações finalizadas anteriormente!')\n        },\n        async buscarReconhecimentos() {\n            this.setFiltrosBuscaTodosReconhecimentos(this.buscarFiltrosInterno())\n            this.setMensagemLoading('Carregando ...')\n            const resultado = await this.buscarTodosReconhecimentos()\n            this.itens = resultado.items\n            this.paginas = resultado.totalPages\n            this.totalItens = resultado.totalElements\n        },\n        buscarFiltros() {\n            return _.cloneDeep(this.$store.state.reconhecimento.todosReconhecimentos.filtros)\n        },\n        buscarFiltrosInterno() {\n            return _.cloneDeep(this.filtrosInterno)\n        },\n        async cancelarEdicao() {\n            this.habilitaBotaoNovo()\n            await this.buscarReconhecimentos()\n        },\n        desabilitaBotaoNovo() {\n            this.botaoNovoDesabilitado = true\n        },\n        habilitaBotaoNovo() {\n            this.botaoNovoDesabilitado = false\n        },\n        async inserirNovoReconhecimento(novoReconhecimento) {\n            if(await this.inserirReconhecimento(novoReconhecimento)) {\n                this.permitirAcoes = true\n                this.habilitaBotaoNovo()\n            }\n            await this.buscarReconhecimentos()\n            this.mostrarNotificacaoSucessoDefault()\n        },\n        async prepararParaInserirNovoReconhecimento() {\n            if (!this.validarSeExisteNovoReconhecimento()) {\n                await this.buscarReconhecimentos()\n                this.itens.unshift({\n                    nome: '',\n                    situacao: 'ATIVO',\n                    execucaoOrcamentaria: null,\n                    notaFiscal: false,\n                    empenho: false\n                })\n                if (this.paginas === 0 && this.totalItens === 0) {\n                    this.paginas = 1\n                    this.totalItens = 1\n                }\n            }\n        },\n        async tratarEventoBuscaSimples(valor) {\n            this.resetaPageReconhecimento()\n            this.filtrosInterno.conteudo.value = valor\n            await this.buscarReconhecimentos()\n        },\n        async tratarEventoPaginar(paginacao) {\n            this.setPaginacaoBuscaTodosReconhecimentos(paginacao)\n            this.resetarPaginacaoSortBy(paginacao)\n            await this.buscarReconhecimentos()\n        },\n        async tratarEventoRemoverFiltro(propriedade) {\n            if (this.filtrosInterno[propriedade]) {\n                this.filtrosInterno[propriedade].value = this.filtrosInterno[propriedade].default\n            }\n            await this.buscarReconhecimentos()\n        },\n        resetarPaginacaoSortBy(paginacao) {\n            if (!paginacao.sortBy[0]) {\n                this.todosReconhecimentos.paginacao.sortBy[0] = paginacao.defaultSortBy\n            }\n        },\n        validarSeExisteNovoReconhecimento() {\n            if (this.itens.length === 0) {\n                return false\n            } else {\n                let novoReconhecimento = this.itens.filter((item) => {\n                    return item && !item.id\n                })\n                return novoReconhecimento.length !== 0\n            }\n        }\n    }\n}\n",{"version":3,"sources":["Reconhecimento.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Reconhecimento.vue","sourceRoot":"src/views/pages/configuracao/reconhecimento","sourcesContent":["<template>\n    <div>\n        <az-toolbar>\n            <botao-novo-barra-superior slot=\"actions\"\n                                       @click=\"prepararParaInserirNovoReconhecimento\"\n                                       :desabilitar=\"botaoNovoDesabilitado\"\n                                       mensagem-tooltip=\"Finalize o reconhecimento em edição antes de criar um novo\"/>\n            <az-search :filter=\"filtrosInterno\"\n                       @remove-filter=\"tratarEventoRemoverFiltro\"\n                       @simple-search=\"tratarEventoBuscaSimples\"\n                       simple-search-placeholder=\"Busque por: nome, situação ou exec. orçamentária\"\n                       :maxlengthInput=\"500\"\n                       class=\"seachReconhecimento\"\n                       slot=\"simpleSearch\"/>\n        </az-toolbar>\n        <reconhecimento-listagem\n            v-model=\"itens\"\n            :paginacao=\"todosReconhecimentos.paginacao\"\n            :paginas=\"paginas\"\n            :total-itens=\"totalItens\"\n            :permitir-edicao=\"permitirAcoes\"\n            @atualizarReconhecimento=\"atualizarReconhecimento\"\n            @cancelarEdicao=\"cancelarEdicao\"\n            @desabilitaBotaoNovo=\"desabilitaBotaoNovo\"\n            @habilitaBotaoNovo=\"habilitaBotaoNovo\"\n            @inserirNovoReconhecimento=\"inserirNovoReconhecimento\"\n            @paginar=\"tratarEventoPaginar\"\n        />\n    </div>\n</template>\n\n<script>\n    import BotaoNovoBarraSuperior from '@/views/components/botoes/BotaoNovoBarraSuperior'\n    import ReconhecimentoListagem from './listagem/ReconhecimentoListagem'\n    import {actionTypes, mutationTypes} from '@/core/constants'\n    import {mapActions, mapMutations, mapState} from 'vuex'\n    import _ from 'lodash'\n\n    export default {\n        components: {\n            BotaoNovoBarraSuperior,\n            ReconhecimentoListagem\n        },\n        data() {\n            return {\n                filtrosInterno: this.buscarFiltros(),\n                paginas: 0,\n                itens: [],\n                totalItens: 0,\n                permitirAcoes: true,\n                botaoNovoDesabilitado: false\n            }\n        },\n        computed: {\n            ...mapState({todosReconhecimentos: state => state.reconhecimento.todosReconhecimentos})\n        },\n        methods: {\n            ...mapActions([\n                actionTypes.CONFIGURACAO.RECONHECIMENTO.EDITAR_RECONHECIMENTO,\n                actionTypes.CONFIGURACAO.RECONHECIMENTO.BUSCAR_TODOS_RECONHECIMENTOS,\n                actionTypes.CONFIGURACAO.RECONHECIMENTO.INSERIR_RECONHECIMENTO\n            ]),\n            ...mapMutations([\n                mutationTypes.CONFIGURACAO.RECONHECIMENTO.SET_FILTROS_BUSCA_TODOS_RECONHECIMENTOS,\n                mutationTypes.CONFIGURACAO.RECONHECIMENTO.SET_PAGINACAO_BUSCA_TODOS_RECONHECIMENTOS,\n                mutationTypes.CONFIGURACAO.RECONHECIMENTO.RESETA_PAGE_RECONHECIMENTO\n            ]),\n            async atualizarReconhecimento(reconhecimento) {\n                if(await this.editarReconhecimento(reconhecimento)) {\n                    this.habilitaBotaoNovo()\n                    this.permitirAcoes = true\n                }\n                await this.buscarReconhecimentos()\n                this.mostrarNotificacaoAviso('Atenção: alterar os dados do reconhecimento não afeta incorporações finalizadas anteriormente!')\n            },\n            async buscarReconhecimentos() {\n                this.setFiltrosBuscaTodosReconhecimentos(this.buscarFiltrosInterno())\n                this.setMensagemLoading('Carregando ...')\n                const resultado = await this.buscarTodosReconhecimentos()\n                this.itens = resultado.items\n                this.paginas = resultado.totalPages\n                this.totalItens = resultado.totalElements\n            },\n            buscarFiltros() {\n                return _.cloneDeep(this.$store.state.reconhecimento.todosReconhecimentos.filtros)\n            },\n            buscarFiltrosInterno() {\n                return _.cloneDeep(this.filtrosInterno)\n            },\n            async cancelarEdicao() {\n                this.habilitaBotaoNovo()\n                await this.buscarReconhecimentos()\n            },\n            desabilitaBotaoNovo() {\n                this.botaoNovoDesabilitado = true\n            },\n            habilitaBotaoNovo() {\n                this.botaoNovoDesabilitado = false\n            },\n            async inserirNovoReconhecimento(novoReconhecimento) {\n                if(await this.inserirReconhecimento(novoReconhecimento)) {\n                    this.permitirAcoes = true\n                    this.habilitaBotaoNovo()\n                }\n                await this.buscarReconhecimentos()\n                this.mostrarNotificacaoSucessoDefault()\n            },\n            async prepararParaInserirNovoReconhecimento() {\n                if (!this.validarSeExisteNovoReconhecimento()) {\n                    await this.buscarReconhecimentos()\n                    this.itens.unshift({\n                        nome: '',\n                        situacao: 'ATIVO',\n                        execucaoOrcamentaria: null,\n                        notaFiscal: false,\n                        empenho: false\n                    })\n                    if (this.paginas === 0 && this.totalItens === 0) {\n                        this.paginas = 1\n                        this.totalItens = 1\n                    }\n                }\n            },\n            async tratarEventoBuscaSimples(valor) {\n                this.resetaPageReconhecimento()\n                this.filtrosInterno.conteudo.value = valor\n                await this.buscarReconhecimentos()\n            },\n            async tratarEventoPaginar(paginacao) {\n                this.setPaginacaoBuscaTodosReconhecimentos(paginacao)\n                this.resetarPaginacaoSortBy(paginacao)\n                await this.buscarReconhecimentos()\n            },\n            async tratarEventoRemoverFiltro(propriedade) {\n                if (this.filtrosInterno[propriedade]) {\n                    this.filtrosInterno[propriedade].value = this.filtrosInterno[propriedade].default\n                }\n                await this.buscarReconhecimentos()\n            },\n            resetarPaginacaoSortBy(paginacao) {\n                if (!paginacao.sortBy[0]) {\n                    this.todosReconhecimentos.paginacao.sortBy[0] = paginacao.defaultSortBy\n                }\n            },\n            validarSeExisteNovoReconhecimento() {\n                if (this.itens.length === 0) {\n                    return false\n                } else {\n                    let novoReconhecimento = this.itens.filter((item) => {\n                        return item && !item.id\n                    })\n                    return novoReconhecimento.length !== 0\n                }\n            }\n        }\n    }\n</script>\n<style lang=\"stylus\">\n    .seachReconhecimento .input-search\n        background-color #fff !important\n        width 28vw !important\n\n        span\n            max-width 350px\n\n        .v-chip__content\n            width 100%\n\n            span\n                white-space nowrap\n                overflow hidden\n                text-overflow ellipsis\n\n    @media (max-width 1250px)\n        .seachReconhecimento .input-search\n            background-color #fff !important\n            width 40vw !important\n\n            span\n                max-width 230px\n\n    @media (max-width 890px)\n        .seachReconhecimento .input-search\n            background-color #fff !important\n            width 50vw !important\n\n    @media (max-width 720px)\n        .seachReconhecimento .input-search\n            background-color #fff !important\n            width 60vw !important\n</style>\n"]}]}